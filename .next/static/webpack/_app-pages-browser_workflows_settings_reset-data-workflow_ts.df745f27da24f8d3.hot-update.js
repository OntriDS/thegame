"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_workflows_settings_reset-data-workflow_ts",{

/***/ "(app-pages-browser)/./workflows/settings/reset-data-workflow.ts":
/*!***************************************************!*\
  !*** ./workflows/settings/reset-data-workflow.ts ***!
  \***************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ResetDataWorkflow: function() { return /* binding */ ResetDataWorkflow; }\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(app-pages-browser)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(app-pages-browser)/./data-store/keys.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// workflows/settings/reset-data-workflow.ts\n// Reset Data Workflow for KV-only architecture\n\n\nclass ResetDataWorkflow {\n    /**\r\n   * Execute reset data operation\r\n   */ static async execute() {\n        let mode = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : \"defaults\";\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDD04 Starting reset data operation (mode: \".concat(mode, \")...\"));\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"object\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(\"[ResetDataWorkflow] \\uD83C\\uDF0D Environment: \".concat(isKV ? \"KV (Production)\" : \"Local (Development)\"));\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDDA5️ Context: \".concat(isServer ? \"Server\" : \"Client\"));\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(\"[ResetDataWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution\");\n                return {\n                    success: true,\n                    message: \"Reset requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side reset required for local environment\"\n                        ],\n                        errors: [],\n                        mode,\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Handle client-side execution for localhost\n            if (!isKV && !isServer) {\n                console.log(\"[ResetDataWorkflow] \\uD83D\\uDDA5️ Running client-side reset for localhost...\");\n                return await this.executeClientSideReset(mode, results, errors);\n            }\n            // Define reset options\n            const options = {\n                mode,\n                seedSites: mode === \"defaults\",\n                preserveLogs: false\n            };\n            // Clear all entity data\n            await this.clearAllEntityData(results, errors);\n            // Clear all links\n            await this.clearAllLinks(results, errors);\n            // Clear logs if not preserving\n            if (!options.preserveLogs) {\n                await this.clearAllLogs(results, errors);\n            }\n            // Seed default data if requested\n            if (options.seedSites) {\n                await this.seedDefaultSites(results, errors);\n            }\n            const success = errors.length === 0;\n            const message = success ? \"Successfully reset data (\".concat(mode, \" mode) - \").concat(results.length, \" operations completed\") : \"Reset completed with \".concat(errors.length, \" errors - \").concat(results.length, \" operations completed\");\n            console.log(\"[ResetDataWorkflow] ✅ Reset data operation completed: \".concat(message));\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    mode,\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[ResetDataWorkflow] ❌ Reset data operation failed:\", error);\n            return {\n                success: false,\n                message: \"Reset data operation failed: \".concat(error instanceof Error ? error.message : \"Unknown error\"),\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    mode,\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Clear all entity data from KV\r\n   */ static async clearAllEntityData(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDDD1️ Clearing all entity data...\");\n            const entityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of entityTypes){\n                try {\n                    // Get all entity IDs from index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(entityType);\n                    const entityIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(indexKey);\n                    if (entityIds.length > 0) {\n                        // Delete all entity data\n                        const dataKeys = entityIds.map((id)=>(0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, id));\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...dataKeys);\n                        // Clear the index\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(indexKey);\n                        results.push(\"Cleared \".concat(entityIds.length, \" \").concat(entityType, \" entities\"));\n                        console.log(\"[ResetDataWorkflow] ✅ Cleared \".concat(entityIds.length, \" \").concat(entityType, \" entities\"));\n                    } else {\n                        results.push(\"No \".concat(entityType, \" entities to clear\"));\n                    }\n                } catch (error) {\n                    const errorMsg = \"Failed to clear \".concat(entityType, \": \").concat(error instanceof Error ? error.message : \"Unknown error\");\n                    errors.push(errorMsg);\n                    console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n                }\n            }\n        } catch (error) {\n            const errorMsg = \"Failed to clear entity data: \".concat(error instanceof Error ? error.message : \"Unknown error\");\n            errors.push(errorMsg);\n            console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n        }\n    }\n    /**\r\n   * Clear all links from KV\r\n   */ static async clearAllLinks(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDD17 Clearing all links...\");\n            // Get all link IDs\n            const linksIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"links\");\n            const linkIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(linksIndexKey);\n            if (linkIds.length > 0) {\n                // Delete all link data\n                const linkKeys = linkIds.map((id)=>\"links:link:\".concat(id));\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...linkKeys);\n                // Clear the links index\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(linksIndexKey);\n                // Clear all entity-specific link indexes\n                const entityTypes = [\n                    \"tasks\",\n                    \"items\",\n                    \"sales\",\n                    \"financials\",\n                    \"characters\",\n                    \"players\",\n                    \"sites\"\n                ];\n                for (const entityType of entityTypes){\n                    const entityLinkIndexPattern = \"index:links:by-entity:\".concat(entityType, \":*\");\n                    const entityLinkKeys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.keys(entityLinkIndexPattern);\n                    if (entityLinkKeys.length > 0) {\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...entityLinkKeys);\n                    }\n                }\n                results.push(\"Cleared \".concat(linkIds.length, \" links\"));\n                console.log(\"[ResetDataWorkflow] ✅ Cleared \".concat(linkIds.length, \" links\"));\n            } else {\n                results.push(\"No links to clear\");\n            }\n        } catch (error) {\n            const errorMsg = \"Failed to clear links: \".concat(error instanceof Error ? error.message : \"Unknown error\");\n            errors.push(errorMsg);\n            console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n        }\n    }\n    /**\r\n   * Clear all logs from KV\r\n   */ static async clearAllLogs(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDCDD Clearing all logs...\");\n            const logTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\",\n                \"links\"\n            ];\n            for (const logType of logTypes){\n                try {\n                    const logKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildLogKey)(logType);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(logKey);\n                    results.push(\"Cleared \".concat(logType, \" logs\"));\n                } catch (error) {\n                    const errorMsg = \"Failed to clear \".concat(logType, \" logs: \").concat(error instanceof Error ? error.message : \"Unknown error\");\n                    errors.push(errorMsg);\n                    console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n                }\n            }\n        } catch (error) {\n            const errorMsg = \"Failed to clear logs: \".concat(error instanceof Error ? error.message : \"Unknown error\");\n            errors.push(errorMsg);\n            console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n        }\n    }\n    /**\r\n   * Seed default sites\r\n   */ static async seedDefaultSites(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83C\\uDF31 Seeding default sites...\");\n            const defaultSites = [\n                {\n                    id: \"home\",\n                    name: \"Home\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"feria-box\",\n                    name: \"Feria Box\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"digital-space\",\n                    name: \"Digital Space\",\n                    type: \"cloud\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Cloud\",\n                        location: null\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                }\n            ];\n            for (const site of defaultSites){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"sites\", site.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(site));\n                    // Add to sites index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"sites\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, site.id);\n                    results.push(\"Seeded site: \".concat(site.name));\n                } catch (error) {\n                    const errorMsg = \"Failed to seed site \".concat(site.name, \": \").concat(error instanceof Error ? error.message : \"Unknown error\");\n                    errors.push(errorMsg);\n                    console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n                }\n            }\n            console.log(\"[ResetDataWorkflow] ✅ Seeded default sites\");\n        } catch (error) {\n            const errorMsg = \"Failed to seed default sites: \".concat(error instanceof Error ? error.message : \"Unknown error\");\n            errors.push(errorMsg);\n            console.error(\"[ResetDataWorkflow] ❌ \".concat(errorMsg));\n        }\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3dvcmtmbG93cy9zZXR0aW5ncy9yZXNldC1kYXRhLXdvcmtmbG93LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSw0Q0FBNEM7QUFDNUMsK0NBQStDO0FBRWY7QUFDaUU7QUFvQjFGLE1BQU1JO0lBRVg7O0dBRUMsR0FDRCxhQUFhQyxVQUF1RjtZQUEvRUMsT0FBQUEsaUVBQTBDO1FBQzdELElBQUk7WUFDRkMsUUFBUUMsR0FBRyxDQUFDLHlFQUFvRSxPQUFMRixNQUFLO1lBRWhGLE1BQU1HLE9BQU9DLFFBQVFDLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNoRCxNQUFNQyxXQUFXLGFBQWtCO1lBQ25DLE1BQU1DLFVBQW9CLEVBQUU7WUFDNUIsTUFBTUMsU0FBbUIsRUFBRTtZQUUzQlQsUUFBUUMsR0FBRyxDQUFDLGlEQUF3RixPQUFqREMsT0FBTyxvQkFBb0I7WUFDOUVGLFFBQVFDLEdBQUcsQ0FBQyw4Q0FBbUUsT0FBL0JNLFdBQVcsV0FBVztZQUV0RSx1REFBdUQ7WUFDdkQsSUFBSSxDQUFDTCxRQUFRSyxVQUFVO2dCQUNyQlAsUUFBUUMsR0FBRyxDQUFFO2dCQUNiLE9BQU87b0JBQ0xTLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RDLE1BQU07d0JBQ0pKLFNBQVM7NEJBQUM7eUJBQW1EO3dCQUM3REMsUUFBUSxFQUFFO3dCQUNWVjt3QkFDQWMsYUFBYTt3QkFDYkMseUJBQXlCO29CQUMzQjtnQkFDRjtZQUNGO1lBRUEsNkNBQTZDO1lBQzdDLElBQUksQ0FBQ1osUUFBUSxDQUFDSyxVQUFVO2dCQUN0QlAsUUFBUUMsR0FBRyxDQUFFO2dCQUNiLE9BQU8sTUFBTSxJQUFJLENBQUNjLHNCQUFzQixDQUFDaEIsTUFBTVMsU0FBU0M7WUFDMUQ7WUFFQSx1QkFBdUI7WUFDdkIsTUFBTU8sVUFBd0I7Z0JBQzVCakI7Z0JBQ0FrQixXQUFXbEIsU0FBUztnQkFDcEJtQixjQUFjO1lBQ2hCO1lBRUEsd0JBQXdCO1lBQ3hC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LEVBQUMsTUFBNkQsT0FBekR2QixpQkFBaUJDLFFBQVFELE1BQU1iLE9BQU8sR0FBRztvQkFDL0ZGLE9BQU8wQixJQUFJLENBQUNDO29CQUNacEMsUUFBUXdCLEtBQUssQ0FBQyx5QkFBa0MsT0FBVFk7Z0JBQ3pDO1lBQ0Y7WUFFQXBDLFFBQVFDLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT3VCLE9BQU87WUFDZCxNQUFNWSxXQUFXLGlDQUEwRixPQUF6RFosaUJBQWlCQyxRQUFRRCxNQUFNYixPQUFPLEdBQUc7WUFDM0ZGLE9BQU8wQixJQUFJLENBQUNDO1lBQ1pwQyxRQUFRd0IsS0FBSyxDQUFDLHlCQUFrQyxPQUFUWTtRQUN6QztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vd29ya2Zsb3dzL3NldHRpbmdzL3Jlc2V0LWRhdGEtd29ya2Zsb3cudHM/YTRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB3b3JrZmxvd3Mvc2V0dGluZ3MvcmVzZXQtZGF0YS13b3JrZmxvdy50c1xyXG4vLyBSZXNldCBEYXRhIFdvcmtmbG93IGZvciBLVi1vbmx5IGFyY2hpdGVjdHVyZVxyXG5cclxuaW1wb3J0IHsga3YgfSBmcm9tICdAdmVyY2VsL2t2JztcclxuaW1wb3J0IHsgYnVpbGREYXRhS2V5LCBidWlsZEluZGV4S2V5LCBidWlsZExvZ0tleSwgYnVpbGRMaW5rc0luZGV4S2V5IH0gZnJvbSAnQC9kYXRhLXN0b3JlL2tleXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1Jlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgZGF0YT86IHtcclxuICAgIHJlc3VsdHM6IHN0cmluZ1tdO1xyXG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcclxuICAgIG1vZGU6IHN0cmluZztcclxuICAgIGVudmlyb25tZW50OiBzdHJpbmc7XHJcbiAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbj86IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXNldE9wdGlvbnMge1xyXG4gIG1vZGU6ICdjbGVhcicgfCAnZGVmYXVsdHMnIHwgJ2JhY2tmaWxsJztcclxuICBzZWVkU2l0ZXM6IGJvb2xlYW47XHJcbiAgcHJlc2VydmVMb2dzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVzZXREYXRhV29ya2Zsb3cge1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGUgcmVzZXQgZGF0YSBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZShtb2RlOiAnY2xlYXInIHwgJ2RlZmF1bHRzJyB8ICdiYWNrZmlsbCcgPSAnZGVmYXVsdHMnKTogUHJvbWlzZTxTZXR0aW5nc1Jlc3VsdD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g8J+UhCBTdGFydGluZyByZXNldCBkYXRhIG9wZXJhdGlvbiAobW9kZTogJHttb2RlfSkuLi5gKTtcclxuXHJcbiAgICAgIGNvbnN0IGlzS1YgPSBCb29sZWFuKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCk7XHJcbiAgICAgIGNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbUmVzZXREYXRhV29ya2Zsb3ddIPCfjI0gRW52aXJvbm1lbnQ6ICR7aXNLViA/ICdLViAoUHJvZHVjdGlvbiknIDogJ0xvY2FsIChEZXZlbG9wbWVudCknfWApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDwn5al77iPIENvbnRleHQ6ICR7aXNTZXJ2ZXIgPyAnU2VydmVyJyA6ICdDbGllbnQnfWApO1xyXG5cclxuICAgICAgLy8gRm9yIGxvY2FsIGVudmlyb25tZW50LCB3ZSBuZWVkIHRvIHJ1biBvbiBjbGllbnQgc2lkZVxyXG4gICAgICBpZiAoIWlzS1YgJiYgaXNTZXJ2ZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDimqDvuI8gTG9jYWwgZW52aXJvbm1lbnQgZGV0ZWN0ZWQgb24gc2VydmVyIC0gcmV0dXJuaW5nIGluc3RydWN0aW9uIGZvciBjbGllbnQtc2lkZSBleGVjdXRpb25gKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdSZXNldCByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgcmVzdWx0czogWydDbGllbnQtc2lkZSByZXNldCByZXF1aXJlZCBmb3IgbG9jYWwgZW52aXJvbm1lbnQnXSxcclxuICAgICAgICAgICAgZXJyb3JzOiBbXSxcclxuICAgICAgICAgICAgbW9kZSxcclxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6ICdsb2NhbCcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSGFuZGxlIGNsaWVudC1zaWRlIGV4ZWN1dGlvbiBmb3IgbG9jYWxob3N0XHJcbiAgICAgIGlmICghaXNLViAmJiAhaXNTZXJ2ZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDwn5al77iPIFJ1bm5pbmcgY2xpZW50LXNpZGUgcmVzZXQgZm9yIGxvY2FsaG9zdC4uLmApO1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVDbGllbnRTaWRlUmVzZXQobW9kZSwgcmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRGVmaW5lIHJlc2V0IG9wdGlvbnNcclxuICAgICAgY29uc3Qgb3B0aW9uczogUmVzZXRPcHRpb25zID0ge1xyXG4gICAgICAgIG1vZGUsXHJcbiAgICAgICAgc2VlZFNpdGVzOiBtb2RlID09PSAnZGVmYXVsdHMnLFxyXG4gICAgICAgIHByZXNlcnZlTG9nczogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIENsZWFyIGFsbCBlbnRpdHkgZGF0YVxyXG4gICAgICBhd2FpdCB0aGlzLmNsZWFyQWxsRW50aXR5RGF0YShyZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgYWxsIGxpbmtzXHJcbiAgICAgIGF3YWl0IHRoaXMuY2xlYXJBbGxMaW5rcyhyZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgbG9ncyBpZiBub3QgcHJlc2VydmluZ1xyXG4gICAgICBpZiAoIW9wdGlvbnMucHJlc2VydmVMb2dzKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5jbGVhckFsbExvZ3MocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gU2VlZCBkZWZhdWx0IGRhdGEgaWYgcmVxdWVzdGVkXHJcbiAgICAgIGlmIChvcHRpb25zLnNlZWRTaXRlcykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VlZERlZmF1bHRTaXRlcyhyZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzdWNjZXNzID0gZXJyb3JzLmxlbmd0aCA9PT0gMDtcclxuICAgICAgY29uc3QgbWVzc2FnZSA9IHN1Y2Nlc3MgXHJcbiAgICAgICAgPyBgU3VjY2Vzc2Z1bGx5IHJlc2V0IGRhdGEgKCR7bW9kZX0gbW9kZSkgLSAke3Jlc3VsdHMubGVuZ3RofSBvcGVyYXRpb25zIGNvbXBsZXRlZGBcclxuICAgICAgICA6IGBSZXNldCBjb21wbGV0ZWQgd2l0aCAke2Vycm9ycy5sZW5ndGh9IGVycm9ycyAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKchSBSZXNldCBkYXRhIG9wZXJhdGlvbiBjb21wbGV0ZWQ6ICR7bWVzc2FnZX1gKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzcyxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlc3VsdHMsXHJcbiAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICBtb2RlLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGlzS1YgPyAna3YnIDogJ2xvY2FsJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCBSZXNldCBkYXRhIG9wZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBSZXNldCBkYXRhIG9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzOiBbXSxcclxuICAgICAgICAgIGVycm9yczogW2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXSxcclxuICAgICAgICAgIG1vZGUsXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ3Vua25vd24nXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBDbGVhciBhbGwgZW50aXR5IGRhdGEgZnJvbSBLVlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGNsZWFyQWxsRW50aXR5RGF0YShyZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tSZXNldERhdGFXb3JrZmxvd10g8J+Xke+4jyBDbGVhcmluZyBhbGwgZW50aXR5IGRhdGEuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVudGl0eVR5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcyddO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBlbnRpdHlUeXBlIG9mIGVudGl0eVR5cGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIEdldCBhbGwgZW50aXR5IElEcyBmcm9tIGluZGV4XHJcbiAgICAgICAgICBjb25zdCBpbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoZW50aXR5VHlwZSk7XHJcbiAgICAgICAgICBjb25zdCBlbnRpdHlJZHMgPSBhd2FpdCBrdi5zbWVtYmVycyhpbmRleEtleSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlbnRpdHlJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBEZWxldGUgYWxsIGVudGl0eSBkYXRhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFLZXlzID0gZW50aXR5SWRzLm1hcChpZCA9PiBidWlsZERhdGFLZXkoZW50aXR5VHlwZSwgaWQpKTtcclxuICAgICAgICAgICAgYXdhaXQga3YuZGVsKC4uLmRhdGFLZXlzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBpbmRleFxyXG4gICAgICAgICAgICBhd2FpdCBrdi5kZWwoaW5kZXhLZXkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkICR7ZW50aXR5SWRzLmxlbmd0aH0gJHtlbnRpdHlUeXBlfSBlbnRpdGllc2ApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDinIUgQ2xlYXJlZCAke2VudGl0eUlkcy5sZW5ndGh9ICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgTm8gJHtlbnRpdHlUeXBlfSBlbnRpdGllcyB0byBjbGVhcmApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgJHtlbnRpdHlUeXBlfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBjbGVhciBlbnRpdHkgZGF0YTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtSZXNldERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIENsZWFyIGFsbCBsaW5rcyBmcm9tIEtWXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgY2xlYXJBbGxMaW5rcyhyZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tSZXNldERhdGFXb3JrZmxvd10g8J+UlyBDbGVhcmluZyBhbGwgbGlua3MuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBhbGwgbGluayBJRHNcclxuICAgICAgY29uc3QgbGlua3NJbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoJ2xpbmtzJyk7XHJcbiAgICAgIGNvbnN0IGxpbmtJZHMgPSBhd2FpdCBrdi5zbWVtYmVycyhsaW5rc0luZGV4S2V5KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW5rSWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBEZWxldGUgYWxsIGxpbmsgZGF0YVxyXG4gICAgICAgIGNvbnN0IGxpbmtLZXlzID0gbGlua0lkcy5tYXAoaWQgPT4gYGxpbmtzOmxpbms6JHtpZH1gKTtcclxuICAgICAgICBhd2FpdCBrdi5kZWwoLi4ubGlua0tleXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsZWFyIHRoZSBsaW5rcyBpbmRleFxyXG4gICAgICAgIGF3YWl0IGt2LmRlbChsaW5rc0luZGV4S2V5KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDbGVhciBhbGwgZW50aXR5LXNwZWNpZmljIGxpbmsgaW5kZXhlc1xyXG4gICAgICAgIGNvbnN0IGVudGl0eVR5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcyddO1xyXG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5VHlwZSBvZiBlbnRpdHlUeXBlcykge1xyXG4gICAgICAgICAgY29uc3QgZW50aXR5TGlua0luZGV4UGF0dGVybiA9IGBpbmRleDpsaW5rczpieS1lbnRpdHk6JHtlbnRpdHlUeXBlfToqYDtcclxuICAgICAgICAgIGNvbnN0IGVudGl0eUxpbmtLZXlzID0gYXdhaXQga3Yua2V5cyhlbnRpdHlMaW5rSW5kZXhQYXR0ZXJuKTtcclxuICAgICAgICAgIGlmIChlbnRpdHlMaW5rS2V5cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGt2LmRlbCguLi5lbnRpdHlMaW5rS2V5cyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlc3VsdHMucHVzaChgQ2xlYXJlZCAke2xpbmtJZHMubGVuZ3RofSBsaW5rc2ApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKchSBDbGVhcmVkICR7bGlua0lkcy5sZW5ndGh9IGxpbmtzYCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKCdObyBsaW5rcyB0byBjbGVhcicpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgbGlua3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBDbGVhciBhbGwgbG9ncyBmcm9tIEtWXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgY2xlYXJBbGxMb2dzKHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1Jlc2V0RGF0YVdvcmtmbG93XSDwn5OdIENsZWFyaW5nIGFsbCBsb2dzLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBsb2dUeXBlcyA9IFsndGFza3MnLCAnaXRlbXMnLCAnc2FsZXMnLCAnZmluYW5jaWFscycsICdjaGFyYWN0ZXJzJywgJ3BsYXllcnMnLCAnc2l0ZXMnLCAnbGlua3MnXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgbG9nVHlwZSBvZiBsb2dUeXBlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBsb2dLZXkgPSBidWlsZExvZ0tleShsb2dUeXBlKTtcclxuICAgICAgICAgIGF3YWl0IGt2LmRlbChsb2dLZXkpO1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkICR7bG9nVHlwZX0gbG9nc2ApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgJHtsb2dUeXBlfSBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyIGxvZ3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBTZWVkIGRlZmF1bHQgc2l0ZXNcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBzZWVkRGVmYXVsdFNpdGVzKHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1Jlc2V0RGF0YVdvcmtmbG93XSDwn4yxIFNlZWRpbmcgZGVmYXVsdCBzaXRlcy4uLicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGVmYXVsdFNpdGVzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnaG9tZScsXHJcbiAgICAgICAgICBuYW1lOiAnSG9tZScsXHJcbiAgICAgICAgICB0eXBlOiAncGh5c2ljYWwnLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIHNldHRsZW1lbnQ6ICdVdml0YScsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7IGxhdDogOS4xNTAwLCBsbmc6IC04My43NTAwIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnZmVyaWEtYm94JyxcclxuICAgICAgICAgIG5hbWU6ICdGZXJpYSBCb3gnLFxyXG4gICAgICAgICAgdHlwZTogJ3BoeXNpY2FsJyxcclxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBzZXR0bGVtZW50OiAnVXZpdGEnLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogeyBsYXQ6IDkuMTUwMCwgbG5nOiAtODMuNzUwMCB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbGlua3M6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2RpZ2l0YWwtc3BhY2UnLFxyXG4gICAgICAgICAgbmFtZTogJ0RpZ2l0YWwgU3BhY2UnLFxyXG4gICAgICAgICAgdHlwZTogJ2Nsb3VkJyxcclxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBzZXR0bGVtZW50OiAnQ2xvdWQnLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogbnVsbFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3Qgc2l0ZSBvZiBkZWZhdWx0U2l0ZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YUtleSA9IGJ1aWxkRGF0YUtleSgnc2l0ZXMnLCBzaXRlLmlkKTtcclxuICAgICAgICAgIGF3YWl0IGt2LnNldChkYXRhS2V5LCBKU09OLnN0cmluZ2lmeShzaXRlKSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCB0byBzaXRlcyBpbmRleFxyXG4gICAgICAgICAgY29uc3QgaW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCdzaXRlcycpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2FkZChpbmRleEtleSwgc2l0ZS5pZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc3VsdHMucHVzaChgU2VlZGVkIHNpdGU6ICR7c2l0ZS5uYW1lfWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCBzaXRlICR7c2l0ZS5uYW1lfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbUmVzZXREYXRhV29ya2Zsb3ddIOKchSBTZWVkZWQgZGVmYXVsdCBzaXRlcycpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIHNlZWQgZGVmYXVsdCBzaXRlczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtSZXNldERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJrdiIsImJ1aWxkRGF0YUtleSIsImJ1aWxkSW5kZXhLZXkiLCJidWlsZExvZ0tleSIsIlJlc2V0RGF0YVdvcmtmbG93IiwiZXhlY3V0ZSIsIm1vZGUiLCJjb25zb2xlIiwibG9nIiwiaXNLViIsIkJvb2xlYW4iLCJwcm9jZXNzIiwiZW52IiwiS1ZfUkVTVF9BUElfVVJMIiwiaXNTZXJ2ZXIiLCJyZXN1bHRzIiwiZXJyb3JzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkYXRhIiwiZW52aXJvbm1lbnQiLCJyZXF1aXJlc0NsaWVudEV4ZWN1dGlvbiIsImV4ZWN1dGVDbGllbnRTaWRlUmVzZXQiLCJvcHRpb25zIiwic2VlZFNpdGVzIiwicHJlc2VydmVMb2dzIiwiY2xlYXJBbGxFbnRpdHlEYXRhIiwiY2xlYXJBbGxMaW5rcyIsImNsZWFyQWxsTG9ncyIsInNlZWREZWZhdWx0U2l0ZXMiLCJsZW5ndGgiLCJlcnJvciIsIkVycm9yIiwiZW50aXR5VHlwZXMiLCJlbnRpdHlUeXBlIiwiaW5kZXhLZXkiLCJlbnRpdHlJZHMiLCJzbWVtYmVycyIsImRhdGFLZXlzIiwibWFwIiwiaWQiLCJkZWwiLCJwdXNoIiwiZXJyb3JNc2ciLCJsaW5rc0luZGV4S2V5IiwibGlua0lkcyIsImxpbmtLZXlzIiwiZW50aXR5TGlua0luZGV4UGF0dGVybiIsImVudGl0eUxpbmtLZXlzIiwia2V5cyIsImxvZ1R5cGVzIiwibG9nVHlwZSIsImxvZ0tleSIsImRlZmF1bHRTaXRlcyIsIm5hbWUiLCJ0eXBlIiwic3RhdHVzIiwibWV0YWRhdGEiLCJzZXR0bGVtZW50IiwibG9jYXRpb24iLCJsYXQiLCJsbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwibGlua3MiLCJzaXRlIiwiZGF0YUtleSIsInNldCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzYWRkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./workflows/settings/reset-data-workflow.ts\n"));

/***/ })

});