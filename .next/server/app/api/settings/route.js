"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/settings/route";
exports.ids = ["app/api/settings/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Froute&page=%2Fapi%2Fsettings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Froute.ts&appDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Froute&page=%2Fapi%2Fsettings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Froute.ts&appDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Usuario_AKILES_GAME_WEB_APP_SPLIT_thegame_app_api_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/settings/route.ts */ \"(rsc)/./app/api/settings/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/settings/route\",\n        pathname: \"/api/settings\",\n        filename: \"route\",\n        bundlePath: \"app/api/settings/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Usuario\\\\AKILES\\\\GAME WEB APP\\\\SPLIT\\\\thegame\\\\app\\\\api\\\\settings\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Usuario_AKILES_GAME_WEB_APP_SPLIT_thegame_app_api_settings_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/settings/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzZXR0aW5ncyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc2V0dGluZ3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzZXR0aW5ncyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVc3VhcmlvJTVDQUtJTEVTJTVDR0FNRSUyMFdFQiUyMEFQUCU1Q1NQTElUJTVDdGhlZ2FtZSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDVXN1YXJpbyU1Q0FLSUxFUyU1Q0dBTUUlMjBXRUIlMjBBUFAlNUNTUExJVCU1Q3RoZWdhbWUmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8/ODk4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxVc3VhcmlvXFxcXEFLSUxFU1xcXFxHQU1FIFdFQiBBUFBcXFxcU1BMSVRcXFxcdGhlZ2FtZVxcXFxhcHBcXFxcYXBpXFxcXHNldHRpbmdzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zZXR0aW5ncy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NldHRpbmdzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zZXR0aW5ncy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVzdWFyaW9cXFxcQUtJTEVTXFxcXEdBTUUgV0VCIEFQUFxcXFxTUExJVFxcXFx0aGVnYW1lXFxcXGFwcFxcXFxhcGlcXFxcc2V0dGluZ3NcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3NldHRpbmdzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Froute&page=%2Fapi%2Fsettings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Froute.ts&appDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/settings/route.ts":
/*!***********************************!*\
  !*** ./app/api/settings/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_api_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/api-auth */ \"(rsc)/./lib/api-auth.ts\");\n/* harmony import */ var _workflows_settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/workflows/settings */ \"(rsc)/./workflows/settings/index.ts\");\n// app/api/settings/route.ts\n\n\n\nasync function POST(request) {\n    if (!await (0,_lib_api_auth__WEBPACK_IMPORTED_MODULE_1__.requireAdminAuth)(request)) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    try {\n        const { action, parameters } = await request.json();\n        switch(action){\n            case \"clear-logs\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.ClearLogsWorkflow.execute();\n            case \"reset-data\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.ResetDataWorkflow.execute(parameters?.mode || \"defaults\");\n            case \"clear-cache\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.ClearCacheWorkflow.execute();\n            case \"backfill-logs\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.BackfillLogsWorkflow.execute();\n            case \"seed-data\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.SeedDataWorkflow.execute(parameters?.source || \"constants\");\n            case \"export-data\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.ExportDataWorkflow.execute();\n            case \"import-data\":\n                return await _workflows_settings__WEBPACK_IMPORTED_MODULE_2__.ImportDataWorkflow.execute(parameters?.data);\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Unknown action\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"[Settings API] Error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NldHRpbmdzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSw0QkFBNEI7QUFDNEI7QUFDTjtBQVNwQjtBQUV2QixlQUFlUyxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJLENBQUUsTUFBTVQsK0RBQWdCQSxDQUFDUyxVQUFXO1FBQ3RDLE9BQU9WLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFlLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3BFO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBRyxNQUFNTCxRQUFRQyxJQUFJO1FBRWpELE9BQVFHO1lBQ04sS0FBSztnQkFDSCxPQUFPLE1BQU1YLGtFQUFpQkEsQ0FBQ2EsT0FBTztZQUV4QyxLQUFLO2dCQUNILE9BQU8sTUFBTWQsa0VBQWlCQSxDQUFDYyxPQUFPLENBQUNELFlBQVlFLFFBQVE7WUFFN0QsS0FBSztnQkFDSCxPQUFPLE1BQU1iLG1FQUFrQkEsQ0FBQ1ksT0FBTztZQUV6QyxLQUFLO2dCQUNILE9BQU8sTUFBTVgscUVBQW9CQSxDQUFDVyxPQUFPO1lBRTNDLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNUixpRUFBZ0JBLENBQUNRLE9BQU8sQ0FBQ0QsWUFBWUcsVUFBVTtZQUU5RCxLQUFLO2dCQUNILE9BQU8sTUFBTVosbUVBQWtCQSxDQUFDVSxPQUFPO1lBRXpDLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNVCxtRUFBa0JBLENBQUNTLE9BQU8sQ0FBQ0QsWUFBWUk7WUFFdEQ7Z0JBQ0UsT0FBT25CLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWlCLEdBQUc7b0JBQUVDLFFBQVE7Z0JBQUk7UUFDeEU7SUFDRixFQUFFLE9BQU9ELE9BQU87UUFDZFEsUUFBUVIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT1oscURBQVlBLENBQUNXLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF3QixHQUNqQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RoZWdhbWUtYWRtaW4vLi9hcHAvYXBpL3NldHRpbmdzL3JvdXRlLnRzPzkyYzgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9zZXR0aW5ncy9yb3V0ZS50c1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyByZXF1aXJlQWRtaW5BdXRoIH0gZnJvbSAnQC9saWIvYXBpLWF1dGgnO1xyXG5pbXBvcnQgeyBcclxuICBSZXNldERhdGFXb3JrZmxvdyxcclxuICBDbGVhckxvZ3NXb3JrZmxvdyxcclxuICBDbGVhckNhY2hlV29ya2Zsb3csXHJcbiAgQmFja2ZpbGxMb2dzV29ya2Zsb3csXHJcbiAgRXhwb3J0RGF0YVdvcmtmbG93LFxyXG4gIEltcG9ydERhdGFXb3JrZmxvdyxcclxuICBTZWVkRGF0YVdvcmtmbG93XHJcbn0gZnJvbSAnQC93b3JrZmxvd3Mvc2V0dGluZ3MnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBpZiAoIShhd2FpdCByZXF1aXJlQWRtaW5BdXRoKHJlcXVlc3QpKSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBhY3Rpb24sIHBhcmFtZXRlcnMgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgXHJcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xyXG4gICAgICBjYXNlICdjbGVhci1sb2dzJzpcclxuICAgICAgICByZXR1cm4gYXdhaXQgQ2xlYXJMb2dzV29ya2Zsb3cuZXhlY3V0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlICdyZXNldC1kYXRhJzpcclxuICAgICAgICByZXR1cm4gYXdhaXQgUmVzZXREYXRhV29ya2Zsb3cuZXhlY3V0ZShwYXJhbWV0ZXJzPy5tb2RlIHx8ICdkZWZhdWx0cycpO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlICdjbGVhci1jYWNoZSc6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IENsZWFyQ2FjaGVXb3JrZmxvdy5leGVjdXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgJ2JhY2tmaWxsLWxvZ3MnOlxyXG4gICAgICAgIHJldHVybiBhd2FpdCBCYWNrZmlsbExvZ3NXb3JrZmxvdy5leGVjdXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgJ3NlZWQtZGF0YSc6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IFNlZWREYXRhV29ya2Zsb3cuZXhlY3V0ZShwYXJhbWV0ZXJzPy5zb3VyY2UgfHwgJ2NvbnN0YW50cycpO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlICdleHBvcnQtZGF0YSc6XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IEV4cG9ydERhdGFXb3JrZmxvdy5leGVjdXRlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgJ2ltcG9ydC1kYXRhJzpcclxuICAgICAgICByZXR1cm4gYXdhaXQgSW1wb3J0RGF0YVdvcmtmbG93LmV4ZWN1dGUocGFyYW1ldGVycz8uZGF0YSk7XHJcbiAgICAgICAgXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmtub3duIGFjdGlvbicgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignW1NldHRpbmdzIEFQSV0gRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJyZXF1aXJlQWRtaW5BdXRoIiwiUmVzZXREYXRhV29ya2Zsb3ciLCJDbGVhckxvZ3NXb3JrZmxvdyIsIkNsZWFyQ2FjaGVXb3JrZmxvdyIsIkJhY2tmaWxsTG9nc1dvcmtmbG93IiwiRXhwb3J0RGF0YVdvcmtmbG93IiwiSW1wb3J0RGF0YVdvcmtmbG93IiwiU2VlZERhdGFXb3JrZmxvdyIsIlBPU1QiLCJyZXF1ZXN0IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYWN0aW9uIiwicGFyYW1ldGVycyIsImV4ZWN1dGUiLCJtb2RlIiwic291cmNlIiwiZGF0YSIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/settings/route.ts\n");

/***/ }),

/***/ "(rsc)/./data-store/keys.ts":
/*!****************************!*\
  !*** ./data-store/keys.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildDataKey: () => (/* binding */ buildDataKey),\n/* harmony export */   buildEffectKey: () => (/* binding */ buildEffectKey),\n/* harmony export */   buildIndexKey: () => (/* binding */ buildIndexKey),\n/* harmony export */   buildLinkKey: () => (/* binding */ buildLinkKey),\n/* harmony export */   buildLinksIndexKey: () => (/* binding */ buildLinksIndexKey),\n/* harmony export */   buildLogKey: () => (/* binding */ buildLogKey)\n/* harmony export */ });\n// data-store/keys.ts\n// Centralized KV key builders. Keep shapes consistent across repositories.\n// Production-only system - no environment namespacing needed\nfunction buildDataKey(entity, id) {\n    return `data:${entity}:${id}`;\n}\nfunction buildIndexKey(entity) {\n    return `index:${entity}`; // set of ids\n}\nfunction buildLinksIndexKey(entityType, id) {\n    return `index:links:by-entity:${entityType}:${id}`; // set of link ids\n}\nfunction buildLinkKey(id) {\n    return `links:link:${id}`;\n}\nfunction buildEffectKey(effectKey) {\n    return `effects:${effectKey}`;\n}\nfunction buildLogKey(entity, yyyymm) {\n    return yyyymm ? `logs:${entity}:${yyyymm}` : `logs:${entity}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9kYXRhLXN0b3JlL2tleXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEscUJBQXFCO0FBQ3JCLDJFQUEyRTtBQUMzRSw2REFBNkQ7QUFFdEQsU0FBU0EsYUFBYUMsTUFBYyxFQUFFQyxFQUFVO0lBQ3JELE9BQU8sQ0FBQyxLQUFLLEVBQUVELE9BQU8sQ0FBQyxFQUFFQyxHQUFHLENBQUM7QUFDL0I7QUFFTyxTQUFTQyxjQUFjRixNQUFjO0lBQzFDLE9BQU8sQ0FBQyxNQUFNLEVBQUVBLE9BQU8sQ0FBQyxFQUFFLGFBQWE7QUFDekM7QUFFTyxTQUFTRyxtQkFBbUJDLFVBQWtCLEVBQUVILEVBQVU7SUFDL0QsT0FBTyxDQUFDLHNCQUFzQixFQUFFRyxXQUFXLENBQUMsRUFBRUgsR0FBRyxDQUFDLEVBQUUsa0JBQWtCO0FBQ3hFO0FBRU8sU0FBU0ksYUFBYUosRUFBVTtJQUNyQyxPQUFPLENBQUMsV0FBVyxFQUFFQSxHQUFHLENBQUM7QUFDM0I7QUFFTyxTQUFTSyxlQUFlQyxTQUFpQjtJQUM5QyxPQUFPLENBQUMsUUFBUSxFQUFFQSxVQUFVLENBQUM7QUFDL0I7QUFFTyxTQUFTQyxZQUFZUixNQUFjLEVBQUVTLE1BQWU7SUFDekQsT0FBT0EsU0FDSCxDQUFDLEtBQUssRUFBRVQsT0FBTyxDQUFDLEVBQUVTLE9BQU8sQ0FBQyxHQUMxQixDQUFDLEtBQUssRUFBRVQsT0FBTyxDQUFDO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8uL2RhdGEtc3RvcmUva2V5cy50cz83MGUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGRhdGEtc3RvcmUva2V5cy50c1xyXG4vLyBDZW50cmFsaXplZCBLViBrZXkgYnVpbGRlcnMuIEtlZXAgc2hhcGVzIGNvbnNpc3RlbnQgYWNyb3NzIHJlcG9zaXRvcmllcy5cclxuLy8gUHJvZHVjdGlvbi1vbmx5IHN5c3RlbSAtIG5vIGVudmlyb25tZW50IG5hbWVzcGFjaW5nIG5lZWRlZFxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGF0YUtleShlbnRpdHk6IHN0cmluZywgaWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGBkYXRhOiR7ZW50aXR5fToke2lkfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEluZGV4S2V5KGVudGl0eTogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gYGluZGV4OiR7ZW50aXR5fWA7IC8vIHNldCBvZiBpZHNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTGlua3NJbmRleEtleShlbnRpdHlUeXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgaW5kZXg6bGlua3M6YnktZW50aXR5OiR7ZW50aXR5VHlwZX06JHtpZH1gOyAvLyBzZXQgb2YgbGluayBpZHNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTGlua0tleShpZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gYGxpbmtzOmxpbms6JHtpZH1gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRFZmZlY3RLZXkoZWZmZWN0S2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgZWZmZWN0czoke2VmZmVjdEtleX1gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRMb2dLZXkoZW50aXR5OiBzdHJpbmcsIHl5eXltbT86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIHl5eXltbVxyXG4gICAgPyBgbG9nczoke2VudGl0eX06JHt5eXl5bW19YFxyXG4gICAgOiBgbG9nczoke2VudGl0eX1gO1xyXG59XHJcblxyXG5cclxuIl0sIm5hbWVzIjpbImJ1aWxkRGF0YUtleSIsImVudGl0eSIsImlkIiwiYnVpbGRJbmRleEtleSIsImJ1aWxkTGlua3NJbmRleEtleSIsImVudGl0eVR5cGUiLCJidWlsZExpbmtLZXkiLCJidWlsZEVmZmVjdEtleSIsImVmZmVjdEtleSIsImJ1aWxkTG9nS2V5IiwieXl5eW1tIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./data-store/keys.ts\n");

/***/ }),

/***/ "(rsc)/./lib/api-auth.ts":
/*!*************************!*\
  !*** ./lib/api-auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requireAdminAuth: () => (/* binding */ requireAdminAuth)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ \"(rsc)/./lib/auth.ts\");\n// lib/api-auth.ts\n// API Authentication Utility for protecting API routes\n// Ensures only authenticated admin users can access API endpoints\n\n/**\r\n * Require admin authentication for API routes\r\n * Returns true if user is authenticated, false otherwise\r\n */ async function requireAdminAuth(req) {\n    try {\n        // Get the admin session token from cookies\n        const token = req.cookies.get(\"admin_session\")?.value;\n        // Get the JWT secret from environment variables\n        const secret = process.env.ADMIN_SESSION_SECRET || \"\";\n        // If no token or secret, user is not authenticated\n        if (!token || !secret) {\n            console.log(\"[API Auth] No token or secret found\");\n            return false;\n        }\n        // Verify the JWT token\n        const verified = await (0,_auth__WEBPACK_IMPORTED_MODULE_0__.verifyJwt)(token, secret);\n        if (verified.valid) {\n            // console.log('[API Auth] User authenticated successfully'); // Disabled to reduce log spam\n            return true;\n        } else {\n            console.log(\"[API Auth] Invalid token:\", verified.reason);\n            return false;\n        }\n    } catch (error) {\n        console.error(\"[API Auth] Error verifying authentication:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXBpLWF1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxrQkFBa0I7QUFDbEIsdURBQXVEO0FBQ3ZELGtFQUFrRTtBQUcvQjtBQUVuQzs7O0NBR0MsR0FDTSxlQUFlQyxpQkFBaUJDLEdBQWdCO0lBQ3JELElBQUk7UUFDRiwyQ0FBMkM7UUFDM0MsTUFBTUMsUUFBUUQsSUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0JBQWtCQztRQUVoRCxnREFBZ0Q7UUFDaEQsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxvQkFBb0IsSUFBSTtRQUVuRCxtREFBbUQ7UUFDbkQsSUFBSSxDQUFDUCxTQUFTLENBQUNJLFFBQVE7WUFDckJJLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE9BQU87UUFDVDtRQUVBLHVCQUF1QjtRQUN2QixNQUFNQyxXQUFXLE1BQU1iLGdEQUFTQSxDQUFDRyxPQUFPSTtRQUV4QyxJQUFJTSxTQUFTQyxLQUFLLEVBQUU7WUFDbEIsNEZBQTRGO1lBQzVGLE9BQU87UUFDVCxPQUFPO1lBQ0xILFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkJDLFNBQVNFLE1BQU07WUFDeEQsT0FBTztRQUNUO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RMLFFBQVFLLEtBQUssQ0FBQyw4Q0FBOENBO1FBQzVELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8uL2xpYi9hcGktYXV0aC50cz9iMzBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9hcGktYXV0aC50c1xyXG4vLyBBUEkgQXV0aGVudGljYXRpb24gVXRpbGl0eSBmb3IgcHJvdGVjdGluZyBBUEkgcm91dGVzXHJcbi8vIEVuc3VyZXMgb25seSBhdXRoZW50aWNhdGVkIGFkbWluIHVzZXJzIGNhbiBhY2Nlc3MgQVBJIGVuZHBvaW50c1xyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHZlcmlmeUp3dCB9IGZyb20gJy4vYXV0aCc7XHJcblxyXG4vKipcclxuICogUmVxdWlyZSBhZG1pbiBhdXRoZW50aWNhdGlvbiBmb3IgQVBJIHJvdXRlc1xyXG4gKiBSZXR1cm5zIHRydWUgaWYgdXNlciBpcyBhdXRoZW50aWNhdGVkLCBmYWxzZSBvdGhlcndpc2VcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQWRtaW5BdXRoKHJlcTogTmV4dFJlcXVlc3QpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgLy8gR2V0IHRoZSBhZG1pbiBzZXNzaW9uIHRva2VuIGZyb20gY29va2llc1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5nZXQoJ2FkbWluX3Nlc3Npb24nKT8udmFsdWU7XHJcbiAgICBcclxuICAgIC8vIEdldCB0aGUgSldUIHNlY3JldCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG4gICAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuQURNSU5fU0VTU0lPTl9TRUNSRVQgfHwgJyc7XHJcbiAgICBcclxuICAgIC8vIElmIG5vIHRva2VuIG9yIHNlY3JldCwgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxyXG4gICAgaWYgKCF0b2tlbiB8fCAhc2VjcmV0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQVBJIEF1dGhdIE5vIHRva2VuIG9yIHNlY3JldCBmb3VuZCcpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFZlcmlmeSB0aGUgSldUIHRva2VuXHJcbiAgICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IHZlcmlmeUp3dCh0b2tlbiwgc2VjcmV0KTtcclxuICAgIFxyXG4gICAgaWYgKHZlcmlmaWVkLnZhbGlkKSB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdbQVBJIEF1dGhdIFVzZXIgYXV0aGVudGljYXRlZCBzdWNjZXNzZnVsbHknKTsgLy8gRGlzYWJsZWQgdG8gcmVkdWNlIGxvZyBzcGFtXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ1tBUEkgQXV0aF0gSW52YWxpZCB0b2tlbjonLCB2ZXJpZmllZC5yZWFzb24pO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEkgQXV0aF0gRXJyb3IgdmVyaWZ5aW5nIGF1dGhlbnRpY2F0aW9uOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsidmVyaWZ5Snd0IiwicmVxdWlyZUFkbWluQXV0aCIsInJlcSIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkFETUlOX1NFU1NJT05fU0VDUkVUIiwiY29uc29sZSIsImxvZyIsInZlcmlmaWVkIiwidmFsaWQiLCJyZWFzb24iLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/api-auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateJwt: () => (/* binding */ generateJwt),\n/* harmony export */   getRequiredEnv: () => (/* binding */ getRequiredEnv),\n/* harmony export */   verifyJwt: () => (/* binding */ verifyJwt)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n// lib/auth.ts\n// JWT (HS256) utilities for Node runtime (route handlers)\n\nfunction toUint8Array(input) {\n    return new TextEncoder().encode(input);\n}\nasync function generateJwt(claims, secret, expiresInSeconds) {\n    const key = toUint8Array(secret);\n    const nowSeconds = Math.floor(Date.now() / 1000);\n    return await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT({\n        ...claims\n    }).setProtectedHeader({\n        alg: \"HS256\"\n    }).setIssuedAt(nowSeconds).setExpirationTime(nowSeconds + expiresInSeconds).sign(key);\n}\nasync function verifyJwt(token, secret) {\n    try {\n        const key = toUint8Array(secret);\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, key);\n        return {\n            valid: true,\n            payload: payload\n        };\n    } catch (_e) {\n        return {\n            valid: false,\n            reason: \"error\"\n        };\n    }\n}\nfunction getRequiredEnv(name) {\n    const value = process.env[name];\n    if (!value || value.trim() === \"\") {\n        throw new Error(`${name} is not set. Add it to .env.local and Vercel project settings.`);\n    }\n    return value;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLGNBQWM7QUFDZCwwREFBMEQ7QUFDaEI7QUFVMUMsU0FBU0UsYUFBYUMsS0FBYTtJQUNqQyxPQUFPLElBQUlDLGNBQWNDLE1BQU0sQ0FBQ0Y7QUFDbEM7QUFFTyxlQUFlRyxZQUFZQyxNQUFzQyxFQUFFQyxNQUFjLEVBQUVDLGdCQUF3QjtJQUNoSCxNQUFNQyxNQUFNUixhQUFhTTtJQUN6QixNQUFNRyxhQUFhQyxLQUFLQyxLQUFLLENBQUNDLEtBQUtDLEdBQUcsS0FBSztJQUMzQyxPQUFPLE1BQU0sSUFBSWYseUNBQU9BLENBQUM7UUFBRSxHQUFHTyxNQUFNO0lBQUMsR0FDbENTLGtCQUFrQixDQUFDO1FBQUVDLEtBQUs7SUFBUSxHQUNsQ0MsV0FBVyxDQUFDUCxZQUNaUSxpQkFBaUIsQ0FBQ1IsYUFBYUYsa0JBQy9CVyxJQUFJLENBQUNWO0FBQ1Y7QUFFTyxlQUFlVyxVQUFVQyxLQUFhLEVBQUVkLE1BQWM7SUFDM0QsSUFBSTtRQUNGLE1BQU1FLE1BQU1SLGFBQWFNO1FBQ3pCLE1BQU0sRUFBRWUsT0FBTyxFQUFFLEdBQUcsTUFBTXRCLCtDQUFTQSxDQUFDcUIsT0FBT1o7UUFDM0MsT0FBTztZQUFFYyxPQUFPO1lBQU1ELFNBQVNBO1FBQWdDO0lBQ2pFLEVBQUUsT0FBT0UsSUFBSTtRQUNYLE9BQU87WUFBRUQsT0FBTztZQUFPRSxRQUFRO1FBQVE7SUFDekM7QUFDRjtBQUVPLFNBQVNDLGVBQWVDLElBQVk7SUFDekMsTUFBTUMsUUFBUUMsUUFBUUMsR0FBRyxDQUFDSCxLQUFLO0lBQy9CLElBQUksQ0FBQ0MsU0FBU0EsTUFBTUcsSUFBSSxPQUFPLElBQUk7UUFDakMsTUFBTSxJQUFJQyxNQUFNLENBQUMsRUFBRUwsS0FBSyw4REFBOEQsQ0FBQztJQUN6RjtJQUNBLE9BQU9DO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aGVnYW1lLWFkbWluLy4vbGliL2F1dGgudHM/YmY3ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvYXV0aC50c1xyXG4vLyBKV1QgKEhTMjU2KSB1dGlsaXRpZXMgZm9yIE5vZGUgcnVudGltZSAocm91dGUgaGFuZGxlcnMpXHJcbmltcG9ydCB7IFNpZ25KV1QsIGp3dFZlcmlmeSB9IGZyb20gJ2pvc2UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBKd3RDbGFpbXMge1xyXG4gIHN1Yjogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxuICBpYXQ6IG51bWJlcjsgLy8gaXNzdWVkIGF0IChzZWNvbmRzIHNpbmNlIGVwb2NoKVxyXG4gIGV4cDogbnVtYmVyOyAvLyBleHBpcnkgKHNlY29uZHMgc2luY2UgZXBvY2gpXHJcbiAgW2tleTogc3RyaW5nXTogdW5rbm93bjtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9VaW50OEFycmF5KGlucHV0OiBzdHJpbmcpOiBVaW50OEFycmF5IHtcclxuICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlucHV0KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlSnd0KGNsYWltczogT21pdDxKd3RDbGFpbXMsICdpYXQnIHwgJ2V4cCc+LCBzZWNyZXQ6IHN0cmluZywgZXhwaXJlc0luU2Vjb25kczogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBrZXkgPSB0b1VpbnQ4QXJyYXkoc2VjcmV0KTtcclxuICBjb25zdCBub3dTZWNvbmRzID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XHJcbiAgcmV0dXJuIGF3YWl0IG5ldyBTaWduSldUKHsgLi4uY2xhaW1zIH0pXHJcbiAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiAnSFMyNTYnIH0pXHJcbiAgICAuc2V0SXNzdWVkQXQobm93U2Vjb25kcylcclxuICAgIC5zZXRFeHBpcmF0aW9uVGltZShub3dTZWNvbmRzICsgZXhwaXJlc0luU2Vjb25kcylcclxuICAgIC5zaWduKGtleSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlKd3QodG9rZW46IHN0cmluZywgc2VjcmV0OiBzdHJpbmcpOiBQcm9taXNlPHsgdmFsaWQ6IGJvb2xlYW47IHBheWxvYWQ/OiBKd3RDbGFpbXM7IHJlYXNvbj86IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGtleSA9IHRvVWludDhBcnJheShzZWNyZXQpO1xyXG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIGtleSk7XHJcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgcGF5bG9hZDogcGF5bG9hZCBhcyB1bmtub3duIGFzIEp3dENsYWltcyB9O1xyXG4gIH0gY2F0Y2ggKF9lKSB7XHJcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIHJlYXNvbjogJ2Vycm9yJyB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlcXVpcmVkRW52KG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltuYW1lXTtcclxuICBpZiAoIXZhbHVlIHx8IHZhbHVlLnRyaW0oKSA9PT0gJycpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBpcyBub3Qgc2V0LiBBZGQgaXQgdG8gLmVudi5sb2NhbCBhbmQgVmVyY2VsIHByb2plY3Qgc2V0dGluZ3MuYCk7XHJcbiAgfVxyXG4gIHJldHVybiB2YWx1ZTtcclxufVxyXG4iXSwibmFtZXMiOlsiU2lnbkpXVCIsImp3dFZlcmlmeSIsInRvVWludDhBcnJheSIsImlucHV0IiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJnZW5lcmF0ZUp3dCIsImNsYWltcyIsInNlY3JldCIsImV4cGlyZXNJblNlY29uZHMiLCJrZXkiLCJub3dTZWNvbmRzIiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldElzc3VlZEF0Iiwic2V0RXhwaXJhdGlvblRpbWUiLCJzaWduIiwidmVyaWZ5Snd0IiwidG9rZW4iLCJwYXlsb2FkIiwidmFsaWQiLCJfZSIsInJlYXNvbiIsImdldFJlcXVpcmVkRW52IiwibmFtZSIsInZhbHVlIiwicHJvY2VzcyIsImVudiIsInRyaW0iLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/backfill-logs-workflow.ts":
/*!******************************************************!*\
  !*** ./workflows/settings/backfill-logs-workflow.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BackfillLogsWorkflow: () => (/* binding */ BackfillLogsWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/backfill-logs-workflow.ts\n// Backfill Logs Workflow for KV-only architecture\n\n\nclass BackfillLogsWorkflow {\n    /**\r\n   * Execute backfill logs operation\r\n   */ static async execute() {\n        try {\n            console.log(\"[BackfillLogsWorkflow] \\uD83D\\uDD04 Starting backfill logs operation...\");\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[BackfillLogsWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[BackfillLogsWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[BackfillLogsWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Backfill logs requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side backfill logs required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"backfill-logs\",\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Backfill logs for all entity types\n            await this.backfillEntityLogs(results, errors);\n            const success = errors.length === 0;\n            const message = success ? `Successfully backfilled logs - ${results.length} operations completed` : `Backfill logs completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[BackfillLogsWorkflow] ✅ Backfill logs operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"backfill-logs\",\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[BackfillLogsWorkflow] ❌ Backfill logs operation failed:\", error);\n            return {\n                success: false,\n                message: `Backfill logs operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"backfill-logs\",\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Backfill logs for all entity types\r\n   */ static async backfillEntityLogs(results, errors) {\n        try {\n            console.log(\"[BackfillLogsWorkflow] \\uD83D\\uDCDD Backfilling entity logs...\");\n            const entityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of entityTypes){\n                try {\n                    await this.backfillEntityTypeLogs(entityType, results, errors);\n                } catch (error) {\n                    const errorMsg = `Failed to backfill ${entityType} logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[BackfillLogsWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n        } catch (error) {\n            const errorMsg = `Failed to backfill entity logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[BackfillLogsWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Backfill logs for a specific entity type\r\n   */ static async backfillEntityTypeLogs(entityType, results, errors) {\n        try {\n            // Get all entity IDs from index\n            const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(entityType);\n            const entityIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(indexKey);\n            if (entityIds.length === 0) {\n                results.push(`No ${entityType} entities to backfill logs for`);\n                return;\n            }\n            // Clear existing logs for this entity type\n            const logKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildLogKey)(entityType);\n            await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(logKey);\n            // Create initial log entry\n            const initialLogEntry = {\n                timestamp: new Date().toISOString(),\n                level: \"info\",\n                message: `Backfilled logs for ${entityType}`,\n                entityType,\n                operation: \"backfill\",\n                details: {\n                    entityCount: entityIds.length,\n                    backfilledAt: new Date().toISOString()\n                }\n            };\n            await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.lpush(logKey, JSON.stringify(initialLogEntry));\n            // For each entity, create a log entry\n            let loggedEntities = 0;\n            for (const entityId of entityIds){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, entityId);\n                    const entityData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.get(dataKey);\n                    if (entityData) {\n                        const entity = JSON.parse(entityData);\n                        const logEntry = {\n                            timestamp: entity.createdAt || new Date().toISOString(),\n                            level: \"info\",\n                            message: `${entityType} created`,\n                            entityType,\n                            entityId,\n                            operation: \"created\",\n                            details: {\n                                name: entity.name || \"Unknown\",\n                                status: entity.status || \"unknown\"\n                            }\n                        };\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.lpush(logKey, JSON.stringify(logEntry));\n                        loggedEntities++;\n                    }\n                } catch (error) {\n                    console.warn(`[BackfillLogsWorkflow] ⚠️ Failed to backfill log for ${entityType} ${entityId}:`, error);\n                }\n            }\n            results.push(`Backfilled logs for ${loggedEntities} ${entityType} entities`);\n            console.log(`[BackfillLogsWorkflow] ✅ Backfilled logs for ${loggedEntities} ${entityType} entities`);\n        } catch (error) {\n            const errorMsg = `Failed to backfill ${entityType} logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[BackfillLogsWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvYmFja2ZpbGwtbG9ncy13b3JrZmxvdy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSwrQ0FBK0M7QUFDL0Msa0RBQWtEO0FBRWxCO0FBQzZDO0FBY3RFLE1BQU1JO0lBRVg7O0dBRUMsR0FDRCxhQUFhQyxVQUFtQztRQUM5QyxJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU1DLE9BQU9DLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNoRCxNQUFNQyxXQUFXLGdCQUFrQjtZQUNuQyxNQUFNQyxVQUFvQixFQUFFO1lBQzVCLE1BQU1DLFNBQW1CLEVBQUU7WUFFM0JULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHVDQUF1QyxFQUFFQyxPQUFPLG9CQUFvQixzQkFBc0IsQ0FBQztZQUN4R0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0NBQW9DLEVBQUVNLFdBQVcsV0FBVyxTQUFTLENBQUM7WUFFbkYsdURBQXVEO1lBQ3ZELElBQUksQ0FBQ0wsUUFBUUssVUFBVTtnQkFDckJQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGdIQUFnSCxDQUFDO2dCQUM5SCxPQUFPO29CQUNMUyxTQUFTO29CQUNUQyxTQUFTO29CQUNUQyxNQUFNO3dCQUNKSixTQUFTOzRCQUFDO3lCQUEyRDt3QkFDckVDLFFBQVEsRUFBRTt3QkFDVkksV0FBVzt3QkFDWEMsYUFBYTt3QkFDYkMseUJBQXlCO29CQUMzQjtnQkFDRjtZQUNGO1lBRUEscUNBQXFDO1lBQ3JDLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ1IsU0FBU0M7WUFFdkMsTUFBTUMsVUFBVUQsT0FBT1EsTUFBTSxLQUFLO1lBQ2xDLE1BQU1OLFVBQVVELFVBQ1osQ0FBQywrQkFBK0IsRUFBRUYsUUFBUVMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLEdBQ3ZFLENBQUMsNkJBQTZCLEVBQUVSLE9BQU9RLE1BQU0sQ0FBQyxVQUFVLEVBQUVULFFBQVFTLE1BQU0sQ0FBQyxxQkFB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InNvdXJjZXMiOlsid2VicGFjazovL3RoZWdhbWUtYWRtaW4vLi93b3JrZmxvd3Mvc2V0dGluZ3MvYmFja2ZpbGwtbG9ncy13b3JrZmxvdy50cz85Zjk0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHdvcmtmbG93cy9zZXR0aW5ncy9iYWNrZmlsbC1sb2dzLXdvcmtmbG93LnRzXHJcbi8vIEJhY2tmaWxsIExvZ3MgV29ya2Zsb3cgZm9yIEtWLW9ubHkgYXJjaGl0ZWN0dXJlXHJcblxyXG5pbXBvcnQgeyBrdiB9IGZyb20gJ0B2ZXJjZWwva3YnO1xyXG5pbXBvcnQgeyBidWlsZERhdGFLZXksIGJ1aWxkSW5kZXhLZXksIGJ1aWxkTG9nS2V5IH0gZnJvbSAnQC9kYXRhLXN0b3JlL2tleXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1Jlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgZGF0YT86IHtcclxuICAgIHJlc3VsdHM6IHN0cmluZ1tdO1xyXG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcclxuICAgIG9wZXJhdGlvbjogc3RyaW5nO1xyXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcclxuICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uPzogYm9vbGVhbjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmFja2ZpbGxMb2dzV29ya2Zsb3cge1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGUgYmFja2ZpbGwgbG9ncyBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZSgpOiBQcm9taXNlPFNldHRpbmdzUmVzdWx0PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0JhY2tmaWxsTG9nc1dvcmtmbG93XSDwn5SEIFN0YXJ0aW5nIGJhY2tmaWxsIGxvZ3Mgb3BlcmF0aW9uLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBpc0tWID0gQm9vbGVhbihwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9VUkwpO1xyXG4gICAgICBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xyXG4gICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW0JhY2tmaWxsTG9nc1dvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtCYWNrZmlsbExvZ3NXb3JrZmxvd10g8J+Wpe+4jyBDb250ZXh0OiAke2lzU2VydmVyID8gJ1NlcnZlcicgOiAnQ2xpZW50J31gKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZvciBsb2NhbCBlbnZpcm9ubWVudCwgd2UgbmVlZCB0byBydW4gb24gY2xpZW50IHNpZGVcclxuICAgICAgaWYgKCFpc0tWICYmIGlzU2VydmVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtCYWNrZmlsbExvZ3NXb3JrZmxvd10g4pqg77iPIExvY2FsIGVudmlyb25tZW50IGRldGVjdGVkIG9uIHNlcnZlciAtIHJldHVybmluZyBpbnN0cnVjdGlvbiBmb3IgY2xpZW50LXNpZGUgZXhlY3V0aW9uYCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnQmFja2ZpbGwgbG9ncyByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgYmFja2ZpbGwgbG9ncyByZXF1aXJlZCBmb3IgbG9jYWwgZW52aXJvbm1lbnQnXSxcclxuICAgICAgICAgICAgZXJyb3JzOiBbXSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnYmFja2ZpbGwtbG9ncycsXHJcbiAgICAgICAgICAgIGVudmlyb25tZW50OiAnbG9jYWwnLFxyXG4gICAgICAgICAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbjogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEJhY2tmaWxsIGxvZ3MgZm9yIGFsbCBlbnRpdHkgdHlwZXNcclxuICAgICAgYXdhaXQgdGhpcy5iYWNrZmlsbEVudGl0eUxvZ3MocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBlcnJvcnMubGVuZ3RoID09PSAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gc3VjY2VzcyBcclxuICAgICAgICA/IGBTdWNjZXNzZnVsbHkgYmFja2ZpbGxlZCBsb2dzIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgXHJcbiAgICAgICAgOiBgQmFja2ZpbGwgbG9ncyBjb21wbGV0ZWQgd2l0aCAke2Vycm9ycy5sZW5ndGh9IGVycm9ycyAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbQmFja2ZpbGxMb2dzV29ya2Zsb3ddIOKchSBCYWNrZmlsbCBsb2dzIG9wZXJhdGlvbiBjb21wbGV0ZWQ6ICR7bWVzc2FnZX1gKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzcyxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlc3VsdHMsXHJcbiAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICBvcGVyYXRpb246ICdiYWNrZmlsbC1sb2dzJyxcclxuICAgICAgICAgIGVudmlyb25tZW50OiBpc0tWID8gJ2t2JyA6ICdsb2NhbCdcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0JhY2tmaWxsTG9nc1dvcmtmbG93XSDinYwgQmFja2ZpbGwgbG9ncyBvcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBgQmFja2ZpbGwgbG9ncyBvcGVyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0czogW10sXHJcbiAgICAgICAgICBlcnJvcnM6IFtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ10sXHJcbiAgICAgICAgICBvcGVyYXRpb246ICdiYWNrZmlsbC1sb2dzJyxcclxuICAgICAgICAgIGVudmlyb25tZW50OiAndW5rbm93bidcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEJhY2tmaWxsIGxvZ3MgZm9yIGFsbCBlbnRpdHkgdHlwZXNcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBiYWNrZmlsbEVudGl0eUxvZ3MocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQmFja2ZpbGxMb2dzV29ya2Zsb3ddIPCfk50gQmFja2ZpbGxpbmcgZW50aXR5IGxvZ3MuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVudGl0eVR5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcyddO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBlbnRpdHlUeXBlIG9mIGVudGl0eVR5cGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuYmFja2ZpbGxFbnRpdHlUeXBlTG9ncyhlbnRpdHlUeXBlLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gYmFja2ZpbGwgJHtlbnRpdHlUeXBlfSBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbQmFja2ZpbGxMb2dzV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGJhY2tmaWxsIGVudGl0eSBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW0JhY2tmaWxsTG9nc1dvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogQmFja2ZpbGwgbG9ncyBmb3IgYSBzcGVjaWZpYyBlbnRpdHkgdHlwZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGJhY2tmaWxsRW50aXR5VHlwZUxvZ3MoZW50aXR5VHlwZTogc3RyaW5nLCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IGFsbCBlbnRpdHkgSURzIGZyb20gaW5kZXhcclxuICAgICAgY29uc3QgaW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KGVudGl0eVR5cGUpO1xyXG4gICAgICBjb25zdCBlbnRpdHlJZHMgPSBhd2FpdCBrdi5zbWVtYmVycyhpbmRleEtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZW50aXR5SWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChgTm8gJHtlbnRpdHlUeXBlfSBlbnRpdGllcyB0byBiYWNrZmlsbCBsb2dzIGZvcmApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgbG9ncyBmb3IgdGhpcyBlbnRpdHkgdHlwZVxyXG4gICAgICBjb25zdCBsb2dLZXkgPSBidWlsZExvZ0tleShlbnRpdHlUeXBlKTtcclxuICAgICAgYXdhaXQga3YuZGVsKGxvZ0tleSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDcmVhdGUgaW5pdGlhbCBsb2cgZW50cnlcclxuICAgICAgY29uc3QgaW5pdGlhbExvZ0VudHJ5ID0ge1xyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGxldmVsOiAnaW5mbycsXHJcbiAgICAgICAgbWVzc2FnZTogYEJhY2tmaWxsZWQgbG9ncyBmb3IgJHtlbnRpdHlUeXBlfWAsXHJcbiAgICAgICAgZW50aXR5VHlwZSxcclxuICAgICAgICBvcGVyYXRpb246ICdiYWNrZmlsbCcsXHJcbiAgICAgICAgZGV0YWlsczoge1xyXG4gICAgICAgICAgZW50aXR5Q291bnQ6IGVudGl0eUlkcy5sZW5ndGgsXHJcbiAgICAgICAgICBiYWNrZmlsbGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IGt2LmxwdXNoKGxvZ0tleSwgSlNPTi5zdHJpbmdpZnkoaW5pdGlhbExvZ0VudHJ5KSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGb3IgZWFjaCBlbnRpdHksIGNyZWF0ZSBhIGxvZyBlbnRyeVxyXG4gICAgICBsZXQgbG9nZ2VkRW50aXRpZXMgPSAwO1xyXG4gICAgICBmb3IgKGNvbnN0IGVudGl0eUlkIG9mIGVudGl0eUlkcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhS2V5ID0gYnVpbGREYXRhS2V5KGVudGl0eVR5cGUsIGVudGl0eUlkKTtcclxuICAgICAgICAgIGNvbnN0IGVudGl0eURhdGEgPSBhd2FpdCBrdi5nZXQoZGF0YUtleSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlbnRpdHlEYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IEpTT04ucGFyc2UoZW50aXR5RGF0YSBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgICBjb25zdCBsb2dFbnRyeSA9IHtcclxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IGVudGl0eS5jcmVhdGVkQXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgIGxldmVsOiAnaW5mbycsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZTogYCR7ZW50aXR5VHlwZX0gY3JlYXRlZGAsXHJcbiAgICAgICAgICAgICAgZW50aXR5VHlwZSxcclxuICAgICAgICAgICAgICBlbnRpdHlJZCxcclxuICAgICAgICAgICAgICBvcGVyYXRpb246ICdjcmVhdGVkJyxcclxuICAgICAgICAgICAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBlbnRpdHkubmFtZSB8fCAnVW5rbm93bicsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGVudGl0eS5zdGF0dXMgfHwgJ3Vua25vd24nXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXdhaXQga3YubHB1c2gobG9nS2V5LCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkpO1xyXG4gICAgICAgICAgICBsb2dnZWRFbnRpdGllcysrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFtCYWNrZmlsbExvZ3NXb3JrZmxvd10g4pqg77iPIEZhaWxlZCB0byBiYWNrZmlsbCBsb2cgZm9yICR7ZW50aXR5VHlwZX0gJHtlbnRpdHlJZH06YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBCYWNrZmlsbGVkIGxvZ3MgZm9yICR7bG9nZ2VkRW50aXRpZXN9ICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgY29uc29sZS5sb2coYFtCYWNrZmlsbExvZ3NXb3JrZmxvd10g4pyFIEJhY2tmaWxsZWQgbG9ncyBmb3IgJHtsb2dnZWRFbnRpdGllc30gJHtlbnRpdHlUeXBlfSBlbnRpdGllc2ApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBiYWNrZmlsbCAke2VudGl0eVR5cGV9IGxvZ3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbQmFja2ZpbGxMb2dzV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsia3YiLCJidWlsZERhdGFLZXkiLCJidWlsZEluZGV4S2V5IiwiYnVpbGRMb2dLZXkiLCJCYWNrZmlsbExvZ3NXb3JrZmxvdyIsImV4ZWN1dGUiLCJjb25zb2xlIiwibG9nIiwiaXNLViIsIkJvb2xlYW4iLCJwcm9jZXNzIiwiZW52IiwiS1ZfUkVTVF9BUElfVVJMIiwiaXNTZXJ2ZXIiLCJyZXN1bHRzIiwiZXJyb3JzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkYXRhIiwib3BlcmF0aW9uIiwiZW52aXJvbm1lbnQiLCJyZXF1aXJlc0NsaWVudEV4ZWN1dGlvbiIsImJhY2tmaWxsRW50aXR5TG9ncyIsImxlbmd0aCIsImVycm9yIiwiRXJyb3IiLCJlbnRpdHlUeXBlcyIsImVudGl0eVR5cGUiLCJiYWNrZmlsbEVudGl0eVR5cGVMb2dzIiwiZXJyb3JNc2ciLCJwdXNoIiwiaW5kZXhLZXkiLCJlbnRpdHlJZHMiLCJzbWVtYmVycyIsImxvZ0tleSIsImRlbCIsImluaXRpYWxMb2dFbnRyeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxldmVsIiwiZGV0YWlscyIsImVudGl0eUNvdW50IiwiYmFja2ZpbGxlZEF0IiwibHB1c2giLCJKU09OIiwic3RyaW5naWZ5IiwibG9nZ2VkRW50aXRpZXMiLCJlbnRpdHlJZCIsImRhdGFLZXkiLCJlbnRpdHlEYXRhIiwiZ2V0IiwiZW50aXR5IiwicGFyc2UiLCJsb2dFbnRyeSIsImNyZWF0ZWRBdCIsIm5hbWUiLCJzdGF0dXMiLCJ3YXJuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/backfill-logs-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/clear-cache-workflow.ts":
/*!****************************************************!*\
  !*** ./workflows/settings/clear-cache-workflow.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClearCacheWorkflow: () => (/* binding */ ClearCacheWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n// workflows/settings/clear-cache-workflow.ts\n// Clear Cache Workflow for KV-only architecture\n\nclass ClearCacheWorkflow {\n    /**\r\n   * Execute clear cache operation\r\n   */ static async execute() {\n        try {\n            console.log(\"[ClearCacheWorkflow] \\uD83D\\uDDD1️ Starting clear cache operation...\");\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[ClearCacheWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[ClearCacheWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[ClearCacheWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Clear cache requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side clear cache required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"clear-cache\",\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Clear cache patterns\n            await this.clearCachePatterns(results, errors);\n            const success = errors.length === 0;\n            const message = success ? `Successfully cleared cache - ${results.length} operations completed` : `Clear cache completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[ClearCacheWorkflow] ✅ Clear cache operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"clear-cache\",\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[ClearCacheWorkflow] ❌ Clear cache operation failed:\", error);\n            return {\n                success: false,\n                message: `Clear cache operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"clear-cache\",\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Clear cache patterns from KV\r\n   */ static async clearCachePatterns(results, errors) {\n        try {\n            console.log(\"[ClearCacheWorkflow] \\uD83D\\uDDD1️ Clearing cache patterns...\");\n            // Clear effects registry cache\n            try {\n                const effectsPattern = \"effects:*\";\n                const effectKeys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(effectsPattern);\n                if (effectKeys.length > 0) {\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.del(...effectKeys);\n                    results.push(`Cleared ${effectKeys.length} effect registry entries`);\n                    console.log(`[ClearCacheWorkflow] ✅ Cleared ${effectKeys.length} effect registry entries`);\n                } else {\n                    results.push(\"No effect registry entries to clear\");\n                }\n            } catch (error) {\n                const errorMsg = `Failed to clear effect registry: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                errors.push(errorMsg);\n                console.error(`[ClearCacheWorkflow] ❌ ${errorMsg}`);\n            }\n            // Clear any temporary cache keys\n            try {\n                const tempPattern = \"temp:*\";\n                const tempKeys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(tempPattern);\n                if (tempKeys.length > 0) {\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.del(...tempKeys);\n                    results.push(`Cleared ${tempKeys.length} temporary cache entries`);\n                    console.log(`[ClearCacheWorkflow] ✅ Cleared ${tempKeys.length} temporary cache entries`);\n                } else {\n                    results.push(\"No temporary cache entries to clear\");\n                }\n            } catch (error) {\n                const errorMsg = `Failed to clear temporary cache: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                errors.push(errorMsg);\n                console.error(`[ClearCacheWorkflow] ❌ ${errorMsg}`);\n            }\n            // Clear session cache if any\n            try {\n                const sessionPattern = \"session:*\";\n                const sessionKeys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.keys(sessionPattern);\n                if (sessionKeys.length > 0) {\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.del(...sessionKeys);\n                    results.push(`Cleared ${sessionKeys.length} session cache entries`);\n                    console.log(`[ClearCacheWorkflow] ✅ Cleared ${sessionKeys.length} session cache entries`);\n                } else {\n                    results.push(\"No session cache entries to clear\");\n                }\n            } catch (error) {\n                const errorMsg = `Failed to clear session cache: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                errors.push(errorMsg);\n                console.error(`[ClearCacheWorkflow] ❌ ${errorMsg}`);\n            }\n        } catch (error) {\n            const errorMsg = `Failed to clear cache patterns: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ClearCacheWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvY2xlYXItY2FjaGUtd29ya2Zsb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw2Q0FBNkM7QUFDN0MsZ0RBQWdEO0FBRWhCO0FBY3pCLE1BQU1DO0lBRVg7O0dBRUMsR0FDRCxhQUFhQyxVQUFtQztRQUM5QyxJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU1DLE9BQU9DLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNoRCxNQUFNQyxXQUFXLGdCQUFrQjtZQUNuQyxNQUFNQyxVQUFvQixFQUFFO1lBQzVCLE1BQU1DLFNBQW1CLEVBQUU7WUFFM0JULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFQyxPQUFPLG9CQUFvQixzQkFBc0IsQ0FBQztZQUN0R0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0NBQWtDLEVBQUVNLFdBQVcsV0FBVyxTQUFTLENBQUM7WUFFakYsdURBQXVEO1lBQ3ZELElBQUksQ0FBQ0wsUUFBUUssVUFBVTtnQkFDckJQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDhHQUE4RyxDQUFDO2dCQUM1SCxPQUFPO29CQUNMUyxTQUFTO29CQUNUQyxTQUFTO29CQUNUQyxNQUFNO3dCQUNKSixTQUFTOzRCQUFDO3lCQUF5RDt3QkFDbkVDLFFBQVEsRUFBRTt3QkFDVkksV0FBVzt3QkFDWEMsYUFBYTt3QkFDYkMseUJBQXlCO29CQUMzQjtnQkFDRjtZQUNGO1lBRUEsdUJBQXVCO1lBQ3ZCLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ1IsU0FBU0M7WUFFdkMsTUFBTUMsVUFBVUQsT0FBT1EsTUFBTSxLQUFLO1lBQ2xDLE1BQU1OLFVBQVVELFVBQ1osQ0FBQyw2QkFBNkIsRUFBRUYsUUFBUVMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLEdBQ3JFLENBQUMsMkJBQTJCLEVBQUVSLE9BQU9RLE1BQU0sQ0FBQyxVQUFVLEVBQUVULFFBQVFTLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztZ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LHNCQUFzQixDQUFDO29CQUNsRWpCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLCtCQUErQixFQUFFNEIsWUFBWVosTUFBTSxDQUFDLHNCQUFzQixDQUFDO2dCQUMxRixPQUFPO29CQUNMVCxRQUFRZ0IsSUFBSSxDQUFDO2dCQUNmO1lBQ0YsRUFBRSxPQUFPTixPQUFPO2dCQUNkLE1BQU1PLFdBQVcsQ0FBQywrQkFBK0IsRUFBRVAsaUJBQWlCQyxRQUFRRCxNQUFNUCxPQUFPLEdBQUcsZ0JBQWdCLENBQUM7Z0JBQzdHRixPQUFPZSxJQUFJLENBQUNDO2dCQUNaekIsUUFBUWtCLEtBQUssQ0FBQyxDQUFDLHVCQUF1QixFQUFFTyxTQUFTLENBQUM7WUFDcEQ7UUFFRixFQUFFLE9BQU9QLE9BQU87WUFDZCxNQUFNTyxXQUFXLENBQUMsZ0NBQWdDLEVBQUVQLGlCQUFpQkMsUUFBUUQsTUFBTVAsT0FBTyxHQUFHLGdCQUFnQixDQUFDO1lBQzlHRixPQUFPZSxJQUFJLENBQUNDO1lBQ1p6QixRQUFRa0IsS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUVPLFNBQVMsQ0FBQztRQUNwRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aGVnYW1lLWFkbWluLy4vd29ya2Zsb3dzL3NldHRpbmdzL2NsZWFyLWNhY2hlLXdvcmtmbG93LnRzPzYxZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL2NsZWFyLWNhY2hlLXdvcmtmbG93LnRzXHJcbi8vIENsZWFyIENhY2hlIFdvcmtmbG93IGZvciBLVi1vbmx5IGFyY2hpdGVjdHVyZVxyXG5cclxuaW1wb3J0IHsga3YgfSBmcm9tICdAdmVyY2VsL2t2JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NSZXN1bHQge1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIGRhdGE/OiB7XHJcbiAgICByZXN1bHRzOiBzdHJpbmdbXTtcclxuICAgIGVycm9yczogc3RyaW5nW107XHJcbiAgICBvcGVyYXRpb246IHN0cmluZztcclxuICAgIGVudmlyb25tZW50OiBzdHJpbmc7XHJcbiAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbj86IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENsZWFyQ2FjaGVXb3JrZmxvdyB7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZSBjbGVhciBjYWNoZSBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZSgpOiBQcm9taXNlPFNldHRpbmdzUmVzdWx0PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NsZWFyQ2FjaGVXb3JrZmxvd10g8J+Xke+4jyBTdGFydGluZyBjbGVhciBjYWNoZSBvcGVyYXRpb24uLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGlzS1YgPSBCb29sZWFuKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCk7XHJcbiAgICAgIGNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbQ2xlYXJDYWNoZVdvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtDbGVhckNhY2hlV29ya2Zsb3ddIPCflqXvuI8gQ29udGV4dDogJHtpc1NlcnZlciA/ICdTZXJ2ZXInIDogJ0NsaWVudCd9YCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGb3IgbG9jYWwgZW52aXJvbm1lbnQsIHdlIG5lZWQgdG8gcnVuIG9uIGNsaWVudCBzaWRlXHJcbiAgICAgIGlmICghaXNLViAmJiBpc1NlcnZlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbQ2xlYXJDYWNoZVdvcmtmbG93XSDimqDvuI8gTG9jYWwgZW52aXJvbm1lbnQgZGV0ZWN0ZWQgb24gc2VydmVyIC0gcmV0dXJuaW5nIGluc3RydWN0aW9uIGZvciBjbGllbnQtc2lkZSBleGVjdXRpb25gKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdDbGVhciBjYWNoZSByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgY2xlYXIgY2FjaGUgcmVxdWlyZWQgZm9yIGxvY2FsIGVudmlyb25tZW50J10sXHJcbiAgICAgICAgICAgIGVycm9yczogW10sXHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogJ2NsZWFyLWNhY2hlJyxcclxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6ICdsb2NhbCcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgY2FjaGUgcGF0dGVybnNcclxuICAgICAgYXdhaXQgdGhpcy5jbGVhckNhY2hlUGF0dGVybnMocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBlcnJvcnMubGVuZ3RoID09PSAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gc3VjY2VzcyBcclxuICAgICAgICA/IGBTdWNjZXNzZnVsbHkgY2xlYXJlZCBjYWNoZSAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYFxyXG4gICAgICAgIDogYENsZWFyIGNhY2hlIGNvbXBsZXRlZCB3aXRoICR7ZXJyb3JzLmxlbmd0aH0gZXJyb3JzIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtDbGVhckNhY2hlV29ya2Zsb3ddIOKchSBDbGVhciBjYWNoZSBvcGVyYXRpb24gY29tcGxldGVkOiAke21lc3NhZ2V9YCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3MsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzLFxyXG4gICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgb3BlcmF0aW9uOiAnY2xlYXItY2FjaGUnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGlzS1YgPyAna3YnIDogJ2xvY2FsJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbQ2xlYXJDYWNoZVdvcmtmbG93XSDinYwgQ2xlYXIgY2FjaGUgb3BlcmF0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogYENsZWFyIGNhY2hlIG9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzOiBbXSxcclxuICAgICAgICAgIGVycm9yczogW2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXSxcclxuICAgICAgICAgIG9wZXJhdGlvbjogJ2NsZWFyLWNhY2hlJyxcclxuICAgICAgICAgIGVudmlyb25tZW50OiAndW5rbm93bidcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIENsZWFyIGNhY2hlIHBhdHRlcm5zIGZyb20gS1ZcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBjbGVhckNhY2hlUGF0dGVybnMocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2xlYXJDYWNoZVdvcmtmbG93XSDwn5eR77iPIENsZWFyaW5nIGNhY2hlIHBhdHRlcm5zLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciBlZmZlY3RzIHJlZ2lzdHJ5IGNhY2hlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZWZmZWN0c1BhdHRlcm4gPSAnZWZmZWN0czoqJztcclxuICAgICAgICBjb25zdCBlZmZlY3RLZXlzID0gYXdhaXQga3Yua2V5cyhlZmZlY3RzUGF0dGVybik7XHJcbiAgICAgICAgaWYgKGVmZmVjdEtleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgYXdhaXQga3YuZGVsKC4uLmVmZmVjdEtleXMpO1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkICR7ZWZmZWN0S2V5cy5sZW5ndGh9IGVmZmVjdCByZWdpc3RyeSBlbnRyaWVzYCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0NsZWFyQ2FjaGVXb3JrZmxvd10g4pyFIENsZWFyZWQgJHtlZmZlY3RLZXlzLmxlbmd0aH0gZWZmZWN0IHJlZ2lzdHJ5IGVudHJpZXNgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKCdObyBlZmZlY3QgcmVnaXN0cnkgZW50cmllcyB0byBjbGVhcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgZWZmZWN0IHJlZ2lzdHJ5OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtDbGVhckNhY2hlV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciBhbnkgdGVtcG9yYXJ5IGNhY2hlIGtleXNcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB0ZW1wUGF0dGVybiA9ICd0ZW1wOionO1xyXG4gICAgICAgIGNvbnN0IHRlbXBLZXlzID0gYXdhaXQga3Yua2V5cyh0ZW1wUGF0dGVybik7XHJcbiAgICAgICAgaWYgKHRlbXBLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGF3YWl0IGt2LmRlbCguLi50ZW1wS2V5cyk7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goYENsZWFyZWQgJHt0ZW1wS2V5cy5sZW5ndGh9IHRlbXBvcmFyeSBjYWNoZSBlbnRyaWVzYCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0NsZWFyQ2FjaGVXb3JrZmxvd10g4pyFIENsZWFyZWQgJHt0ZW1wS2V5cy5sZW5ndGh9IHRlbXBvcmFyeSBjYWNoZSBlbnRyaWVzYCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc3VsdHMucHVzaCgnTm8gdGVtcG9yYXJ5IGNhY2hlIGVudHJpZXMgdG8gY2xlYXInKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyIHRlbXBvcmFyeSBjYWNoZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBbQ2xlYXJDYWNoZVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgc2Vzc2lvbiBjYWNoZSBpZiBhbnlcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzZXNzaW9uUGF0dGVybiA9ICdzZXNzaW9uOionO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb25LZXlzID0gYXdhaXQga3Yua2V5cyhzZXNzaW9uUGF0dGVybik7XHJcbiAgICAgICAgaWYgKHNlc3Npb25LZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGF3YWl0IGt2LmRlbCguLi5zZXNzaW9uS2V5cyk7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goYENsZWFyZWQgJHtzZXNzaW9uS2V5cy5sZW5ndGh9IHNlc3Npb24gY2FjaGUgZW50cmllc2ApO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFtDbGVhckNhY2hlV29ya2Zsb3ddIOKchSBDbGVhcmVkICR7c2Vzc2lvbktleXMubGVuZ3RofSBzZXNzaW9uIGNhY2hlIGVudHJpZXNgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKCdObyBzZXNzaW9uIGNhY2hlIGVudHJpZXMgdG8gY2xlYXInKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyIHNlc3Npb24gY2FjaGU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0NsZWFyQ2FjaGVXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgY2FjaGUgcGF0dGVybnM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbQ2xlYXJDYWNoZVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImt2IiwiQ2xlYXJDYWNoZVdvcmtmbG93IiwiZXhlY3V0ZSIsImNvbnNvbGUiLCJsb2ciLCJpc0tWIiwiQm9vbGVhbiIsInByb2Nlc3MiLCJlbnYiLCJLVl9SRVNUX0FQSV9VUkwiLCJpc1NlcnZlciIsInJlc3VsdHMiLCJlcnJvcnMiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRhdGEiLCJvcGVyYXRpb24iLCJlbnZpcm9ubWVudCIsInJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uIiwiY2xlYXJDYWNoZVBhdHRlcm5zIiwibGVuZ3RoIiwiZXJyb3IiLCJFcnJvciIsImVmZmVjdHNQYXR0ZXJuIiwiZWZmZWN0S2V5cyIsImtleXMiLCJkZWwiLCJwdXNoIiwiZXJyb3JNc2ciLCJ0ZW1wUGF0dGVybiIsInRlbXBLZXlzIiwic2Vzc2lvblBhdHRlcm4iLCJzZXNzaW9uS2V5cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/clear-cache-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/clear-logs-workflow.ts":
/*!***************************************************!*\
  !*** ./workflows/settings/clear-logs-workflow.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClearLogsWorkflow: () => (/* binding */ ClearLogsWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/clear-logs-workflow.ts\n// Clear Logs Workflow for KV-only architecture\n\n\nclass ClearLogsWorkflow {\n    /**\r\n   * Execute clear logs operation\r\n   */ static async execute() {\n        try {\n            console.log(\"[ClearLogsWorkflow] \\uD83D\\uDDD1️ Starting clear logs operation...\");\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[ClearLogsWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[ClearLogsWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[ClearLogsWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Clear logs requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side clear logs required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"clear-logs\",\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Clear all entity logs\n            await this.clearEntityLogs(results, errors);\n            const success = errors.length === 0;\n            const message = success ? `Successfully cleared logs - ${results.length} operations completed` : `Clear logs completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[ClearLogsWorkflow] ✅ Clear logs operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"clear-logs\",\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[ClearLogsWorkflow] ❌ Clear logs operation failed:\", error);\n            return {\n                success: false,\n                message: `Clear logs operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"clear-logs\",\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Clear all entity logs from KV\r\n   */ static async clearEntityLogs(results, errors) {\n        try {\n            console.log(\"[ClearLogsWorkflow] \\uD83D\\uDCDD Clearing entity logs...\");\n            const logTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\",\n                \"links\"\n            ];\n            for (const logType of logTypes){\n                try {\n                    const logKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildLogKey)(logType);\n                    const deleted = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(logKey);\n                    if (deleted > 0) {\n                        results.push(`Cleared ${logType} logs`);\n                        console.log(`[ClearLogsWorkflow] ✅ Cleared ${logType} logs`);\n                    } else {\n                        results.push(`No ${logType} logs to clear`);\n                    }\n                } catch (error) {\n                    const errorMsg = `Failed to clear ${logType} logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ClearLogsWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n        } catch (error) {\n            const errorMsg = `Failed to clear entity logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ClearLogsWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvY2xlYXItbG9ncy13b3JrZmxvdy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw0Q0FBNEM7QUFDNUMsK0NBQStDO0FBRWY7QUFDZ0I7QUFjekMsTUFBTUU7SUFFWDs7R0FFQyxHQUNELGFBQWFDLFVBQW1DO1FBQzlDLElBQUk7WUFDRkMsUUFBUUMsR0FBRyxDQUFDO1lBRVosTUFBTUMsT0FBT0MsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO1lBQ2hELE1BQU1DLFdBQVcsZ0JBQWtCO1lBQ25DLE1BQU1DLFVBQW9CLEVBQUU7WUFDNUIsTUFBTUMsU0FBbUIsRUFBRTtZQUUzQlQsUUFBUUMsR0FBRyxDQUFDLENBQUMsb0NBQW9DLEVBQUVDLE9BQU8sb0JBQW9CLHNCQUFzQixDQUFDO1lBQ3JHRixRQUFRQyxHQUFHLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRU0sV0FBVyxXQUFXLFNBQVMsQ0FBQztZQUVoRix1REFBdUQ7WUFDdkQsSUFBSSxDQUFDTCxRQUFRSyxVQUFVO2dCQUNyQlAsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkdBQTZHLENBQUM7Z0JBQzNILE9BQU87b0JBQ0xTLFNBQVM7b0JBQ1RDLFNBQVM7b0JBQ1RDLE1BQU07d0JBQ0pKLFNBQVM7NEJBQUM7eUJBQXdEO3dCQUNsRUMsUUFBUSxFQUFFO3dCQUNWSSxXQUFXO3dCQUNYQyxhQUFhO3dCQUNiQyx5QkFBeUI7b0JBQzNCO2dCQUNGO1lBQ0Y7WUFFQSx3QkFBd0I7WUFDeEIsTUFBTSxJQUFJLENBQUNDLGVBQWUsQ0FBQ1IsU0FBU0M7WUFFcEMsTUFBTUMsVUFBVUQsT0FBT1EsTUFBTSxLQUFLO1lBQ2xDLE1BQU1OLFVBQVVELFVBQ1osQ0FBQyw0QkFBNEIsRUFBRUYsUUFBUVMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLEdBQ3BFLENBQUMsMEJBQTBCLEVBQUVSLE9BQU9RLE1BQU0sQ0FBQyxVQUFVLEVBQUVULFFBQVFTLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztZQUVoR2pCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNEQUFzRCxFQUFFVSxRQUFRLENBQUM7WUFFOUUsT0FBTztnQkFDTEQ7Z0JBQ0FDO2dCQUNBQyxNQUFNO29CQUNKSjtvQkFDQUM7b0JBQ0FJLFdBQVc7b0JBQ1hDLGFBQWFaLE9BQU8sT0FBTztnQkFDN0I7WUFDRjtRQUVGLEVBQUUsT0FBT2dCLE9BQU87WUFDZGxCLFFBQVFrQixLQUFLLENBQUMsc0RBQXNEQTtZQUNwRSxPQUFPO2dCQUNMUixTQUFTO2dCQUNUQyxTQUFTLENBQUMsNkJBQTZCLEVBQUVPLGlCQUFpQkMsUUFBUUQsTUFBTVAsT0FBTyxHQUFHLGdCQUFnQixDQUFDO2dCQUNuR0MsTUFBTTtvQkFDSkosU0FBUyxFQUFFO29CQUNYQyxRQUFRO3dCQUFDUyxpQkFBaUJDLFFBQVFELE1BQU1QLE9BQU8sR0FBRztxQkFBZ0I7b0JBQ2xFRSxXQUFXO29CQUNYQyxhQUFhO2dCQUNmO1lBQ0Y7UUFDRjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxhQUFxQkUsZ0JBQWdCUixPQUFpQixFQUFFQyxNQUFnQixFQUFpQjtRQUN2RixJQUFJO1lBQ0ZULFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU1tQixXQUFXO2dCQUFDO2dCQUFTO2dCQUFTO2dCQUFTO2dCQUFjO2dCQUFjO2dCQUFXO2dCQUFTO2FBQVE7WUFFckcsS0FBSyxNQUFNQyxXQUFXRCxTQUFVO2dCQUM5QixJQUFJO29CQUNGLE1BQU1FLFNBQVN6Qiw2REFBV0EsQ0FBQ3dCO29CQUMzQixNQUFNRSxVQUFVLE1BQU0zQiwwQ0FBRUEsQ0FBQzRCLEdBQUcsQ0FBQ0Y7b0JBRTdCLElBQUlDLFVBQVUsR0FBRzt3QkFDZmYsUUFBUWlCLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRUosUUFBUSxLQUFLLENBQUM7d0JBQ3RDckIsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUVvQixRQUFRLEtBQUssQ0FBQztvQkFDN0QsT0FBTzt3QkFDTGIsUUFBUWlCLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRUosUUFBUSxjQUFjLENBQUM7b0JBQzVDO2dCQUNGLEVBQUUsT0FBT0gsT0FBTztvQkFDZCxNQUFNUSxXQUFXLENBQUMsZ0JBQWdCLEVBQUVMLFFBQVEsT0FBTyxFQUFFSCxpQkFBaUJDLFFBQVFELE1BQU1QLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztvQkFDL0dGLE9BQU9nQixJQUFJLENBQUNDO29CQUNaMUIsUUFBUWtCLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFUSxTQUFTLENBQUM7Z0JBQ25EO1lBQ0Y7UUFDRixFQUFFLE9BQU9SLE9BQU87WUFDZCxNQUFNUSxXQUFXLENBQUMsNkJBQTZCLEVBQUVSLGlCQUFpQkMsUUFBUUQsTUFBTVAsT0FBTyxHQUFHLGdCQUFnQixDQUFDO1lBQzNHRixPQUFPZ0IsSUFBSSxDQUFDQztZQUNaMUIsUUFBUWtCLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFUSxTQUFTLENBQUM7UUFDbkQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8uL3dvcmtmbG93cy9zZXR0aW5ncy9jbGVhci1sb2dzLXdvcmtmbG93LnRzPzA1YWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL2NsZWFyLWxvZ3Mtd29ya2Zsb3cudHNcclxuLy8gQ2xlYXIgTG9ncyBXb3JrZmxvdyBmb3IgS1Ytb25seSBhcmNoaXRlY3R1cmVcclxuXHJcbmltcG9ydCB7IGt2IH0gZnJvbSAnQHZlcmNlbC9rdic7XHJcbmltcG9ydCB7IGJ1aWxkTG9nS2V5IH0gZnJvbSAnQC9kYXRhLXN0b3JlL2tleXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1Jlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgZGF0YT86IHtcclxuICAgIHJlc3VsdHM6IHN0cmluZ1tdO1xyXG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcclxuICAgIG9wZXJhdGlvbjogc3RyaW5nO1xyXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcclxuICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uPzogYm9vbGVhbjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2xlYXJMb2dzV29ya2Zsb3cge1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGUgY2xlYXIgbG9ncyBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZSgpOiBQcm9taXNlPFNldHRpbmdzUmVzdWx0PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0NsZWFyTG9nc1dvcmtmbG93XSDwn5eR77iPIFN0YXJ0aW5nIGNsZWFyIGxvZ3Mgb3BlcmF0aW9uLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBpc0tWID0gQm9vbGVhbihwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9VUkwpO1xyXG4gICAgICBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xyXG4gICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW0NsZWFyTG9nc1dvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtDbGVhckxvZ3NXb3JrZmxvd10g8J+Wpe+4jyBDb250ZXh0OiAke2lzU2VydmVyID8gJ1NlcnZlcicgOiAnQ2xpZW50J31gKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZvciBsb2NhbCBlbnZpcm9ubWVudCwgd2UgbmVlZCB0byBydW4gb24gY2xpZW50IHNpZGVcclxuICAgICAgaWYgKCFpc0tWICYmIGlzU2VydmVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtDbGVhckxvZ3NXb3JrZmxvd10g4pqg77iPIExvY2FsIGVudmlyb25tZW50IGRldGVjdGVkIG9uIHNlcnZlciAtIHJldHVybmluZyBpbnN0cnVjdGlvbiBmb3IgY2xpZW50LXNpZGUgZXhlY3V0aW9uYCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnQ2xlYXIgbG9ncyByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgY2xlYXIgbG9ncyByZXF1aXJlZCBmb3IgbG9jYWwgZW52aXJvbm1lbnQnXSxcclxuICAgICAgICAgICAgZXJyb3JzOiBbXSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnY2xlYXItbG9ncycsXHJcbiAgICAgICAgICAgIGVudmlyb25tZW50OiAnbG9jYWwnLFxyXG4gICAgICAgICAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbjogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIENsZWFyIGFsbCBlbnRpdHkgbG9nc1xyXG4gICAgICBhd2FpdCB0aGlzLmNsZWFyRW50aXR5TG9ncyhyZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGVycm9ycy5sZW5ndGggPT09IDA7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdWNjZXNzIFxyXG4gICAgICAgID8gYFN1Y2Nlc3NmdWxseSBjbGVhcmVkIGxvZ3MgLSAke3Jlc3VsdHMubGVuZ3RofSBvcGVyYXRpb25zIGNvbXBsZXRlZGBcclxuICAgICAgICA6IGBDbGVhciBsb2dzIGNvbXBsZXRlZCB3aXRoICR7ZXJyb3JzLmxlbmd0aH0gZXJyb3JzIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtDbGVhckxvZ3NXb3JrZmxvd10g4pyFIENsZWFyIGxvZ3Mgb3BlcmF0aW9uIGNvbXBsZXRlZDogJHttZXNzYWdlfWApO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0cyxcclxuICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICAgIG9wZXJhdGlvbjogJ2NsZWFyLWxvZ3MnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGlzS1YgPyAna3YnIDogJ2xvY2FsJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdbQ2xlYXJMb2dzV29ya2Zsb3ddIOKdjCBDbGVhciBsb2dzIG9wZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBDbGVhciBsb2dzIG9wZXJhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzOiBbXSxcclxuICAgICAgICAgIGVycm9yczogW2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXSxcclxuICAgICAgICAgIG9wZXJhdGlvbjogJ2NsZWFyLWxvZ3MnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6ICd1bmtub3duJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgYWxsIGVudGl0eSBsb2dzIGZyb20gS1ZcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBjbGVhckVudGl0eUxvZ3MocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbQ2xlYXJMb2dzV29ya2Zsb3ddIPCfk50gQ2xlYXJpbmcgZW50aXR5IGxvZ3MuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGxvZ1R5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcycsICdsaW5rcyddO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBsb2dUeXBlIG9mIGxvZ1R5cGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGxvZ0tleSA9IGJ1aWxkTG9nS2V5KGxvZ1R5cGUpO1xyXG4gICAgICAgICAgY29uc3QgZGVsZXRlZCA9IGF3YWl0IGt2LmRlbChsb2dLZXkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZGVsZXRlZCA+IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkICR7bG9nVHlwZX0gbG9nc2ApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0NsZWFyTG9nc1dvcmtmbG93XSDinIUgQ2xlYXJlZCAke2xvZ1R5cGV9IGxvZ3NgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgTm8gJHtsb2dUeXBlfSBsb2dzIHRvIGNsZWFyYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBjbGVhciAke2xvZ1R5cGV9IGxvZ3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtDbGVhckxvZ3NXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgZW50aXR5IGxvZ3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbQ2xlYXJMb2dzV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsia3YiLCJidWlsZExvZ0tleSIsIkNsZWFyTG9nc1dvcmtmbG93IiwiZXhlY3V0ZSIsImNvbnNvbGUiLCJsb2ciLCJpc0tWIiwiQm9vbGVhbiIsInByb2Nlc3MiLCJlbnYiLCJLVl9SRVNUX0FQSV9VUkwiLCJpc1NlcnZlciIsInJlc3VsdHMiLCJlcnJvcnMiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRhdGEiLCJvcGVyYXRpb24iLCJlbnZpcm9ubWVudCIsInJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uIiwiY2xlYXJFbnRpdHlMb2dzIiwibGVuZ3RoIiwiZXJyb3IiLCJFcnJvciIsImxvZ1R5cGVzIiwibG9nVHlwZSIsImxvZ0tleSIsImRlbGV0ZWQiLCJkZWwiLCJwdXNoIiwiZXJyb3JNc2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/clear-logs-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/export-data-workflow.ts":
/*!****************************************************!*\
  !*** ./workflows/settings/export-data-workflow.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExportDataWorkflow: () => (/* binding */ ExportDataWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/export-data-workflow.ts\n// Export Data Workflow for KV-only architecture\n\n\nclass ExportDataWorkflow {\n    /**\r\n   * Execute export data operation\r\n   */ static async execute() {\n        try {\n            console.log(\"[ExportDataWorkflow] \\uD83D\\uDCE4 Starting export data operation...\");\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[ExportDataWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[ExportDataWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[ExportDataWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Export data requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side export data required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"export-data\",\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Export all data\n            const exportData = await this.exportAllData(results, errors);\n            const success = errors.length === 0;\n            const message = success ? `Successfully exported data - ${results.length} operations completed` : `Export data completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[ExportDataWorkflow] ✅ Export data operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"export-data\",\n                    environment: isKV ? \"kv\" : \"local\",\n                    exportData\n                }\n            };\n        } catch (error) {\n            console.error(\"[ExportDataWorkflow] ❌ Export data operation failed:\", error);\n            return {\n                success: false,\n                message: `Export data operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"export-data\",\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Export all data from KV\r\n   */ static async exportAllData(results, errors) {\n        try {\n            console.log(\"[ExportDataWorkflow] \\uD83D\\uDCE4 Exporting all data...\");\n            const exportData = {\n                metadata: {\n                    exportedAt: new Date().toISOString(),\n                    version: \"1.0\",\n                    environment: process.env.KV_REST_API_URL ? \"kv\" : \"local\"\n                },\n                entities: {\n                    tasks: [],\n                    items: [],\n                    sales: [],\n                    financials: [],\n                    characters: [],\n                    players: [],\n                    sites: []\n                },\n                settlements: [],\n                links: [],\n                logs: {}\n            };\n            // Export all entity types\n            const entityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of entityTypes){\n                try {\n                    await this.exportEntityType(entityType, exportData, results, errors);\n                } catch (error) {\n                    const errorMsg = `Failed to export ${entityType}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            // Export settlements as part of sites data\n            await this.exportSettlements(exportData, results, errors);\n            // Export links\n            await this.exportLinks(exportData, results, errors);\n            // Export logs\n            await this.exportLogs(exportData, results, errors);\n            results.push(`Exported data for ${entityTypes.length} entity types`);\n            console.log(`[ExportDataWorkflow] ✅ Exported all data`);\n            return exportData;\n        } catch (error) {\n            const errorMsg = `Failed to export all data: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n            return null;\n        }\n    }\n    /**\r\n   * Export specific entity type\r\n   */ static async exportEntityType(entityType, exportData, results, errors) {\n        try {\n            // Get all entity IDs from index\n            const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(entityType);\n            const entityIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(indexKey);\n            if (entityIds.length === 0) {\n                results.push(`No ${entityType} entities to export`);\n                return;\n            }\n            // Export each entity\n            for (const entityId of entityIds){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, entityId);\n                    const entityData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.get(dataKey);\n                    if (entityData) {\n                        const entity = JSON.parse(entityData);\n                        exportData.entities[entityType].push(entity);\n                    }\n                } catch (error) {\n                    console.warn(`[ExportDataWorkflow] ⚠️ Failed to export ${entityType} ${entityId}:`, error);\n                }\n            }\n            results.push(`Exported ${exportData.entities[entityType].length} ${entityType} entities`);\n            console.log(`[ExportDataWorkflow] ✅ Exported ${exportData.entities[entityType].length} ${entityType} entities`);\n        } catch (error) {\n            const errorMsg = `Failed to export ${entityType}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Export links\r\n   */ static async exportLinks(exportData, results, errors) {\n        try {\n            // Get all link IDs\n            const linksIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"links\");\n            const linkIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(linksIndexKey);\n            if (linkIds.length === 0) {\n                results.push(\"No links to export\");\n                return;\n            }\n            // Export each link\n            for (const linkId of linkIds){\n                try {\n                    const linkKey = `links:link:${linkId}`;\n                    const linkData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.get(linkKey);\n                    if (linkData) {\n                        const link = JSON.parse(linkData);\n                        exportData.links.push(link);\n                    }\n                } catch (error) {\n                    console.warn(`[ExportDataWorkflow] ⚠️ Failed to export link ${linkId}:`, error);\n                }\n            }\n            results.push(`Exported ${exportData.links.length} links`);\n            console.log(`[ExportDataWorkflow] ✅ Exported ${exportData.links.length} links`);\n        } catch (error) {\n            const errorMsg = `Failed to export links: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Export logs\r\n   */ static async exportLogs(exportData, results, errors) {\n        try {\n            const logTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\",\n                \"links\"\n            ];\n            for (const logType of logTypes){\n                try {\n                    const logKey = `logs:${logType}`;\n                    const logData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.lrange(logKey, 0, -1);\n                    if (logData && logData.length > 0) {\n                        exportData.logs[logType] = logData.map((entry)=>JSON.parse(entry));\n                        results.push(`Exported ${logData.length} ${logType} log entries`);\n                    } else {\n                        exportData.logs[logType] = [];\n                        results.push(`No ${logType} log entries to export`);\n                    }\n                } catch (error) {\n                    console.warn(`[ExportDataWorkflow] ⚠️ Failed to export ${logType} logs:`, error);\n                    exportData.logs[logType] = [];\n                }\n            }\n            console.log(`[ExportDataWorkflow] ✅ Exported logs for ${logTypes.length} log types`);\n        } catch (error) {\n            const errorMsg = `Failed to export logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Export settlements as reference data (not a core entity)\r\n   */ static async exportSettlements(exportData, results, errors) {\n        try {\n            console.log(\"[ExportDataWorkflow] \\uD83D\\uDCE4 Exporting settlements as reference data...\");\n            // Get all settlement IDs from index\n            const settlementsIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"settlements\");\n            const settlementIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(settlementsIndexKey);\n            if (settlementIds.length === 0) {\n                results.push(\"No settlements to export\");\n                return;\n            }\n            // Export each settlement\n            for (const settlementId of settlementIds){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"settlements\", settlementId);\n                    const settlementData = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.get(dataKey);\n                    if (settlementData) {\n                        const settlement = JSON.parse(settlementData);\n                        exportData.settlements.push(settlement);\n                    }\n                } catch (error) {\n                    console.warn(`[ExportDataWorkflow] ⚠️ Failed to export settlement ${settlementId}:`, error);\n                }\n            }\n            results.push(`Exported ${exportData.settlements.length} settlements as reference data`);\n            console.log(`[ExportDataWorkflow] ✅ Exported ${exportData.settlements.length} settlements`);\n        } catch (error) {\n            const errorMsg = `Failed to export settlements: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ExportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvZXhwb3J0LWRhdGEtd29ya2Zsb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsNkNBQTZDO0FBQzdDLGdEQUFnRDtBQUVoQjtBQUNnQztBQWV6RCxNQUFNRztJQUVYOztHQUVDLEdBQ0QsYUFBYUMsVUFBbUM7UUFDOUMsSUFBSTtZQUNGQyxRQUFRQyxHQUFHLENBQUM7WUFFWixNQUFNQyxPQUFPQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7WUFDaEQsTUFBTUMsV0FBVyxnQkFBa0I7WUFDbkMsTUFBTUMsVUFBb0IsRUFBRTtZQUM1QixNQUFNQyxTQUFtQixFQUFFO1lBRTNCVCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQ0FBcUMsRUFBRUMsT0FBTyxvQkFBb0Isc0JBQXNCLENBQUM7WUFDdEdGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtDQUFrQyxFQUFFTSxXQUFXLFdBQVcsU0FBUyxDQUFDO1lBRWpGLHVEQUF1RDtZQUN2RCxJQUFJLENBQUNMLFFBQVFLLFVBQVU7Z0JBQ3JCUCxRQUFRQyxHQUFHLENBQUMsQ0FBQyw4R0FBOEcsQ0FBQztnQkFDNUgsT0FBTztvQkFDTFMsU0FBUztvQkFDVEMsU0FBUztvQkFDVEMsTUFBTTt3QkFDSkosU0FBUzs0QkFBQzt5QkFBeUQ7d0JBQ25FQyxRQUFRLEVBQUU7d0JBQ1ZJLFdBQVc7d0JBQ1hDLGFBQWE7d0JBQ2JDLHlCQUF5QjtvQkFDM0I7Z0JBQ0Y7WUFDRjtZQUVBLGtCQUFrQjtZQUNsQixNQUFNQyxhQUFhLE1BQU0sSUFBSSxDQUFDQyxhQUFhLENBQUNULFNBQVNDO1lBRXJELE1BQU1DLFVBQVVELE9BQU9TLE1BQU0sS0FBSztZQUNsQyxNQUFNUCxVQUFVRCxVQUNaLENBQUMsNkJBQTZCLEVBQUVGLFFBQVFVLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxHQUNyRSxDQUFDLDJCQUEyQixFQUFFVCxPQUFPUyxNQUFNLENBQUMsVUFBVSxFQUFFVixRQUFRVSxNQUFNLENB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QyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUV6QixXQUFXa0IsV0FBVyxDQUFDaEIsTUFBTSxDQUFDLDhCQUE4QixDQUFDO1lBQ3RGbEIsUUFBUUMsR0FBRyxDQUFDLENBQUMsZ0NBQWdDLEVBQUVlLFdBQVdrQixXQUFXLENBQUNoQixNQUFNLENBQUMsWUFBWSxDQUFDO1FBRTVGLEVBQUUsT0FBT0MsT0FBTztZQUNkLE1BQU1xQixXQUFXLENBQUMsOEJBQThCLEVBQUVyQixpQkFBaUJDLFFBQVFELE1BQU1SLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztZQUM1R0YsT0FBT2dDLElBQUksQ0FBQ0Q7WUFDWnhDLFFBQVFtQixLQUFLLENBQUMsQ0FBQyx1QkFBdUIsRUFBRXFCLFNBQVMsQ0FBQztRQUNwRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aGVnYW1lLWFkbWluLy4vd29ya2Zsb3dzL3NldHRpbmdzL2V4cG9ydC1kYXRhLXdvcmtmbG93LnRzPzI0MDEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL2V4cG9ydC1kYXRhLXdvcmtmbG93LnRzXHJcbi8vIEV4cG9ydCBEYXRhIFdvcmtmbG93IGZvciBLVi1vbmx5IGFyY2hpdGVjdHVyZVxyXG5cclxuaW1wb3J0IHsga3YgfSBmcm9tICdAdmVyY2VsL2t2JztcclxuaW1wb3J0IHsgYnVpbGREYXRhS2V5LCBidWlsZEluZGV4S2V5IH0gZnJvbSAnQC9kYXRhLXN0b3JlL2tleXMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc1Jlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgZGF0YT86IHtcclxuICAgIHJlc3VsdHM6IHN0cmluZ1tdO1xyXG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcclxuICAgIG9wZXJhdGlvbjogc3RyaW5nO1xyXG4gICAgZW52aXJvbm1lbnQ6IHN0cmluZztcclxuICAgIGV4cG9ydERhdGE/OiBhbnk7XHJcbiAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbj86IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4cG9ydERhdGFXb3JrZmxvdyB7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZSBleHBvcnQgZGF0YSBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZSgpOiBQcm9taXNlPFNldHRpbmdzUmVzdWx0PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0V4cG9ydERhdGFXb3JrZmxvd10g8J+TpCBTdGFydGluZyBleHBvcnQgZGF0YSBvcGVyYXRpb24uLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGlzS1YgPSBCb29sZWFuKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCk7XHJcbiAgICAgIGNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtFeHBvcnREYXRhV29ya2Zsb3ddIPCflqXvuI8gQ29udGV4dDogJHtpc1NlcnZlciA/ICdTZXJ2ZXInIDogJ0NsaWVudCd9YCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGb3IgbG9jYWwgZW52aXJvbm1lbnQsIHdlIG5lZWQgdG8gcnVuIG9uIGNsaWVudCBzaWRlXHJcbiAgICAgIGlmICghaXNLViAmJiBpc1NlcnZlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDimqDvuI8gTG9jYWwgZW52aXJvbm1lbnQgZGV0ZWN0ZWQgb24gc2VydmVyIC0gcmV0dXJuaW5nIGluc3RydWN0aW9uIGZvciBjbGllbnQtc2lkZSBleGVjdXRpb25gKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdFeHBvcnQgZGF0YSByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgZXhwb3J0IGRhdGEgcmVxdWlyZWQgZm9yIGxvY2FsIGVudmlyb25tZW50J10sXHJcbiAgICAgICAgICAgIGVycm9yczogW10sXHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogJ2V4cG9ydC1kYXRhJyxcclxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6ICdsb2NhbCcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb3J0IGFsbCBkYXRhXHJcbiAgICAgIGNvbnN0IGV4cG9ydERhdGEgPSBhd2FpdCB0aGlzLmV4cG9ydEFsbERhdGEocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBlcnJvcnMubGVuZ3RoID09PSAwO1xyXG4gICAgICBjb25zdCBtZXNzYWdlID0gc3VjY2VzcyBcclxuICAgICAgICA/IGBTdWNjZXNzZnVsbHkgZXhwb3J0ZWQgZGF0YSAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYFxyXG4gICAgICAgIDogYEV4cG9ydCBkYXRhIGNvbXBsZXRlZCB3aXRoICR7ZXJyb3JzLmxlbmd0aH0gZXJyb3JzIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKchSBFeHBvcnQgZGF0YSBvcGVyYXRpb24gY29tcGxldGVkOiAke21lc3NhZ2V9YCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3MsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzLFxyXG4gICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgb3BlcmF0aW9uOiAnZXhwb3J0LWRhdGEnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGlzS1YgPyAna3YnIDogJ2xvY2FsJyxcclxuICAgICAgICAgIGV4cG9ydERhdGFcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW0V4cG9ydERhdGFXb3JrZmxvd10g4p2MIEV4cG9ydCBkYXRhIG9wZXJhdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBFeHBvcnQgZGF0YSBvcGVyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0czogW10sXHJcbiAgICAgICAgICBlcnJvcnM6IFtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ10sXHJcbiAgICAgICAgICBvcGVyYXRpb246ICdleHBvcnQtZGF0YScsXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ3Vua25vd24nXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBFeHBvcnQgYWxsIGRhdGEgZnJvbSBLVlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGV4cG9ydEFsbERhdGEocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tFeHBvcnREYXRhV29ya2Zsb3ddIPCfk6QgRXhwb3J0aW5nIGFsbCBkYXRhLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBleHBvcnREYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIGV4cG9ydGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIHZlcnNpb246ICcxLjAnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCA/ICdrdicgOiAnbG9jYWwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnRpdGllczoge1xyXG4gICAgICAgICAgdGFza3M6IFtdLFxyXG4gICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgc2FsZXM6IFtdLFxyXG4gICAgICAgICAgZmluYW5jaWFsczogW10sXHJcbiAgICAgICAgICBjaGFyYWN0ZXJzOiBbXSxcclxuICAgICAgICAgIHBsYXllcnM6IFtdLFxyXG4gICAgICAgICAgc2l0ZXM6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXR0bGVtZW50czogW10sXHJcbiAgICAgICAgbGlua3M6IFtdLFxyXG4gICAgICAgIGxvZ3M6IHt9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBFeHBvcnQgYWxsIGVudGl0eSB0eXBlc1xyXG4gICAgICBjb25zdCBlbnRpdHlUeXBlcyA9IFsndGFza3MnLCAnaXRlbXMnLCAnc2FsZXMnLCAnZmluYW5jaWFscycsICdjaGFyYWN0ZXJzJywgJ3BsYXllcnMnLCAnc2l0ZXMnXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgZW50aXR5VHlwZSBvZiBlbnRpdHlUeXBlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4cG9ydEVudGl0eVR5cGUoZW50aXR5VHlwZSwgZXhwb3J0RGF0YSwgcmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGV4cG9ydCAke2VudGl0eVR5cGV9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEV4cG9ydCBzZXR0bGVtZW50cyBhcyBwYXJ0IG9mIHNpdGVzIGRhdGFcclxuICAgICAgYXdhaXQgdGhpcy5leHBvcnRTZXR0bGVtZW50cyhleHBvcnREYXRhLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gRXhwb3J0IGxpbmtzXHJcbiAgICAgIGF3YWl0IHRoaXMuZXhwb3J0TGlua3MoZXhwb3J0RGF0YSwgcmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEV4cG9ydCBsb2dzXHJcbiAgICAgIGF3YWl0IHRoaXMuZXhwb3J0TG9ncyhleHBvcnREYXRhLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBFeHBvcnRlZCBkYXRhIGZvciAke2VudGl0eVR5cGVzLmxlbmd0aH0gZW50aXR5IHR5cGVzYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDinIUgRXhwb3J0ZWQgYWxsIGRhdGFgKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBleHBvcnREYXRhO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBleHBvcnQgYWxsIGRhdGE6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEV4cG9ydCBzcGVjaWZpYyBlbnRpdHkgdHlwZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGV4cG9ydEVudGl0eVR5cGUoZW50aXR5VHlwZTogc3RyaW5nLCBleHBvcnREYXRhOiBhbnksIHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgYWxsIGVudGl0eSBJRHMgZnJvbSBpbmRleFxyXG4gICAgICBjb25zdCBpbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoZW50aXR5VHlwZSk7XHJcbiAgICAgIGNvbnN0IGVudGl0eUlkcyA9IGF3YWl0IGt2LnNtZW1iZXJzKGluZGV4S2V5KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChlbnRpdHlJZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKGBObyAke2VudGl0eVR5cGV9IGVudGl0aWVzIHRvIGV4cG9ydGApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb3J0IGVhY2ggZW50aXR5XHJcbiAgICAgIGZvciAoY29uc3QgZW50aXR5SWQgb2YgZW50aXR5SWRzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSBidWlsZERhdGFLZXkoZW50aXR5VHlwZSwgZW50aXR5SWQpO1xyXG4gICAgICAgICAgY29uc3QgZW50aXR5RGF0YSA9IGF3YWl0IGt2LmdldChkYXRhS2V5KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVudGl0eURhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gSlNPTi5wYXJzZShlbnRpdHlEYXRhIGFzIHN0cmluZyk7XHJcbiAgICAgICAgICAgIGV4cG9ydERhdGEuZW50aXRpZXNbZW50aXR5VHlwZV0ucHVzaChlbnRpdHkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKaoO+4jyBGYWlsZWQgdG8gZXhwb3J0ICR7ZW50aXR5VHlwZX0gJHtlbnRpdHlJZH06YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBFeHBvcnRlZCAke2V4cG9ydERhdGEuZW50aXRpZXNbZW50aXR5VHlwZV0ubGVuZ3RofSAke2VudGl0eVR5cGV9IGVudGl0aWVzYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDinIUgRXhwb3J0ZWQgJHtleHBvcnREYXRhLmVudGl0aWVzW2VudGl0eVR5cGVdLmxlbmd0aH0gJHtlbnRpdHlUeXBlfSBlbnRpdGllc2ApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBleHBvcnQgJHtlbnRpdHlUeXBlfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBFeHBvcnQgbGlua3NcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBleHBvcnRMaW5rcyhleHBvcnREYXRhOiBhbnksIHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgYWxsIGxpbmsgSURzXHJcbiAgICAgIGNvbnN0IGxpbmtzSW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCdsaW5rcycpO1xyXG4gICAgICBjb25zdCBsaW5rSWRzID0gYXdhaXQga3Yuc21lbWJlcnMobGlua3NJbmRleEtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGlua0lkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHRzLnB1c2goJ05vIGxpbmtzIHRvIGV4cG9ydCcpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb3J0IGVhY2ggbGlua1xyXG4gICAgICBmb3IgKGNvbnN0IGxpbmtJZCBvZiBsaW5rSWRzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGxpbmtLZXkgPSBgbGlua3M6bGluazoke2xpbmtJZH1gO1xyXG4gICAgICAgICAgY29uc3QgbGlua0RhdGEgPSBhd2FpdCBrdi5nZXQobGlua0tleSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChsaW5rRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rID0gSlNPTi5wYXJzZShsaW5rRGF0YSBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgICBleHBvcnREYXRhLmxpbmtzLnB1c2gobGluayk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgW0V4cG9ydERhdGFXb3JrZmxvd10g4pqg77iPIEZhaWxlZCB0byBleHBvcnQgbGluayAke2xpbmtJZH06YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBFeHBvcnRlZCAke2V4cG9ydERhdGEubGlua3MubGVuZ3RofSBsaW5rc2ApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydERhdGFXb3JrZmxvd10g4pyFIEV4cG9ydGVkICR7ZXhwb3J0RGF0YS5saW5rcy5sZW5ndGh9IGxpbmtzYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGV4cG9ydCBsaW5rczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBFeHBvcnQgbG9nc1xyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGV4cG9ydExvZ3MoZXhwb3J0RGF0YTogYW55LCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbG9nVHlwZXMgPSBbJ3Rhc2tzJywgJ2l0ZW1zJywgJ3NhbGVzJywgJ2ZpbmFuY2lhbHMnLCAnY2hhcmFjdGVycycsICdwbGF5ZXJzJywgJ3NpdGVzJywgJ2xpbmtzJ107XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IGxvZ1R5cGUgb2YgbG9nVHlwZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgbG9nS2V5ID0gYGxvZ3M6JHtsb2dUeXBlfWA7XHJcbiAgICAgICAgICBjb25zdCBsb2dEYXRhID0gYXdhaXQga3YubHJhbmdlKGxvZ0tleSwgMCwgLTEpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAobG9nRGF0YSAmJiBsb2dEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZXhwb3J0RGF0YS5sb2dzW2xvZ1R5cGVdID0gbG9nRGF0YS5tYXAoZW50cnkgPT4gSlNPTi5wYXJzZShlbnRyeSkpO1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYEV4cG9ydGVkICR7bG9nRGF0YS5sZW5ndGh9ICR7bG9nVHlwZX0gbG9nIGVudHJpZXNgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV4cG9ydERhdGEubG9nc1tsb2dUeXBlXSA9IFtdO1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYE5vICR7bG9nVHlwZX0gbG9nIGVudHJpZXMgdG8gZXhwb3J0YCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgW0V4cG9ydERhdGFXb3JrZmxvd10g4pqg77iPIEZhaWxlZCB0byBleHBvcnQgJHtsb2dUeXBlfSBsb2dzOmAsIGVycm9yKTtcclxuICAgICAgICAgIGV4cG9ydERhdGEubG9nc1tsb2dUeXBlXSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKchSBFeHBvcnRlZCBsb2dzIGZvciAke2xvZ1R5cGVzLmxlbmd0aH0gbG9nIHR5cGVzYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGV4cG9ydCBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW0V4cG9ydERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHBvcnQgc2V0dGxlbWVudHMgYXMgcmVmZXJlbmNlIGRhdGEgKG5vdCBhIGNvcmUgZW50aXR5KVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGV4cG9ydFNldHRsZW1lbnRzKGV4cG9ydERhdGE6IGFueSwgcmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbRXhwb3J0RGF0YVdvcmtmbG93XSDwn5OkIEV4cG9ydGluZyBzZXR0bGVtZW50cyBhcyByZWZlcmVuY2UgZGF0YS4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGFsbCBzZXR0bGVtZW50IElEcyBmcm9tIGluZGV4XHJcbiAgICAgIGNvbnN0IHNldHRsZW1lbnRzSW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCdzZXR0bGVtZW50cycpO1xyXG4gICAgICBjb25zdCBzZXR0bGVtZW50SWRzID0gYXdhaXQga3Yuc21lbWJlcnMoc2V0dGxlbWVudHNJbmRleEtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc2V0dGxlbWVudElkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHRzLnB1c2goJ05vIHNldHRsZW1lbnRzIHRvIGV4cG9ydCcpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb3J0IGVhY2ggc2V0dGxlbWVudFxyXG4gICAgICBmb3IgKGNvbnN0IHNldHRsZW1lbnRJZCBvZiBzZXR0bGVtZW50SWRzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSBidWlsZERhdGFLZXkoJ3NldHRsZW1lbnRzJywgc2V0dGxlbWVudElkKTtcclxuICAgICAgICAgIGNvbnN0IHNldHRsZW1lbnREYXRhID0gYXdhaXQga3YuZ2V0KGRhdGFLZXkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoc2V0dGxlbWVudERhdGEpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGxlbWVudCA9IEpTT04ucGFyc2Uoc2V0dGxlbWVudERhdGEgYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgZXhwb3J0RGF0YS5zZXR0bGVtZW50cy5wdXNoKHNldHRsZW1lbnQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKaoO+4jyBGYWlsZWQgdG8gZXhwb3J0IHNldHRsZW1lbnQgJHtzZXR0bGVtZW50SWR9OmAsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJlc3VsdHMucHVzaChgRXhwb3J0ZWQgJHtleHBvcnREYXRhLnNldHRsZW1lbnRzLmxlbmd0aH0gc2V0dGxlbWVudHMgYXMgcmVmZXJlbmNlIGRhdGFgKTtcclxuICAgICAgY29uc29sZS5sb2coYFtFeHBvcnREYXRhV29ya2Zsb3ddIOKchSBFeHBvcnRlZCAke2V4cG9ydERhdGEuc2V0dGxlbWVudHMubGVuZ3RofSBzZXR0bGVtZW50c2ApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBleHBvcnQgc2V0dGxlbWVudHM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbRXhwb3J0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImt2IiwiYnVpbGREYXRhS2V5IiwiYnVpbGRJbmRleEtleSIsIkV4cG9ydERhdGFXb3JrZmxvdyIsImV4ZWN1dGUiLCJjb25zb2xlIiwibG9nIiwiaXNLViIsIkJvb2xlYW4iLCJwcm9jZXNzIiwiZW52IiwiS1ZfUkVTVF9BUElfVVJMIiwiaXNTZXJ2ZXIiLCJyZXN1bHRzIiwiZXJyb3JzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkYXRhIiwib3BlcmF0aW9uIiwiZW52aXJvbm1lbnQiLCJyZXF1aXJlc0NsaWVudEV4ZWN1dGlvbiIsImV4cG9ydERhdGEiLCJleHBvcnRBbGxEYXRhIiwibGVuZ3RoIiwiZXJyb3IiLCJFcnJvciIsIm1ldGFkYXRhIiwiZXhwb3J0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInZlcnNpb24iLCJlbnRpdGllcyIsInRhc2tzIiwiaXRlbXMiLCJzYWxlcyIsImZpbmFuY2lhbHMiLCJjaGFyYWN0ZXJzIiwicGxheWVycyIsInNpdGVzIiwic2V0dGxlbWVudHMiLCJsaW5rcyIsImxvZ3MiLCJlbnRpdHlUeXBlcyIsImVudGl0eVR5cGUiLCJleHBvcnRFbnRpdHlUeXBlIiwiZXJyb3JNc2ciLCJwdXNoIiwiZXhwb3J0U2V0dGxlbWVudHMiLCJleHBvcnRMaW5rcyIsImV4cG9ydExvZ3MiLCJpbmRleEtleSIsImVudGl0eUlkcyIsInNtZW1iZXJzIiwiZW50aXR5SWQiLCJkYXRhS2V5IiwiZW50aXR5RGF0YSIsImdldCIsImVudGl0eSIsIkpTT04iLCJwYXJzZSIsIndhcm4iLCJsaW5rc0luZGV4S2V5IiwibGlua0lkcyIsImxpbmtJZCIsImxpbmtLZXkiLCJsaW5rRGF0YSIsImxpbmsiLCJsb2dUeXBlcyIsImxvZ1R5cGUiLCJsb2dLZXkiLCJsb2dEYXRhIiwibHJhbmdlIiwibWFwIiwiZW50cnkiLCJzZXR0bGVtZW50c0luZGV4S2V5Iiwic2V0dGxlbWVudElkcyIsInNldHRsZW1lbnRJZCIsInNldHRsZW1lbnREYXRhIiwic2V0dGxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/export-data-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/import-data-workflow.ts":
/*!****************************************************!*\
  !*** ./workflows/settings/import-data-workflow.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImportDataWorkflow: () => (/* binding */ ImportDataWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/import-data-workflow.ts\n// Import Data Workflow for KV-only architecture\n\n\nclass ImportDataWorkflow {\n    /**\r\n   * Execute import data operation\r\n   */ static async execute(importData) {\n        try {\n            console.log(\"[ImportDataWorkflow] \\uD83D\\uDCE5 Starting import data operation...\");\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[ImportDataWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[ImportDataWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[ImportDataWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Import data requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side import data required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"import-data\",\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Validate import data\n            if (!this.validateImportData(importData, errors)) {\n                return {\n                    success: false,\n                    message: \"Invalid import data format\",\n                    data: {\n                        results: [],\n                        errors,\n                        operation: \"import-data\",\n                        environment: isKV ? \"kv\" : \"local\"\n                    }\n                };\n            }\n            // Import all data\n            await this.importAllData(importData, results, errors);\n            const success = errors.length === 0;\n            const message = success ? `Successfully imported data - ${results.length} operations completed` : `Import data completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[ImportDataWorkflow] ✅ Import data operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"import-data\",\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[ImportDataWorkflow] ❌ Import data operation failed:\", error);\n            return {\n                success: false,\n                message: `Import data operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"import-data\",\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Validate import data format\r\n   */ static validateImportData(importData, errors) {\n        try {\n            if (!importData || typeof importData !== \"object\") {\n                errors.push(\"Import data must be an object\");\n                return false;\n            }\n            if (!importData.entities || typeof importData.entities !== \"object\") {\n                errors.push(\"Import data must have entities property\");\n                return false;\n            }\n            const requiredEntityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of requiredEntityTypes){\n                if (!Array.isArray(importData.entities[entityType])) {\n                    errors.push(`Import data must have ${entityType} as an array`);\n                    return false;\n                }\n            }\n            if (!Array.isArray(importData.links)) {\n                errors.push(\"Import data must have links as an array\");\n                return false;\n            }\n            if (!importData.logs || typeof importData.logs !== \"object\") {\n                errors.push(\"Import data must have logs property\");\n                return false;\n            }\n            // Settlements are optional reference data\n            if (importData.settlements && !Array.isArray(importData.settlements)) {\n                errors.push(\"Import data settlements must be an array if present\");\n                return false;\n            }\n            return true;\n        } catch (error) {\n            errors.push(`Failed to validate import data: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n            return false;\n        }\n    }\n    /**\r\n   * Import all data\r\n   */ static async importAllData(importData, results, errors) {\n        try {\n            console.log(\"[ImportDataWorkflow] \\uD83D\\uDCE5 Importing all data...\");\n            // Import all entity types\n            const entityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of entityTypes){\n                try {\n                    await this.importEntityType(entityType, importData.entities[entityType], results, errors);\n                } catch (error) {\n                    const errorMsg = `Failed to import ${entityType}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            // Import settlements as reference data (if present)\n            if (importData.settlements && Array.isArray(importData.settlements)) {\n                await this.importSettlements(importData.settlements, results, errors);\n            }\n            // Import links\n            await this.importLinks(importData.links, results, errors);\n            // Import logs\n            await this.importLogs(importData.logs, results, errors);\n            results.push(`Imported data for ${entityTypes.length} entity types`);\n            console.log(`[ImportDataWorkflow] ✅ Imported all data`);\n        } catch (error) {\n            const errorMsg = `Failed to import all data: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Import specific entity type\r\n   */ static async importEntityType(entityType, entities, results, errors) {\n        try {\n            if (!entities || entities.length === 0) {\n                results.push(`No ${entityType} entities to import`);\n                return;\n            }\n            // Clear existing entities for this type\n            const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(entityType);\n            const existingIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(indexKey);\n            if (existingIds.length > 0) {\n                const dataKeys = existingIds.map((id)=>(0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, id));\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...dataKeys);\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(indexKey);\n                results.push(`Cleared ${existingIds.length} existing ${entityType} entities`);\n            }\n            // Import each entity\n            let importedCount = 0;\n            for (const entity of entities){\n                try {\n                    if (!entity.id) {\n                        console.warn(`[ImportDataWorkflow] ⚠️ Skipping ${entityType} entity without ID:`, entity);\n                        continue;\n                    }\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, entity.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(entity));\n                    // Add to index\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, entity.id);\n                    importedCount++;\n                } catch (error) {\n                    console.warn(`[ImportDataWorkflow] ⚠️ Failed to import ${entityType} entity:`, error);\n                }\n            }\n            results.push(`Imported ${importedCount} ${entityType} entities`);\n            console.log(`[ImportDataWorkflow] ✅ Imported ${importedCount} ${entityType} entities`);\n        } catch (error) {\n            const errorMsg = `Failed to import ${entityType}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Import links\r\n   */ static async importLinks(links, results, errors) {\n        try {\n            if (!links || links.length === 0) {\n                results.push(\"No links to import\");\n                return;\n            }\n            // Clear existing links\n            const linksIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"links\");\n            const existingLinkIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(linksIndexKey);\n            if (existingLinkIds.length > 0) {\n                const linkKeys = existingLinkIds.map((id)=>`links:link:${id}`);\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...linkKeys);\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(linksIndexKey);\n                results.push(`Cleared ${existingLinkIds.length} existing links`);\n            }\n            // Import each link\n            let importedCount = 0;\n            for (const link of links){\n                try {\n                    if (!link.id) {\n                        console.warn(`[ImportDataWorkflow] ⚠️ Skipping link without ID:`, link);\n                        continue;\n                    }\n                    const linkKey = `links:link:${link.id}`;\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(linkKey, JSON.stringify(link));\n                    // Add to links index\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(linksIndexKey, link.id);\n                    importedCount++;\n                } catch (error) {\n                    console.warn(`[ImportDataWorkflow] ⚠️ Failed to import link:`, error);\n                }\n            }\n            results.push(`Imported ${importedCount} links`);\n            console.log(`[ImportDataWorkflow] ✅ Imported ${importedCount} links`);\n        } catch (error) {\n            const errorMsg = `Failed to import links: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Import logs\r\n   */ static async importLogs(logs, results, errors) {\n        try {\n            const logTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\",\n                \"links\"\n            ];\n            for (const logType of logTypes){\n                try {\n                    const logEntries = logs[logType] || [];\n                    if (logEntries.length === 0) {\n                        results.push(`No ${logType} log entries to import`);\n                        continue;\n                    }\n                    // Clear existing logs for this type\n                    const logKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildLogKey)(logType);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(logKey);\n                    // Import each log entry\n                    for (const logEntry of logEntries){\n                        try {\n                            await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.lpush(logKey, JSON.stringify(logEntry));\n                        } catch (error) {\n                            console.warn(`[ImportDataWorkflow] ⚠️ Failed to import ${logType} log entry:`, error);\n                        }\n                    }\n                    results.push(`Imported ${logEntries.length} ${logType} log entries`);\n                } catch (error) {\n                    console.warn(`[ImportDataWorkflow] ⚠️ Failed to import ${logType} logs:`, error);\n                }\n            }\n            console.log(`[ImportDataWorkflow] ✅ Imported logs for ${logTypes.length} log types`);\n        } catch (error) {\n            const errorMsg = `Failed to import logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Import settlements as reference data (not a core entity)\r\n   */ static async importSettlements(settlements, results, errors) {\n        try {\n            if (!settlements || settlements.length === 0) {\n                results.push(\"No settlements to import\");\n                return;\n            }\n            console.log(\"[ImportDataWorkflow] \\uD83D\\uDCE5 Importing settlements as reference data...\");\n            // Clear existing settlements\n            const settlementsIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"settlements\");\n            const existingSettlementIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(settlementsIndexKey);\n            if (existingSettlementIds.length > 0) {\n                const dataKeys = existingSettlementIds.map((id)=>(0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"settlements\", id));\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...dataKeys);\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(settlementsIndexKey);\n                results.push(`Cleared ${existingSettlementIds.length} existing settlements`);\n            }\n            // Import each settlement\n            for (const settlement of settlements){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"settlements\", settlement.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(settlement));\n                    // Add to settlements index\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(settlementsIndexKey, settlement.id);\n                } catch (error) {\n                    console.warn(`[ImportDataWorkflow] ⚠️ Failed to import settlement ${settlement.id}:`, error);\n                }\n            }\n            results.push(`Imported ${settlements.length} settlements as reference data`);\n            console.log(`[ImportDataWorkflow] ✅ Imported ${settlements.length} settlements`);\n        } catch (error) {\n            const errorMsg = `Failed to import settlements: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ImportDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvaW1wb3J0LWRhdGEtd29ya2Zsb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsNkNBQTZDO0FBQzdDLGdEQUFnRDtBQUVoQjtBQUM2QztBQWN0RSxNQUFNSTtJQUVYOztHQUVDLEdBQ0QsYUFBYUMsUUFBUUMsVUFBZSxFQUEyQjtRQUM3RCxJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztZQUVaLE1BQU1DLE9BQU9DLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNoRCxNQUFNQyxXQUFXLGdCQUFrQjtZQUNuQyxNQUFNQyxVQUFvQixFQUFFO1lBQzVCLE1BQU1DLFNBQW1CLEVBQUU7WUFFM0JULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFQyxPQUFPLG9CQUFvQixzQkFBc0IsQ0FBQztZQUN0R0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0NBQWtDLEVBQUVNLFdBQVcsV0FBVyxTQUFTLENBQUM7WUFFakYsdURBQXVEO1lBQ3ZELElBQUksQ0FBQ0wsUUFBUUssVUFBVTtnQkFDckJQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDhHQUE4RyxDQUFDO2dCQUM1SCxPQUFPO29CQUNMUyxTQUFTO29CQUNUQyxTQUFTO29CQUNUQyxNQUFNO3dCQUNKSixTQUFTOzRCQUFDO3lCQUF5RDt3QkFDbkVDLFFBQVEsRUFBRTt3QkFDVkksV0FBVzt3QkFDWEMsYUFBYTt3QkFDYkMseUJBQXlCO29CQUMzQjtnQkFDRjtZQUNGO1lBRUEsdUJBQXVCO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUNDLGtCQUFrQixDQUFDakIsWUFBWVUsU0FBUztnQkFDaEQsT0FBTztvQkFDTEMsU0FBUztvQkFDVEMsU0FBUztvQkFDVEMsTUFBTTt3QkFDSkosU0FBUyxFQUFFO3dCQUNYQzt3QkFDQUksV0FBVzt3QkFDWEMsYUFBYVosT0FBTyxPQUFPO29CQUM3QjtnQkFDRjtZQUNGO1lBRUEsa0JBQWtCO1lBQ2xCLE1BQU0sSUFBSSxD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TztvQkFDZG5CLFFBQVE2QyxJQUFJLENBQUMsQ0FBQyxvREFBb0QsRUFBRW1CLFdBQVd2QixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUV0QjtnQkFDeEY7WUFDRjtZQUVBWCxRQUFRYSxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUVRLFlBQVlYLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQztZQUMzRWxCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGdDQUFnQyxFQUFFNEIsWUFBWVgsTUFBTSxDQUFDLFlBQVksQ0FBQztRQUVqRixFQUFFLE9BQU9DLE9BQU87WUFDZCxNQUFNYSxXQUFXLENBQUMsOEJBQThCLEVBQUViLGlCQUFpQkMsUUFBUUQsTUFBTVIsT0FBTyxHQUFHLGdCQUFnQixDQUFDO1lBQzVHRixPQUFPWSxJQUFJLENBQUNXO1lBQ1poQyxRQUFRbUIsS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUVhLFNBQVMsQ0FBQztRQUNwRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aGVnYW1lLWFkbWluLy4vd29ya2Zsb3dzL3NldHRpbmdzL2ltcG9ydC1kYXRhLXdvcmtmbG93LnRzPzNmYTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL2ltcG9ydC1kYXRhLXdvcmtmbG93LnRzXHJcbi8vIEltcG9ydCBEYXRhIFdvcmtmbG93IGZvciBLVi1vbmx5IGFyY2hpdGVjdHVyZVxyXG5cclxuaW1wb3J0IHsga3YgfSBmcm9tICdAdmVyY2VsL2t2JztcclxuaW1wb3J0IHsgYnVpbGREYXRhS2V5LCBidWlsZEluZGV4S2V5LCBidWlsZExvZ0tleSB9IGZyb20gJ0AvZGF0YS1zdG9yZS9rZXlzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NSZXN1bHQge1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIGRhdGE/OiB7XHJcbiAgICByZXN1bHRzOiBzdHJpbmdbXTtcclxuICAgIGVycm9yczogc3RyaW5nW107XHJcbiAgICBvcGVyYXRpb246IHN0cmluZztcclxuICAgIGVudmlyb25tZW50OiBzdHJpbmc7XHJcbiAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbj86IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEltcG9ydERhdGFXb3JrZmxvdyB7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZSBpbXBvcnQgZGF0YSBvcGVyYXRpb25cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgZXhlY3V0ZShpbXBvcnREYXRhOiBhbnkpOiBQcm9taXNlPFNldHRpbmdzUmVzdWx0PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0ltcG9ydERhdGFXb3JrZmxvd10g8J+TpSBTdGFydGluZyBpbXBvcnQgZGF0YSBvcGVyYXRpb24uLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGlzS1YgPSBCb29sZWFuKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCk7XHJcbiAgICAgIGNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XHJcbiAgICAgIGNvbnN0IHJlc3VsdHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtJbXBvcnREYXRhV29ya2Zsb3ddIPCflqXvuI8gQ29udGV4dDogJHtpc1NlcnZlciA/ICdTZXJ2ZXInIDogJ0NsaWVudCd9YCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGb3IgbG9jYWwgZW52aXJvbm1lbnQsIHdlIG5lZWQgdG8gcnVuIG9uIGNsaWVudCBzaWRlXHJcbiAgICAgIGlmICghaXNLViAmJiBpc1NlcnZlcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDimqDvuI8gTG9jYWwgZW52aXJvbm1lbnQgZGV0ZWN0ZWQgb24gc2VydmVyIC0gcmV0dXJuaW5nIGluc3RydWN0aW9uIGZvciBjbGllbnQtc2lkZSBleGVjdXRpb25gKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdJbXBvcnQgZGF0YSByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgaW1wb3J0IGRhdGEgcmVxdWlyZWQgZm9yIGxvY2FsIGVudmlyb25tZW50J10sXHJcbiAgICAgICAgICAgIGVycm9yczogW10sXHJcbiAgICAgICAgICAgIG9wZXJhdGlvbjogJ2ltcG9ydC1kYXRhJyxcclxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6ICdsb2NhbCcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uOiB0cnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gVmFsaWRhdGUgaW1wb3J0IGRhdGFcclxuICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlSW1wb3J0RGF0YShpbXBvcnREYXRhLCBlcnJvcnMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW1wb3J0IGRhdGEgZm9ybWF0JyxcclxuICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgcmVzdWx0czogW10sXHJcbiAgICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnaW1wb3J0LWRhdGEnLFxyXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogaXNLViA/ICdrdicgOiAnbG9jYWwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSW1wb3J0IGFsbCBkYXRhXHJcbiAgICAgIGF3YWl0IHRoaXMuaW1wb3J0QWxsRGF0YShpbXBvcnREYXRhLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGVycm9ycy5sZW5ndGggPT09IDA7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdWNjZXNzIFxyXG4gICAgICAgID8gYFN1Y2Nlc3NmdWxseSBpbXBvcnRlZCBkYXRhIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgXHJcbiAgICAgICAgOiBgSW1wb3J0IGRhdGEgY29tcGxldGVkIHdpdGggJHtlcnJvcnMubGVuZ3RofSBlcnJvcnMgLSAke3Jlc3VsdHMubGVuZ3RofSBvcGVyYXRpb25zIGNvbXBsZXRlZGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW0ltcG9ydERhdGFXb3JrZmxvd10g4pyFIEltcG9ydCBkYXRhIG9wZXJhdGlvbiBjb21wbGV0ZWQ6ICR7bWVzc2FnZX1gKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzcyxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlc3VsdHMsXHJcbiAgICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgICBvcGVyYXRpb246ICdpbXBvcnQtZGF0YScsXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogaXNLViA/ICdrdicgOiAnbG9jYWwnXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tJbXBvcnREYXRhV29ya2Zsb3ddIOKdjCBJbXBvcnQgZGF0YSBvcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBgSW1wb3J0IGRhdGEgb3BlcmF0aW9uIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlc3VsdHM6IFtdLFxyXG4gICAgICAgICAgZXJyb3JzOiBbZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciddLFxyXG4gICAgICAgICAgb3BlcmF0aW9uOiAnaW1wb3J0LWRhdGEnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6ICd1bmtub3duJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVmFsaWRhdGUgaW1wb3J0IGRhdGEgZm9ybWF0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgdmFsaWRhdGVJbXBvcnREYXRhKGltcG9ydERhdGE6IGFueSwgZXJyb3JzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFpbXBvcnREYXRhIHx8IHR5cGVvZiBpbXBvcnREYXRhICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKCdJbXBvcnQgZGF0YSBtdXN0IGJlIGFuIG9iamVjdCcpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFpbXBvcnREYXRhLmVudGl0aWVzIHx8IHR5cGVvZiBpbXBvcnREYXRhLmVudGl0aWVzICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKCdJbXBvcnQgZGF0YSBtdXN0IGhhdmUgZW50aXRpZXMgcHJvcGVydHknKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlcXVpcmVkRW50aXR5VHlwZXMgPSBbJ3Rhc2tzJywgJ2l0ZW1zJywgJ3NhbGVzJywgJ2ZpbmFuY2lhbHMnLCAnY2hhcmFjdGVycycsICdwbGF5ZXJzJywgJ3NpdGVzJ107XHJcbiAgICAgIGZvciAoY29uc3QgZW50aXR5VHlwZSBvZiByZXF1aXJlZEVudGl0eVR5cGVzKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGltcG9ydERhdGEuZW50aXRpZXNbZW50aXR5VHlwZV0pKSB7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChgSW1wb3J0IGRhdGEgbXVzdCBoYXZlICR7ZW50aXR5VHlwZX0gYXMgYW4gYXJyYXlgKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbXBvcnREYXRhLmxpbmtzKSkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKCdJbXBvcnQgZGF0YSBtdXN0IGhhdmUgbGlua3MgYXMgYW4gYXJyYXknKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghaW1wb3J0RGF0YS5sb2dzIHx8IHR5cGVvZiBpbXBvcnREYXRhLmxvZ3MgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgZXJyb3JzLnB1c2goJ0ltcG9ydCBkYXRhIG11c3QgaGF2ZSBsb2dzIHByb3BlcnR5Jyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZXR0bGVtZW50cyBhcmUgb3B0aW9uYWwgcmVmZXJlbmNlIGRhdGFcclxuICAgICAgaWYgKGltcG9ydERhdGEuc2V0dGxlbWVudHMgJiYgIUFycmF5LmlzQXJyYXkoaW1wb3J0RGF0YS5zZXR0bGVtZW50cykpIHtcclxuICAgICAgICBlcnJvcnMucHVzaCgnSW1wb3J0IGRhdGEgc2V0dGxlbWVudHMgbXVzdCBiZSBhbiBhcnJheSBpZiBwcmVzZW50Jyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGVycm9ycy5wdXNoKGBGYWlsZWQgdG8gdmFsaWRhdGUgaW1wb3J0IGRhdGE6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogSW1wb3J0IGFsbCBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgaW1wb3J0QWxsRGF0YShpbXBvcnREYXRhOiBhbnksIHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW0ltcG9ydERhdGFXb3JrZmxvd10g8J+TpSBJbXBvcnRpbmcgYWxsIGRhdGEuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEltcG9ydCBhbGwgZW50aXR5IHR5cGVzXHJcbiAgICAgIGNvbnN0IGVudGl0eVR5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcyddO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBlbnRpdHlUeXBlIG9mIGVudGl0eVR5cGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuaW1wb3J0RW50aXR5VHlwZShlbnRpdHlUeXBlLCBpbXBvcnREYXRhLmVudGl0aWVzW2VudGl0eVR5cGVdLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gaW1wb3J0ICR7ZW50aXR5VHlwZX06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSW1wb3J0IHNldHRsZW1lbnRzIGFzIHJlZmVyZW5jZSBkYXRhIChpZiBwcmVzZW50KVxyXG4gICAgICBpZiAoaW1wb3J0RGF0YS5zZXR0bGVtZW50cyAmJiBBcnJheS5pc0FycmF5KGltcG9ydERhdGEuc2V0dGxlbWVudHMpKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbXBvcnRTZXR0bGVtZW50cyhpbXBvcnREYXRhLnNldHRsZW1lbnRzLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbXBvcnQgbGlua3NcclxuICAgICAgYXdhaXQgdGhpcy5pbXBvcnRMaW5rcyhpbXBvcnREYXRhLmxpbmtzLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gSW1wb3J0IGxvZ3NcclxuICAgICAgYXdhaXQgdGhpcy5pbXBvcnRMb2dzKGltcG9ydERhdGEubG9ncywgcmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIHJlc3VsdHMucHVzaChgSW1wb3J0ZWQgZGF0YSBmb3IgJHtlbnRpdHlUeXBlcy5sZW5ndGh9IGVudGl0eSB0eXBlc2ApO1xyXG4gICAgICBjb25zb2xlLmxvZyhgW0ltcG9ydERhdGFXb3JrZmxvd10g4pyFIEltcG9ydGVkIGFsbCBkYXRhYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGltcG9ydCBhbGwgZGF0YTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBJbXBvcnQgc3BlY2lmaWMgZW50aXR5IHR5cGVcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBpbXBvcnRFbnRpdHlUeXBlKGVudGl0eVR5cGU6IHN0cmluZywgZW50aXRpZXM6IGFueVtdLCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFlbnRpdGllcyB8fCBlbnRpdGllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHRzLnB1c2goYE5vICR7ZW50aXR5VHlwZX0gZW50aXRpZXMgdG8gaW1wb3J0YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciBleGlzdGluZyBlbnRpdGllcyBmb3IgdGhpcyB0eXBlXHJcbiAgICAgIGNvbnN0IGluZGV4S2V5ID0gYnVpbGRJbmRleEtleShlbnRpdHlUeXBlKTtcclxuICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBhd2FpdCBrdi5zbWVtYmVycyhpbmRleEtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXhpc3RpbmdJZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRhdGFLZXlzID0gZXhpc3RpbmdJZHMubWFwKGlkID0+IGJ1aWxkRGF0YUtleShlbnRpdHlUeXBlLCBpZCkpO1xyXG4gICAgICAgIGF3YWl0IGt2LmRlbCguLi5kYXRhS2V5cyk7XHJcbiAgICAgICAgYXdhaXQga3YuZGVsKGluZGV4S2V5KTtcclxuICAgICAgICByZXN1bHRzLnB1c2goYENsZWFyZWQgJHtleGlzdGluZ0lkcy5sZW5ndGh9IGV4aXN0aW5nICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSW1wb3J0IGVhY2ggZW50aXR5XHJcbiAgICAgIGxldCBpbXBvcnRlZENvdW50ID0gMDtcclxuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKCFlbnRpdHkuaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDimqDvuI8gU2tpcHBpbmcgJHtlbnRpdHlUeXBlfSBlbnRpdHkgd2l0aG91dCBJRDpgLCBlbnRpdHkpO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgZGF0YUtleSA9IGJ1aWxkRGF0YUtleShlbnRpdHlUeXBlLCBlbnRpdHkuaWQpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2V0KGRhdGFLZXksIEpTT04uc3RyaW5naWZ5KGVudGl0eSkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBZGQgdG8gaW5kZXhcclxuICAgICAgICAgIGF3YWl0IGt2LnNhZGQoaW5kZXhLZXksIGVudGl0eS5pZCk7XHJcbiAgICAgICAgICBpbXBvcnRlZENvdW50Kys7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgW0ltcG9ydERhdGFXb3JrZmxvd10g4pqg77iPIEZhaWxlZCB0byBpbXBvcnQgJHtlbnRpdHlUeXBlfSBlbnRpdHk6YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBJbXBvcnRlZCAke2ltcG9ydGVkQ291bnR9ICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgY29uc29sZS5sb2coYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKchSBJbXBvcnRlZCAke2ltcG9ydGVkQ291bnR9ICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gaW1wb3J0ICR7ZW50aXR5VHlwZX06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogSW1wb3J0IGxpbmtzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgaW1wb3J0TGlua3MobGlua3M6IGFueVtdLCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFsaW5rcyB8fCBsaW5rcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXN1bHRzLnB1c2goJ05vIGxpbmtzIHRvIGltcG9ydCcpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgbGlua3NcclxuICAgICAgY29uc3QgbGlua3NJbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoJ2xpbmtzJyk7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nTGlua0lkcyA9IGF3YWl0IGt2LnNtZW1iZXJzKGxpbmtzSW5kZXhLZXkpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGV4aXN0aW5nTGlua0lkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgbGlua0tleXMgPSBleGlzdGluZ0xpbmtJZHMubWFwKGlkID0+IGBsaW5rczpsaW5rOiR7aWR9YCk7XHJcbiAgICAgICAgYXdhaXQga3YuZGVsKC4uLmxpbmtLZXlzKTtcclxuICAgICAgICBhd2FpdCBrdi5kZWwobGlua3NJbmRleEtleSk7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkICR7ZXhpc3RpbmdMaW5rSWRzLmxlbmd0aH0gZXhpc3RpbmcgbGlua3NgKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gSW1wb3J0IGVhY2ggbGlua1xyXG4gICAgICBsZXQgaW1wb3J0ZWRDb3VudCA9IDA7XHJcbiAgICAgIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBpZiAoIWxpbmsuaWQpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDimqDvuI8gU2tpcHBpbmcgbGluayB3aXRob3V0IElEOmAsIGxpbmspO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgbGlua0tleSA9IGBsaW5rczpsaW5rOiR7bGluay5pZH1gO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2V0KGxpbmtLZXksIEpTT04uc3RyaW5naWZ5KGxpbmspKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWRkIHRvIGxpbmtzIGluZGV4XHJcbiAgICAgICAgICBhd2FpdCBrdi5zYWRkKGxpbmtzSW5kZXhLZXksIGxpbmsuaWQpO1xyXG4gICAgICAgICAgaW1wb3J0ZWRDb3VudCsrO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKaoO+4jyBGYWlsZWQgdG8gaW1wb3J0IGxpbms6YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmVzdWx0cy5wdXNoKGBJbXBvcnRlZCAke2ltcG9ydGVkQ291bnR9IGxpbmtzYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDinIUgSW1wb3J0ZWQgJHtpbXBvcnRlZENvdW50fSBsaW5rc2ApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBpbXBvcnQgbGlua3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogSW1wb3J0IGxvZ3NcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBpbXBvcnRMb2dzKGxvZ3M6IGFueSwgcmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGxvZ1R5cGVzID0gWyd0YXNrcycsICdpdGVtcycsICdzYWxlcycsICdmaW5hbmNpYWxzJywgJ2NoYXJhY3RlcnMnLCAncGxheWVycycsICdzaXRlcycsICdsaW5rcyddO1xyXG4gICAgICBcclxuICAgICAgZm9yIChjb25zdCBsb2dUeXBlIG9mIGxvZ1R5cGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGxvZ0VudHJpZXMgPSBsb2dzW2xvZ1R5cGVdIHx8IFtdO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAobG9nRW50cmllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBObyAke2xvZ1R5cGV9IGxvZyBlbnRyaWVzIHRvIGltcG9ydGApO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgbG9ncyBmb3IgdGhpcyB0eXBlXHJcbiAgICAgICAgICBjb25zdCBsb2dLZXkgPSBidWlsZExvZ0tleShsb2dUeXBlKTtcclxuICAgICAgICAgIGF3YWl0IGt2LmRlbChsb2dLZXkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBJbXBvcnQgZWFjaCBsb2cgZW50cnlcclxuICAgICAgICAgIGZvciAoY29uc3QgbG9nRW50cnkgb2YgbG9nRW50cmllcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGF3YWl0IGt2LmxwdXNoKGxvZ0tleSwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKaoO+4jyBGYWlsZWQgdG8gaW1wb3J0ICR7bG9nVHlwZX0gbG9nIGVudHJ5OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goYEltcG9ydGVkICR7bG9nRW50cmllcy5sZW5ndGh9ICR7bG9nVHlwZX0gbG9nIGVudHJpZXNgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS53YXJuKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDimqDvuI8gRmFpbGVkIHRvIGltcG9ydCAke2xvZ1R5cGV9IGxvZ3M6YCwgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKchSBJbXBvcnRlZCBsb2dzIGZvciAke2xvZ1R5cGVzLmxlbmd0aH0gbG9nIHR5cGVzYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGltcG9ydCBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW0ltcG9ydERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbXBvcnQgc2V0dGxlbWVudHMgYXMgcmVmZXJlbmNlIGRhdGEgKG5vdCBhIGNvcmUgZW50aXR5KVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGltcG9ydFNldHRsZW1lbnRzKHNldHRsZW1lbnRzOiBhbnlbXSwgcmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghc2V0dGxlbWVudHMgfHwgc2V0dGxlbWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKCdObyBzZXR0bGVtZW50cyB0byBpbXBvcnQnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbSW1wb3J0RGF0YVdvcmtmbG93XSDwn5OlIEltcG9ydGluZyBzZXR0bGVtZW50cyBhcyByZWZlcmVuY2UgZGF0YS4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2xlYXIgZXhpc3Rpbmcgc2V0dGxlbWVudHNcclxuICAgICAgY29uc3Qgc2V0dGxlbWVudHNJbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoJ3NldHRsZW1lbnRzJyk7XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nU2V0dGxlbWVudElkcyA9IGF3YWl0IGt2LnNtZW1iZXJzKHNldHRsZW1lbnRzSW5kZXhLZXkpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGV4aXN0aW5nU2V0dGxlbWVudElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YUtleXMgPSBleGlzdGluZ1NldHRsZW1lbnRJZHMubWFwKGlkID0+IGJ1aWxkRGF0YUtleSgnc2V0dGxlbWVudHMnLCBpZCkpO1xyXG4gICAgICAgIGF3YWl0IGt2LmRlbCguLi5kYXRhS2V5cyk7XHJcbiAgICAgICAgYXdhaXQga3YuZGVsKHNldHRsZW1lbnRzSW5kZXhLZXkpO1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChgQ2xlYXJlZCAke2V4aXN0aW5nU2V0dGxlbWVudElkcy5sZW5ndGh9IGV4aXN0aW5nIHNldHRsZW1lbnRzYCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEltcG9ydCBlYWNoIHNldHRsZW1lbnRcclxuICAgICAgZm9yIChjb25zdCBzZXR0bGVtZW50IG9mIHNldHRsZW1lbnRzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSBidWlsZERhdGFLZXkoJ3NldHRsZW1lbnRzJywgc2V0dGxlbWVudC5pZCk7XHJcbiAgICAgICAgICBhd2FpdCBrdi5zZXQoZGF0YUtleSwgSlNPTi5zdHJpbmdpZnkoc2V0dGxlbWVudCkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBZGQgdG8gc2V0dGxlbWVudHMgaW5kZXhcclxuICAgICAgICAgIGF3YWl0IGt2LnNhZGQoc2V0dGxlbWVudHNJbmRleEtleSwgc2V0dGxlbWVudC5pZCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgW0ltcG9ydERhdGFXb3JrZmxvd10g4pqg77iPIEZhaWxlZCB0byBpbXBvcnQgc2V0dGxlbWVudCAke3NldHRsZW1lbnQuaWR9OmAsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJlc3VsdHMucHVzaChgSW1wb3J0ZWQgJHtzZXR0bGVtZW50cy5sZW5ndGh9IHNldHRsZW1lbnRzIGFzIHJlZmVyZW5jZSBkYXRhYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbSW1wb3J0RGF0YVdvcmtmbG93XSDinIUgSW1wb3J0ZWQgJHtzZXR0bGVtZW50cy5sZW5ndGh9IHNldHRsZW1lbnRzYCk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGltcG9ydCBzZXR0bGVtZW50czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtJbXBvcnREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsia3YiLCJidWlsZERhdGFLZXkiLCJidWlsZEluZGV4S2V5IiwiYnVpbGRMb2dLZXkiLCJJbXBvcnREYXRhV29ya2Zsb3ciLCJleGVjdXRlIiwiaW1wb3J0RGF0YSIsImNvbnNvbGUiLCJsb2ciLCJpc0tWIiwiQm9vbGVhbiIsInByb2Nlc3MiLCJlbnYiLCJLVl9SRVNUX0FQSV9VUkwiLCJpc1NlcnZlciIsInJlc3VsdHMiLCJlcnJvcnMiLCJzdWNjZXNzIiwibWVzc2FnZSIsImRhdGEiLCJvcGVyYXRpb24iLCJlbnZpcm9ubWVudCIsInJlcXVpcmVzQ2xpZW50RXhlY3V0aW9uIiwidmFsaWRhdGVJbXBvcnREYXRhIiwiaW1wb3J0QWxsRGF0YSIsImxlbmd0aCIsImVycm9yIiwiRXJyb3IiLCJwdXNoIiwiZW50aXRpZXMiLCJyZXF1aXJlZEVudGl0eVR5cGVzIiwiZW50aXR5VHlwZSIsIkFycmF5IiwiaXNBcnJheSIsImxpbmtzIiwibG9ncyIsInNldHRsZW1lbnRzIiwiZW50aXR5VHlwZXMiLCJpbXBvcnRFbnRpdHlUeXBlIiwiZXJyb3JNc2ciLCJpbXBvcnRTZXR0bGVtZW50cyIsImltcG9ydExpbmtzIiwiaW1wb3J0TG9ncyIsImluZGV4S2V5IiwiZXhpc3RpbmdJZHMiLCJzbWVtYmVycyIsImRhdGFLZXlzIiwibWFwIiwiaWQiLCJkZWwiLCJpbXBvcnRlZENvdW50IiwiZW50aXR5Iiwid2FybiIsImRhdGFLZXkiLCJzZXQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2FkZCIsImxpbmtzSW5kZXhLZXkiLCJleGlzdGluZ0xpbmtJZHMiLCJsaW5rS2V5cyIsImxpbmsiLCJsaW5rS2V5IiwibG9nVHlwZXMiLCJsb2dUeXBlIiwibG9nRW50cmllcyIsImxvZ0tleSIsImxvZ0VudHJ5IiwibHB1c2giLCJzZXR0bGVtZW50c0luZGV4S2V5IiwiZXhpc3RpbmdTZXR0bGVtZW50SWRzIiwic2V0dGxlbWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/import-data-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/index.ts":
/*!*************************************!*\
  !*** ./workflows/settings/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BackfillLogsWorkflow: () => (/* reexport safe */ _backfill_logs_workflow__WEBPACK_IMPORTED_MODULE_3__.BackfillLogsWorkflow),\n/* harmony export */   ClearCacheWorkflow: () => (/* reexport safe */ _clear_cache_workflow__WEBPACK_IMPORTED_MODULE_2__.ClearCacheWorkflow),\n/* harmony export */   ClearLogsWorkflow: () => (/* reexport safe */ _clear_logs_workflow__WEBPACK_IMPORTED_MODULE_1__.ClearLogsWorkflow),\n/* harmony export */   ExportDataWorkflow: () => (/* reexport safe */ _export_data_workflow__WEBPACK_IMPORTED_MODULE_4__.ExportDataWorkflow),\n/* harmony export */   ImportDataWorkflow: () => (/* reexport safe */ _import_data_workflow__WEBPACK_IMPORTED_MODULE_5__.ImportDataWorkflow),\n/* harmony export */   ResetDataWorkflow: () => (/* reexport safe */ _reset_data_workflow__WEBPACK_IMPORTED_MODULE_0__.ResetDataWorkflow),\n/* harmony export */   SeedDataWorkflow: () => (/* reexport safe */ _seed_data_workflow__WEBPACK_IMPORTED_MODULE_6__.SeedDataWorkflow)\n/* harmony export */ });\n/* harmony import */ var _reset_data_workflow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reset-data-workflow */ \"(rsc)/./workflows/settings/reset-data-workflow.ts\");\n/* harmony import */ var _clear_logs_workflow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./clear-logs-workflow */ \"(rsc)/./workflows/settings/clear-logs-workflow.ts\");\n/* harmony import */ var _clear_cache_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./clear-cache-workflow */ \"(rsc)/./workflows/settings/clear-cache-workflow.ts\");\n/* harmony import */ var _backfill_logs_workflow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./backfill-logs-workflow */ \"(rsc)/./workflows/settings/backfill-logs-workflow.ts\");\n/* harmony import */ var _export_data_workflow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./export-data-workflow */ \"(rsc)/./workflows/settings/export-data-workflow.ts\");\n/* harmony import */ var _import_data_workflow__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./import-data-workflow */ \"(rsc)/./workflows/settings/import-data-workflow.ts\");\n/* harmony import */ var _seed_data_workflow__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./seed-data-workflow */ \"(rsc)/./workflows/settings/seed-data-workflow.ts\");\n// workflows/settings/index.ts\n// Settings workflows barrel export\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSw4QkFBOEI7QUFDOUIsbUNBQW1DO0FBRXVCO0FBQ0E7QUFDRTtBQUNJO0FBQ0o7QUFDQTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8uL3dvcmtmbG93cy9zZXR0aW5ncy9pbmRleC50cz83MTg1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHdvcmtmbG93cy9zZXR0aW5ncy9pbmRleC50c1xyXG4vLyBTZXR0aW5ncyB3b3JrZmxvd3MgYmFycmVsIGV4cG9ydFxyXG5cclxuZXhwb3J0IHsgUmVzZXREYXRhV29ya2Zsb3cgfSBmcm9tICcuL3Jlc2V0LWRhdGEtd29ya2Zsb3cnO1xyXG5leHBvcnQgeyBDbGVhckxvZ3NXb3JrZmxvdyB9IGZyb20gJy4vY2xlYXItbG9ncy13b3JrZmxvdyc7XHJcbmV4cG9ydCB7IENsZWFyQ2FjaGVXb3JrZmxvdyB9IGZyb20gJy4vY2xlYXItY2FjaGUtd29ya2Zsb3cnO1xyXG5leHBvcnQgeyBCYWNrZmlsbExvZ3NXb3JrZmxvdyB9IGZyb20gJy4vYmFja2ZpbGwtbG9ncy13b3JrZmxvdyc7XHJcbmV4cG9ydCB7IEV4cG9ydERhdGFXb3JrZmxvdyB9IGZyb20gJy4vZXhwb3J0LWRhdGEtd29ya2Zsb3cnO1xyXG5leHBvcnQgeyBJbXBvcnREYXRhV29ya2Zsb3cgfSBmcm9tICcuL2ltcG9ydC1kYXRhLXdvcmtmbG93JztcclxuZXhwb3J0IHsgU2VlZERhdGFXb3JrZmxvdyB9IGZyb20gJy4vc2VlZC1kYXRhLXdvcmtmbG93JztcclxuXHJcbi8vIENvbW1vbiB0eXBlc1xyXG5leHBvcnQgdHlwZSB7IFNldHRpbmdzUmVzdWx0IH0gZnJvbSAnLi9yZXNldC1kYXRhLXdvcmtmbG93JztcclxuZXhwb3J0IHR5cGUgeyBSZXNldE9wdGlvbnMgfSBmcm9tICcuL3Jlc2V0LWRhdGEtd29ya2Zsb3cnO1xyXG4iXSwibmFtZXMiOlsiUmVzZXREYXRhV29ya2Zsb3ciLCJDbGVhckxvZ3NXb3JrZmxvdyIsIkNsZWFyQ2FjaGVXb3JrZmxvdyIsIkJhY2tmaWxsTG9nc1dvcmtmbG93IiwiRXhwb3J0RGF0YVdvcmtmbG93IiwiSW1wb3J0RGF0YVdvcmtmbG93IiwiU2VlZERhdGFXb3JrZmxvdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/index.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/reset-data-workflow.ts":
/*!***************************************************!*\
  !*** ./workflows/settings/reset-data-workflow.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ResetDataWorkflow: () => (/* binding */ ResetDataWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/reset-data-workflow.ts\n// Reset Data Workflow for KV-only architecture\n\n\nclass ResetDataWorkflow {\n    /**\r\n   * Execute reset data operation\r\n   */ static async execute(mode = \"defaults\") {\n        try {\n            console.log(`[ResetDataWorkflow] 🔄 Starting reset data operation (mode: ${mode})...`);\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[ResetDataWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[ResetDataWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[ResetDataWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Reset requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side reset required for local environment\"\n                        ],\n                        errors: [],\n                        mode,\n                        environment: \"local\",\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Handle client-side execution for localhost\n            if (!isKV && !isServer) {\n                console.log(`[ResetDataWorkflow] 🖥️ Running client-side reset for localhost...`);\n                return await this.executeClientSideReset(mode, results, errors);\n            }\n            // Define reset options\n            const options = {\n                mode,\n                seedSites: mode === \"defaults\",\n                preserveLogs: false\n            };\n            // Clear all entity data\n            await this.clearAllEntityData(results, errors);\n            // Clear all links\n            await this.clearAllLinks(results, errors);\n            // Clear logs if not preserving\n            if (!options.preserveLogs) {\n                await this.clearAllLogs(results, errors);\n            }\n            // Seed default data if requested\n            if (options.seedSites) {\n                await this.seedDefaultSites(results, errors);\n            }\n            const success = errors.length === 0;\n            const message = success ? `Successfully reset data (${mode} mode) - ${results.length} operations completed` : `Reset completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[ResetDataWorkflow] ✅ Reset data operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    mode,\n                    environment: isKV ? \"kv\" : \"local\"\n                }\n            };\n        } catch (error) {\n            console.error(\"[ResetDataWorkflow] ❌ Reset data operation failed:\", error);\n            return {\n                success: false,\n                message: `Reset data operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    mode,\n                    environment: \"unknown\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Clear all entity data from KV\r\n   */ static async clearAllEntityData(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDDD1️ Clearing all entity data...\");\n            const entityTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\"\n            ];\n            for (const entityType of entityTypes){\n                try {\n                    // Get all entity IDs from index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(entityType);\n                    const entityIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(indexKey);\n                    if (entityIds.length > 0) {\n                        // Delete all entity data\n                        const dataKeys = entityIds.map((id)=>(0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(entityType, id));\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...dataKeys);\n                        // Clear the index\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(indexKey);\n                        results.push(`Cleared ${entityIds.length} ${entityType} entities`);\n                        console.log(`[ResetDataWorkflow] ✅ Cleared ${entityIds.length} ${entityType} entities`);\n                    } else {\n                        results.push(`No ${entityType} entities to clear`);\n                    }\n                } catch (error) {\n                    const errorMsg = `Failed to clear ${entityType}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n        } catch (error) {\n            const errorMsg = `Failed to clear entity data: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Clear all links from KV\r\n   */ static async clearAllLinks(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDD17 Clearing all links...\");\n            // Get all link IDs\n            const linksIndexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"links\");\n            const linkIds = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.smembers(linksIndexKey);\n            if (linkIds.length > 0) {\n                // Delete all link data\n                const linkKeys = linkIds.map((id)=>`links:link:${id}`);\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...linkKeys);\n                // Clear the links index\n                await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(linksIndexKey);\n                // Clear all entity-specific link indexes\n                const entityTypes = [\n                    \"tasks\",\n                    \"items\",\n                    \"sales\",\n                    \"financials\",\n                    \"characters\",\n                    \"players\",\n                    \"sites\"\n                ];\n                for (const entityType of entityTypes){\n                    const entityLinkIndexPattern = `index:links:by-entity:${entityType}:*`;\n                    const entityLinkKeys = await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.keys(entityLinkIndexPattern);\n                    if (entityLinkKeys.length > 0) {\n                        await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(...entityLinkKeys);\n                    }\n                }\n                results.push(`Cleared ${linkIds.length} links`);\n                console.log(`[ResetDataWorkflow] ✅ Cleared ${linkIds.length} links`);\n            } else {\n                results.push(\"No links to clear\");\n            }\n        } catch (error) {\n            const errorMsg = `Failed to clear links: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Clear all logs from KV\r\n   */ static async clearAllLogs(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83D\\uDCDD Clearing all logs...\");\n            const logTypes = [\n                \"tasks\",\n                \"items\",\n                \"sales\",\n                \"financials\",\n                \"characters\",\n                \"players\",\n                \"sites\",\n                \"links\"\n            ];\n            for (const logType of logTypes){\n                try {\n                    const logKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildLogKey)(logType);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.del(logKey);\n                    results.push(`Cleared ${logType} logs`);\n                } catch (error) {\n                    const errorMsg = `Failed to clear ${logType} logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n        } catch (error) {\n            const errorMsg = `Failed to clear logs: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Seed default sites\r\n   */ static async seedDefaultSites(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83C\\uDF31 Seeding default sites...\");\n            const defaultSites = [\n                {\n                    id: \"home\",\n                    name: \"Home\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"feria-box\",\n                    name: \"Feria Box\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"digital-space\",\n                    name: \"Digital Space\",\n                    type: \"cloud\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Cloud\",\n                        location: null\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                }\n            ];\n            for (const site of defaultSites){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"sites\", site.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(site));\n                    // Add to sites index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"sites\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, site.id);\n                    results.push(`Seeded site: ${site.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed site ${site.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[ResetDataWorkflow] ✅ Seeded default sites\");\n        } catch (error) {\n            const errorMsg = `Failed to seed default sites: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Execute client-side reset for localhost (localStorage)\r\n   */ static async executeClientSideReset(mode, results, errors) {\n        try {\n            console.log(`[ResetDataWorkflow] 🖥️ Starting client-side reset (mode: ${mode})...`);\n            // Clear localStorage data\n            const keysToRemove = [];\n            // Find all data keys in localStorage\n            for(let i = 0; i < localStorage.length; i++){\n                const key = localStorage.key(i);\n                if (key && (key.startsWith(\"data:\") || key.startsWith(\"index:\") || key.startsWith(\"links:\") || key.startsWith(\"log:\") || key.startsWith(\"akiles:\"))) {\n                    keysToRemove.push(key);\n                }\n            }\n            // Remove all found keys\n            keysToRemove.forEach((key)=>{\n                localStorage.removeItem(key);\n                results.push(`Removed localStorage key: ${key}`);\n            });\n            // Seed default sites if in defaults mode\n            if (mode === \"defaults\") {\n                await this.seedDefaultSitesLocal(results, errors);\n            }\n            // Clear any cached data\n            if (\"caches\" in window) {\n                try {\n                    const cacheNames = await caches.keys();\n                    for (const cacheName of cacheNames){\n                        await caches.delete(cacheName);\n                        results.push(`Cleared cache: ${cacheName}`);\n                    }\n                } catch (cacheError) {\n                    console.warn(\"[ResetDataWorkflow] Cache clearing failed:\", cacheError);\n                }\n            }\n            console.log(`[ResetDataWorkflow] ✅ Client-side reset completed: ${results.length} operations`);\n            return {\n                success: errors.length === 0,\n                message: `Client-side reset completed (${mode} mode) - ${results.length} operations completed`,\n                data: {\n                    results,\n                    errors,\n                    mode,\n                    environment: \"local\"\n                }\n            };\n        } catch (error) {\n            const errorMsg = `Client-side reset failed: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n            return {\n                success: false,\n                message: errorMsg,\n                data: {\n                    results: [],\n                    errors,\n                    mode,\n                    environment: \"local\"\n                }\n            };\n        }\n    }\n    /**\r\n   * Seed default sites for localhost (localStorage)\r\n   */ static async seedDefaultSitesLocal(results, errors) {\n        try {\n            console.log(\"[ResetDataWorkflow] \\uD83C\\uDF31 Seeding default sites for localhost...\");\n            const defaultSites = [\n                {\n                    id: \"home\",\n                    name: \"Home\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"feria-box\",\n                    name: \"Feria Box\",\n                    type: \"physical\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Uvita\",\n                        location: {\n                            lat: 9.1500,\n                            lng: -83.7500\n                        }\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"digital-space\",\n                    name: \"Digital Space\",\n                    type: \"cloud\",\n                    status: \"active\",\n                    metadata: {\n                        settlement: \"Cloud\",\n                        location: null\n                    },\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                }\n            ];\n            for (const site of defaultSites){\n                try {\n                    // Store site data\n                    const dataKey = `data:sites:${site.id}`;\n                    localStorage.setItem(dataKey, JSON.stringify(site));\n                    // Add to sites index\n                    const indexKey = \"index:sites\";\n                    const existingIndex = localStorage.getItem(indexKey);\n                    const indexSet = new Set(existingIndex ? JSON.parse(existingIndex) : []);\n                    indexSet.add(site.id);\n                    localStorage.setItem(indexKey, JSON.stringify([\n                        ...indexSet\n                    ]));\n                    results.push(`Seeded localStorage site: ${site.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed localStorage site ${site.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[ResetDataWorkflow] ✅ Seeded default sites for localhost\");\n        } catch (error) {\n            const errorMsg = `Failed to seed default sites for localhost: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[ResetDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3MvcmVzZXQtZGF0YS13b3JrZmxvdy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw0Q0FBNEM7QUFDNUMsK0NBQStDO0FBRWY7QUFDaUU7QUFvQjFGLE1BQU1JO0lBRVg7O0dBRUMsR0FDRCxhQUFhQyxRQUFRQyxPQUEwQyxVQUFVLEVBQTJCO1FBQ2xHLElBQUk7WUFDRkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsNERBQTRELEVBQUVGLEtBQUssSUFBSSxDQUFDO1lBRXJGLE1BQU1HLE9BQU9DLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtZQUNoRCxNQUFNQyxXQUFXLGdCQUFrQjtZQUNuQyxNQUFNQyxVQUFvQixFQUFFO1lBQzVCLE1BQU1DLFNBQW1CLEVBQUU7WUFFM0JULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9DQUFvQyxFQUFFQyxPQUFPLG9CQUFvQixzQkFBc0IsQ0FBQztZQUNyR0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsaUNBQWlDLEVBQUVNLFdBQVcsV0FBVyxTQUFTLENBQUM7WUFFaEYsdURBQXVEO1lBQ3ZELElBQUksQ0FBQ0wsUUFBUUssVUFBVTtnQkFDckJQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZHQUE2RyxDQUFDO2dCQUMzSCxPQUFPO29CQUNMUyxTQUFTO29CQUNUQyxTQUFTO29CQUNUQyxNQUFNO3dCQUNKSixTQUFTOzRCQUFDO3lCQUFtRDt3QkFDN0RDLFFBQVEsRUFBRTt3QkFDVlY7d0JBQ0FjLGFBQWE7d0JBQ2JDLHlCQUF5QjtvQkFDM0I7Z0JBQ0Y7WUFDRjtZQUVBLDZDQUE2QztZQUM3QyxJQUFJLENBQUNaLFFBQVEsQ0FBQ0ssVUFBVTtnQkFDdEJQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtFQUFrRSxDQUFDO2dCQUNoRixPQUFPLE1BQU0sSUFBSSxDQUFDYyxzQkFBc0IsQ0FBQ2hCLE1BQU1TLFNBQVNDO1lBQzFEO1lBRUEsdUJBQXVCO1lBQ3ZCLE1BQU1PLFVBQXdCO2dCQUM1QmpC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T3VCLE9BQU87WUFDZCxNQUFNWSxXQUFXLENBQUMsNENBQTRDLEVBQUVaLGlCQUFpQkMsUUFBUUQsTUFBTWIsT0FBTyxHQUFHLGdCQUFnQixDQUFDO1lBQzFIRixPQUFPMEIsSUFBSSxDQUFDQztZQUNacEMsUUFBUXdCLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFWSxTQUFTLENBQUM7UUFDbkQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhlZ2FtZS1hZG1pbi8uL3dvcmtmbG93cy9zZXR0aW5ncy9yZXNldC1kYXRhLXdvcmtmbG93LnRzP2E0YTAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL3Jlc2V0LWRhdGEtd29ya2Zsb3cudHNcclxuLy8gUmVzZXQgRGF0YSBXb3JrZmxvdyBmb3IgS1Ytb25seSBhcmNoaXRlY3R1cmVcclxuXHJcbmltcG9ydCB7IGt2IH0gZnJvbSAnQHZlcmNlbC9rdic7XHJcbmltcG9ydCB7IGJ1aWxkRGF0YUtleSwgYnVpbGRJbmRleEtleSwgYnVpbGRMb2dLZXksIGJ1aWxkTGlua3NJbmRleEtleSB9IGZyb20gJ0AvZGF0YS1zdG9yZS9rZXlzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3NSZXN1bHQge1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIGRhdGE/OiB7XHJcbiAgICByZXN1bHRzOiBzdHJpbmdbXTtcclxuICAgIGVycm9yczogc3RyaW5nW107XHJcbiAgICBtb2RlOiBzdHJpbmc7XHJcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nO1xyXG4gICAgcmVxdWlyZXNDbGllbnRFeGVjdXRpb24/OiBib29sZWFuO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVzZXRPcHRpb25zIHtcclxuICBtb2RlOiAnY2xlYXInIHwgJ2RlZmF1bHRzJyB8ICdiYWNrZmlsbCc7XHJcbiAgc2VlZFNpdGVzOiBib29sZWFuO1xyXG4gIHByZXNlcnZlTG9nczogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlc2V0RGF0YVdvcmtmbG93IHtcclxuICBcclxuICAvKipcclxuICAgKiBFeGVjdXRlIHJlc2V0IGRhdGEgb3BlcmF0aW9uXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGV4ZWN1dGUobW9kZTogJ2NsZWFyJyB8ICdkZWZhdWx0cycgfCAnYmFja2ZpbGwnID0gJ2RlZmF1bHRzJyk6IFByb21pc2U8U2V0dGluZ3NSZXN1bHQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbUmVzZXREYXRhV29ya2Zsb3ddIPCflIQgU3RhcnRpbmcgcmVzZXQgZGF0YSBvcGVyYXRpb24gKG1vZGU6ICR7bW9kZX0pLi4uYCk7XHJcblxyXG4gICAgICBjb25zdCBpc0tWID0gQm9vbGVhbihwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9VUkwpO1xyXG4gICAgICBjb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnO1xyXG4gICAgICBjb25zdCByZXN1bHRzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g8J+Wpe+4jyBDb250ZXh0OiAke2lzU2VydmVyID8gJ1NlcnZlcicgOiAnQ2xpZW50J31gKTtcclxuXHJcbiAgICAgIC8vIEZvciBsb2NhbCBlbnZpcm9ubWVudCwgd2UgbmVlZCB0byBydW4gb24gY2xpZW50IHNpZGVcclxuICAgICAgaWYgKCFpc0tWICYmIGlzU2VydmVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g4pqg77iPIExvY2FsIGVudmlyb25tZW50IGRldGVjdGVkIG9uIHNlcnZlciAtIHJldHVybmluZyBpbnN0cnVjdGlvbiBmb3IgY2xpZW50LXNpZGUgZXhlY3V0aW9uYCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnUmVzZXQgcmVxdWlyZXMgY2xpZW50LXNpZGUgZXhlY3V0aW9uIGZvciBsb2NhbCBlbnZpcm9ubWVudCcsXHJcbiAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgcmVzZXQgcmVxdWlyZWQgZm9yIGxvY2FsIGVudmlyb25tZW50J10sXHJcbiAgICAgICAgICAgIGVycm9yczogW10sXHJcbiAgICAgICAgICAgIG1vZGUsXHJcbiAgICAgICAgICAgIGVudmlyb25tZW50OiAnbG9jYWwnLFxyXG4gICAgICAgICAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbjogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhbmRsZSBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsaG9zdFxyXG4gICAgICBpZiAoIWlzS1YgJiYgIWlzU2VydmVyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g8J+Wpe+4jyBSdW5uaW5nIGNsaWVudC1zaWRlIHJlc2V0IGZvciBsb2NhbGhvc3QuLi5gKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQ2xpZW50U2lkZVJlc2V0KG1vZGUsIHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIERlZmluZSByZXNldCBvcHRpb25zXHJcbiAgICAgIGNvbnN0IG9wdGlvbnM6IFJlc2V0T3B0aW9ucyA9IHtcclxuICAgICAgICBtb2RlLFxyXG4gICAgICAgIHNlZWRTaXRlczogbW9kZSA9PT0gJ2RlZmF1bHRzJyxcclxuICAgICAgICBwcmVzZXJ2ZUxvZ3M6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBDbGVhciBhbGwgZW50aXR5IGRhdGFcclxuICAgICAgYXdhaXQgdGhpcy5jbGVhckFsbEVudGl0eURhdGEocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENsZWFyIGFsbCBsaW5rc1xyXG4gICAgICBhd2FpdCB0aGlzLmNsZWFyQWxsTGlua3MocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENsZWFyIGxvZ3MgaWYgbm90IHByZXNlcnZpbmdcclxuICAgICAgaWYgKCFvcHRpb25zLnByZXNlcnZlTG9ncykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY2xlYXJBbGxMb2dzKHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFNlZWQgZGVmYXVsdCBkYXRhIGlmIHJlcXVlc3RlZFxyXG4gICAgICBpZiAob3B0aW9ucy5zZWVkU2l0ZXMpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlZWREZWZhdWx0U2l0ZXMocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGVycm9ycy5sZW5ndGggPT09IDA7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdWNjZXNzIFxyXG4gICAgICAgID8gYFN1Y2Nlc3NmdWxseSByZXNldCBkYXRhICgke21vZGV9IG1vZGUpIC0gJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9ucyBjb21wbGV0ZWRgXHJcbiAgICAgICAgOiBgUmVzZXQgY29tcGxldGVkIHdpdGggJHtlcnJvcnMubGVuZ3RofSBlcnJvcnMgLSAke3Jlc3VsdHMubGVuZ3RofSBvcGVyYXRpb25zIGNvbXBsZXRlZGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDinIUgUmVzZXQgZGF0YSBvcGVyYXRpb24gY29tcGxldGVkOiAke21lc3NhZ2V9YCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3MsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzLFxyXG4gICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgbW9kZSxcclxuICAgICAgICAgIGVudmlyb25tZW50OiBpc0tWID8gJ2t2JyA6ICdsb2NhbCdcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgUmVzZXQgZGF0YSBvcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBgUmVzZXQgZGF0YSBvcGVyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0czogW10sXHJcbiAgICAgICAgICBlcnJvcnM6IFtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ10sXHJcbiAgICAgICAgICBtb2RlLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6ICd1bmtub3duJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgYWxsIGVudGl0eSBkYXRhIGZyb20gS1ZcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBjbGVhckFsbEVudGl0eURhdGEocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbUmVzZXREYXRhV29ya2Zsb3ddIPCfl5HvuI8gQ2xlYXJpbmcgYWxsIGVudGl0eSBkYXRhLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBlbnRpdHlUeXBlcyA9IFsndGFza3MnLCAnaXRlbXMnLCAnc2FsZXMnLCAnZmluYW5jaWFscycsICdjaGFyYWN0ZXJzJywgJ3BsYXllcnMnLCAnc2l0ZXMnXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgZW50aXR5VHlwZSBvZiBlbnRpdHlUeXBlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBHZXQgYWxsIGVudGl0eSBJRHMgZnJvbSBpbmRleFxyXG4gICAgICAgICAgY29uc3QgaW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KGVudGl0eVR5cGUpO1xyXG4gICAgICAgICAgY29uc3QgZW50aXR5SWRzID0gYXdhaXQga3Yuc21lbWJlcnMoaW5kZXhLZXkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZW50aXR5SWRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gRGVsZXRlIGFsbCBlbnRpdHkgZGF0YVxyXG4gICAgICAgICAgICBjb25zdCBkYXRhS2V5cyA9IGVudGl0eUlkcy5tYXAoaWQgPT4gYnVpbGREYXRhS2V5KGVudGl0eVR5cGUsIGlkKSk7XHJcbiAgICAgICAgICAgIGF3YWl0IGt2LmRlbCguLi5kYXRhS2V5cyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgaW5kZXhcclxuICAgICAgICAgICAgYXdhaXQga3YuZGVsKGluZGV4S2V5KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChgQ2xlYXJlZCAke2VudGl0eUlkcy5sZW5ndGh9ICR7ZW50aXR5VHlwZX0gZW50aXRpZXNgKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g4pyFIENsZWFyZWQgJHtlbnRpdHlJZHMubGVuZ3RofSAke2VudGl0eVR5cGV9IGVudGl0aWVzYCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYE5vICR7ZW50aXR5VHlwZX0gZW50aXRpZXMgdG8gY2xlYXJgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyICR7ZW50aXR5VHlwZX06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtSZXNldERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gY2xlYXIgZW50aXR5IGRhdGE6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBDbGVhciBhbGwgbGlua3MgZnJvbSBLVlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGNsZWFyQWxsTGlua3MocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbUmVzZXREYXRhV29ya2Zsb3ddIPCflJcgQ2xlYXJpbmcgYWxsIGxpbmtzLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgYWxsIGxpbmsgSURzXHJcbiAgICAgIGNvbnN0IGxpbmtzSW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCdsaW5rcycpO1xyXG4gICAgICBjb25zdCBsaW5rSWRzID0gYXdhaXQga3Yuc21lbWJlcnMobGlua3NJbmRleEtleSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGlua0lkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gRGVsZXRlIGFsbCBsaW5rIGRhdGFcclxuICAgICAgICBjb25zdCBsaW5rS2V5cyA9IGxpbmtJZHMubWFwKGlkID0+IGBsaW5rczpsaW5rOiR7aWR9YCk7XHJcbiAgICAgICAgYXdhaXQga3YuZGVsKC4uLmxpbmtLZXlzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDbGVhciB0aGUgbGlua3MgaW5kZXhcclxuICAgICAgICBhd2FpdCBrdi5kZWwobGlua3NJbmRleEtleSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2xlYXIgYWxsIGVudGl0eS1zcGVjaWZpYyBsaW5rIGluZGV4ZXNcclxuICAgICAgICBjb25zdCBlbnRpdHlUeXBlcyA9IFsndGFza3MnLCAnaXRlbXMnLCAnc2FsZXMnLCAnZmluYW5jaWFscycsICdjaGFyYWN0ZXJzJywgJ3BsYXllcnMnLCAnc2l0ZXMnXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eVR5cGUgb2YgZW50aXR5VHlwZXMpIHtcclxuICAgICAgICAgIGNvbnN0IGVudGl0eUxpbmtJbmRleFBhdHRlcm4gPSBgaW5kZXg6bGlua3M6YnktZW50aXR5OiR7ZW50aXR5VHlwZX06KmA7XHJcbiAgICAgICAgICBjb25zdCBlbnRpdHlMaW5rS2V5cyA9IGF3YWl0IGt2LmtleXMoZW50aXR5TGlua0luZGV4UGF0dGVybik7XHJcbiAgICAgICAgICBpZiAoZW50aXR5TGlua0tleXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBhd2FpdCBrdi5kZWwoLi4uZW50aXR5TGlua0tleXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXN1bHRzLnB1c2goYENsZWFyZWQgJHtsaW5rSWRzLmxlbmd0aH0gbGlua3NgKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1Jlc2V0RGF0YVdvcmtmbG93XSDinIUgQ2xlYXJlZCAke2xpbmtJZHMubGVuZ3RofSBsaW5rc2ApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3VsdHMucHVzaCgnTm8gbGlua3MgdG8gY2xlYXInKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyIGxpbmtzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgYWxsIGxvZ3MgZnJvbSBLVlxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGNsZWFyQWxsTG9ncyhyZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tSZXNldERhdGFXb3JrZmxvd10g8J+TnSBDbGVhcmluZyBhbGwgbG9ncy4uLicpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbG9nVHlwZXMgPSBbJ3Rhc2tzJywgJ2l0ZW1zJywgJ3NhbGVzJywgJ2ZpbmFuY2lhbHMnLCAnY2hhcmFjdGVycycsICdwbGF5ZXJzJywgJ3NpdGVzJywgJ2xpbmtzJ107XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IGxvZ1R5cGUgb2YgbG9nVHlwZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgbG9nS2V5ID0gYnVpbGRMb2dLZXkobG9nVHlwZSk7XHJcbiAgICAgICAgICBhd2FpdCBrdi5kZWwobG9nS2V5KTtcclxuICAgICAgICAgIHJlc3VsdHMucHVzaChgQ2xlYXJlZCAke2xvZ1R5cGV9IGxvZ3NgKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIGNsZWFyICR7bG9nVHlwZX0gbG9nczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBjbGVhciBsb2dzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW1Jlc2V0RGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogU2VlZCBkZWZhdWx0IHNpdGVzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2VlZERlZmF1bHRTaXRlcyhyZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tSZXNldERhdGFXb3JrZmxvd10g8J+MsSBTZWVkaW5nIGRlZmF1bHQgc2l0ZXMuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRlZmF1bHRTaXRlcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2hvbWUnLFxyXG4gICAgICAgICAgbmFtZTogJ0hvbWUnLFxyXG4gICAgICAgICAgdHlwZTogJ3BoeXNpY2FsJyxcclxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXHJcbiAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBzZXR0bGVtZW50OiAnVXZpdGEnLFxyXG4gICAgICAgICAgICBsb2NhdGlvbjogeyBsYXQ6IDkuMTUwMCwgbG5nOiAtODMuNzUwMCB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbGlua3M6IFtdXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ2ZlcmlhLWJveCcsXHJcbiAgICAgICAgICBuYW1lOiAnRmVyaWEgQm94JyxcclxuICAgICAgICAgIHR5cGU6ICdwaHlzaWNhbCcsXHJcbiAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgc2V0dGxlbWVudDogJ1V2aXRhJyxcclxuICAgICAgICAgICAgbG9jYXRpb246IHsgbGF0OiA5LjE1MDAsIGxuZzogLTgzLjc1MDAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdkaWdpdGFsLXNwYWNlJyxcclxuICAgICAgICAgIG5hbWU6ICdEaWdpdGFsIFNwYWNlJyxcclxuICAgICAgICAgIHR5cGU6ICdjbG91ZCcsXHJcbiAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgc2V0dGxlbWVudDogJ0Nsb3VkJyxcclxuICAgICAgICAgICAgbG9jYXRpb246IG51bGxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICB9XHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGNvbnN0IHNpdGUgb2YgZGVmYXVsdFNpdGVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSBidWlsZERhdGFLZXkoJ3NpdGVzJywgc2l0ZS5pZCk7XHJcbiAgICAgICAgICBhd2FpdCBrdi5zZXQoZGF0YUtleSwgSlNPTi5zdHJpbmdpZnkoc2l0ZSkpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBZGQgdG8gc2l0ZXMgaW5kZXhcclxuICAgICAgICAgIGNvbnN0IGluZGV4S2V5ID0gYnVpbGRJbmRleEtleSgnc2l0ZXMnKTtcclxuICAgICAgICAgIGF3YWl0IGt2LnNhZGQoaW5kZXhLZXksIHNpdGUuaWQpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goYFNlZWRlZCBzaXRlOiAke3NpdGUubmFtZX1gKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIHNlZWQgc2l0ZSAke3NpdGUubmFtZX06ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtSZXNldERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnW1Jlc2V0RGF0YVdvcmtmbG93XSDinIUgU2VlZGVkIGRlZmF1bHQgc2l0ZXMnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIGRlZmF1bHQgc2l0ZXM6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXhlY3V0ZSBjbGllbnQtc2lkZSByZXNldCBmb3IgbG9jYWxob3N0IChsb2NhbFN0b3JhZ2UpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZXhlY3V0ZUNsaWVudFNpZGVSZXNldChtb2RlOiBzdHJpbmcsIHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTxTZXR0aW5nc1Jlc3VsdD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g8J+Wpe+4jyBTdGFydGluZyBjbGllbnQtc2lkZSByZXNldCAobW9kZTogJHttb2RlfSkuLi5gKTtcclxuXHJcbiAgICAgIC8vIENsZWFyIGxvY2FsU3RvcmFnZSBkYXRhXHJcbiAgICAgIGNvbnN0IGtleXNUb1JlbW92ZTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgIC8vIEZpbmQgYWxsIGRhdGEga2V5cyBpbiBsb2NhbFN0b3JhZ2VcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFN0b3JhZ2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xyXG4gICAgICAgIGlmIChrZXkgJiYgKFxyXG4gICAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ2RhdGE6JykgfHxcclxuICAgICAgICAgIGtleS5zdGFydHNXaXRoKCdpbmRleDonKSB8fFxyXG4gICAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ2xpbmtzOicpIHx8XHJcbiAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnbG9nOicpIHx8XHJcbiAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnYWtpbGVzOicpXHJcbiAgICAgICAgKSkge1xyXG4gICAgICAgICAga2V5c1RvUmVtb3ZlLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFJlbW92ZSBhbGwgZm91bmQga2V5c1xyXG4gICAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKGBSZW1vdmVkIGxvY2FsU3RvcmFnZSBrZXk6ICR7a2V5fWApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNlZWQgZGVmYXVsdCBzaXRlcyBpZiBpbiBkZWZhdWx0cyBtb2RlXHJcbiAgICAgIGlmIChtb2RlID09PSAnZGVmYXVsdHMnKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWVkRGVmYXVsdFNpdGVzTG9jYWwocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xlYXIgYW55IGNhY2hlZCBkYXRhXHJcbiAgICAgIGlmICgnY2FjaGVzJyBpbiB3aW5kb3cpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgY2FjaGVOYW1lcyA9IGF3YWl0IGNhY2hlcy5rZXlzKCk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhY2hlTmFtZSBvZiBjYWNoZU5hbWVzKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGNhY2hlcy5kZWxldGUoY2FjaGVOYW1lKTtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGBDbGVhcmVkIGNhY2hlOiAke2NhY2hlTmFtZX1gKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChjYWNoZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1tSZXNldERhdGFXb3JrZmxvd10gQ2FjaGUgY2xlYXJpbmcgZmFpbGVkOicsIGNhY2hlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coYFtSZXNldERhdGFXb3JrZmxvd10g4pyFIENsaWVudC1zaWRlIHJlc2V0IGNvbXBsZXRlZDogJHtyZXN1bHRzLmxlbmd0aH0gb3BlcmF0aW9uc2ApO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBlcnJvcnMubGVuZ3RoID09PSAwLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBDbGllbnQtc2lkZSByZXNldCBjb21wbGV0ZWQgKCR7bW9kZX0gbW9kZSkgLSAke3Jlc3VsdHMubGVuZ3RofSBvcGVyYXRpb25zIGNvbXBsZXRlZGAsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0cyxcclxuICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICAgIG1vZGUsXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ2xvY2FsJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBDbGllbnQtc2lkZSByZXNldCBmYWlsZWQ6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvck1zZyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzOiBbXSxcclxuICAgICAgICAgIGVycm9ycyxcclxuICAgICAgICAgIG1vZGUsXHJcbiAgICAgICAgICBlbnZpcm9ubWVudDogJ2xvY2FsJ1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNlZWQgZGVmYXVsdCBzaXRlcyBmb3IgbG9jYWxob3N0IChsb2NhbFN0b3JhZ2UpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2VlZERlZmF1bHRTaXRlc0xvY2FsKHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1Jlc2V0RGF0YVdvcmtmbG93XSDwn4yxIFNlZWRpbmcgZGVmYXVsdCBzaXRlcyBmb3IgbG9jYWxob3N0Li4uJyk7XHJcblxyXG4gICAgICBjb25zdCBkZWZhdWx0U2l0ZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdob21lJyxcclxuICAgICAgICAgIG5hbWU6ICdIb21lJyxcclxuICAgICAgICAgIHR5cGU6ICdwaHlzaWNhbCcsXHJcbiAgICAgICAgICBzdGF0dXM6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgc2V0dGxlbWVudDogJ1V2aXRhJyxcclxuICAgICAgICAgICAgbG9jYXRpb246IHsgbGF0OiA5LjE1MDAsIGxuZzogLTgzLjc1MDAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdmZXJpYS1ib3gnLFxyXG4gICAgICAgICAgbmFtZTogJ0ZlcmlhIEJveCcsXHJcbiAgICAgICAgICB0eXBlOiAncGh5c2ljYWwnLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIHNldHRsZW1lbnQ6ICdVdml0YScsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7IGxhdDogOS4xNTAwLCBsbmc6IC04My43NTAwIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICBsaW5rczogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiAnZGlnaXRhbC1zcGFjZScsXHJcbiAgICAgICAgICBuYW1lOiAnRGlnaXRhbCBTcGFjZScsXHJcbiAgICAgICAgICB0eXBlOiAnY2xvdWQnLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIHNldHRsZW1lbnQ6ICdDbG91ZCcsXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBudWxsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgbGlua3M6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgZm9yIChjb25zdCBzaXRlIG9mIGRlZmF1bHRTaXRlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAvLyBTdG9yZSBzaXRlIGRhdGFcclxuICAgICAgICAgIGNvbnN0IGRhdGFLZXkgPSBgZGF0YTpzaXRlczoke3NpdGUuaWR9YDtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGRhdGFLZXksIEpTT04uc3RyaW5naWZ5KHNpdGUpKTtcclxuXHJcbiAgICAgICAgICAvLyBBZGQgdG8gc2l0ZXMgaW5kZXhcclxuICAgICAgICAgIGNvbnN0IGluZGV4S2V5ID0gJ2luZGV4OnNpdGVzJztcclxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpbmRleEtleSk7XHJcbiAgICAgICAgICBjb25zdCBpbmRleFNldCA9IG5ldyBTZXQoZXhpc3RpbmdJbmRleCA/IEpTT04ucGFyc2UoZXhpc3RpbmdJbmRleCkgOiBbXSk7XHJcbiAgICAgICAgICBpbmRleFNldC5hZGQoc2l0ZS5pZCk7XHJcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpbmRleEtleSwgSlNPTi5zdHJpbmdpZnkoWy4uLmluZGV4U2V0XSkpO1xyXG5cclxuICAgICAgICAgIHJlc3VsdHMucHVzaChgU2VlZGVkIGxvY2FsU3RvcmFnZSBzaXRlOiAke3NpdGUubmFtZX1gKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIHNlZWQgbG9jYWxTdG9yYWdlIHNpdGUgJHtzaXRlLm5hbWV9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbUmVzZXREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ1tSZXNldERhdGFXb3JrZmxvd10g4pyFIFNlZWRlZCBkZWZhdWx0IHNpdGVzIGZvciBsb2NhbGhvc3QnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIGRlZmF1bHQgc2l0ZXMgZm9yIGxvY2FsaG9zdDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtSZXNldERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJrdiIsImJ1aWxkRGF0YUtleSIsImJ1aWxkSW5kZXhLZXkiLCJidWlsZExvZ0tleSIsIlJlc2V0RGF0YVdvcmtmbG93IiwiZXhlY3V0ZSIsIm1vZGUiLCJjb25zb2xlIiwibG9nIiwiaXNLViIsIkJvb2xlYW4iLCJwcm9jZXNzIiwiZW52IiwiS1ZfUkVTVF9BUElfVVJMIiwiaXNTZXJ2ZXIiLCJyZXN1bHRzIiwiZXJyb3JzIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJkYXRhIiwiZW52aXJvbm1lbnQiLCJyZXF1aXJlc0NsaWVudEV4ZWN1dGlvbiIsImV4ZWN1dGVDbGllbnRTaWRlUmVzZXQiLCJvcHRpb25zIiwic2VlZFNpdGVzIiwicHJlc2VydmVMb2dzIiwiY2xlYXJBbGxFbnRpdHlEYXRhIiwiY2xlYXJBbGxMaW5rcyIsImNsZWFyQWxsTG9ncyIsInNlZWREZWZhdWx0U2l0ZXMiLCJsZW5ndGgiLCJlcnJvciIsIkVycm9yIiwiZW50aXR5VHlwZXMiLCJlbnRpdHlUeXBlIiwiaW5kZXhLZXkiLCJlbnRpdHlJZHMiLCJzbWVtYmVycyIsImRhdGFLZXlzIiwibWFwIiwiaWQiLCJkZWwiLCJwdXNoIiwiZXJyb3JNc2ciLCJsaW5rc0luZGV4S2V5IiwibGlua0lkcyIsImxpbmtLZXlzIiwiZW50aXR5TGlua0luZGV4UGF0dGVybiIsImVudGl0eUxpbmtLZXlzIiwia2V5cyIsImxvZ1R5cGVzIiwibG9nVHlwZSIsImxvZ0tleSIsImRlZmF1bHRTaXRlcyIsIm5hbWUiLCJ0eXBlIiwic3RhdHVzIiwibWV0YWRhdGEiLCJzZXR0bGVtZW50IiwibG9jYXRpb24iLCJsYXQiLCJsbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwibGlua3MiLCJzaXRlIiwiZGF0YUtleSIsInNldCIsIkpTT04iLCJzdHJpbmdpZnkiLCJzYWRkIiwia2V5c1RvUmVtb3ZlIiwiaSIsImxvY2FsU3RvcmFnZSIsImtleSIsInN0YXJ0c1dpdGgiLCJmb3JFYWNoIiwicmVtb3ZlSXRlbSIsInNlZWREZWZhdWx0U2l0ZXNMb2NhbCIsIndpbmRvdyIsImNhY2hlTmFtZXMiLCJjYWNoZXMiLCJjYWNoZU5hbWUiLCJkZWxldGUiLCJjYWNoZUVycm9yIiwid2FybiIsInNldEl0ZW0iLCJleGlzdGluZ0luZGV4IiwiZ2V0SXRlbSIsImluZGV4U2V0IiwiU2V0IiwicGFyc2UiLCJhZGQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/reset-data-workflow.ts\n");

/***/ }),

/***/ "(rsc)/./workflows/settings/seed-data-workflow.ts":
/*!**************************************************!*\
  !*** ./workflows/settings/seed-data-workflow.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SeedDataWorkflow: () => (/* binding */ SeedDataWorkflow)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n/* harmony import */ var _data_store_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/data-store/keys */ \"(rsc)/./data-store/keys.ts\");\n// workflows/settings/seed-data-workflow.ts\n// Seed Data Workflow for KV-only architecture\n\n\nclass SeedDataWorkflow {\n    /**\r\n   * Execute seed data operation\r\n   */ static async execute(source = \"constants\") {\n        try {\n            console.log(`[SeedDataWorkflow] 🌱 Starting seed data operation (source: ${source})...`);\n            const isKV = Boolean(process.env.KV_REST_API_URL);\n            const isServer = \"undefined\" === \"undefined\";\n            const results = [];\n            const errors = [];\n            console.log(`[SeedDataWorkflow] 🌍 Environment: ${isKV ? \"KV (Production)\" : \"Local (Development)\"}`);\n            console.log(`[SeedDataWorkflow] 🖥️ Context: ${isServer ? \"Server\" : \"Client\"}`);\n            // For local environment, we need to run on client side\n            if (!isKV && isServer) {\n                console.log(`[SeedDataWorkflow] ⚠️ Local environment detected on server - returning instruction for client-side execution`);\n                return {\n                    success: true,\n                    message: \"Seed data requires client-side execution for local environment\",\n                    data: {\n                        results: [\n                            \"Client-side seed data required for local environment\"\n                        ],\n                        errors: [],\n                        operation: \"seed-data\",\n                        environment: \"local\",\n                        source,\n                        requiresClientExecution: true\n                    }\n                };\n            }\n            // Seed data based on source\n            if (source === \"constants\") {\n                await this.seedFromConstants(results, errors);\n            } else if (source === \"backup\") {\n                await this.seedFromBackup(results, errors);\n            }\n            const success = errors.length === 0;\n            const message = success ? `Successfully seeded data from ${source} - ${results.length} operations completed` : `Seed data completed with ${errors.length} errors - ${results.length} operations completed`;\n            console.log(`[SeedDataWorkflow] ✅ Seed data operation completed: ${message}`);\n            return {\n                success,\n                message,\n                data: {\n                    results,\n                    errors,\n                    operation: \"seed-data\",\n                    environment: isKV ? \"kv\" : \"local\",\n                    source\n                }\n            };\n        } catch (error) {\n            console.error(\"[SeedDataWorkflow] ❌ Seed data operation failed:\", error);\n            return {\n                success: false,\n                message: `Seed data operation failed: ${error instanceof Error ? error.message : \"Unknown error\"}`,\n                data: {\n                    results: [],\n                    errors: [\n                        error instanceof Error ? error.message : \"Unknown error\"\n                    ],\n                    operation: \"seed-data\",\n                    environment: \"unknown\",\n                    source\n                }\n            };\n        }\n    }\n    /**\r\n   * Seed data from constants\r\n   */ static async seedFromConstants(results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding data from constants...\");\n            // Seed default sites\n            await this.seedDefaultSites(results, errors);\n            // Seed default tasks\n            await this.seedDefaultTasks(results, errors);\n        } catch (error) {\n            const errorMsg = `Failed to seed from constants: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Seed data from backup\r\n   */ static async seedFromBackup(results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding data from backup...\");\n            // For now, just seed from constants as backup functionality would require\n            // reading backup files which is not implemented yet\n            results.push(\"Backup seeding not yet implemented, using constants instead\");\n            await this.seedFromConstants(results, errors);\n        } catch (error) {\n            const errorMsg = `Failed to seed from backup: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Seed default sites and settlements\r\n   */ static async seedDefaultSites(results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding default sites and settlements...\");\n            // Load sites-db.json data\n            const sitesDbData = await this.loadSitesDbData();\n            if (sitesDbData) {\n                // Seed settlements first\n                if (sitesDbData.settlements && Array.isArray(sitesDbData.settlements)) {\n                    await this.seedSettlements(sitesDbData.settlements, results, errors);\n                }\n                // Seed sites\n                if (sitesDbData.sites && Array.isArray(sitesDbData.sites)) {\n                    await this.seedSites(sitesDbData.sites, results, errors);\n                }\n            } else {\n                // Fallback to hardcoded data if sites-db.json not available\n                await this.seedFallbackSites(results, errors);\n            }\n            console.log(\"[SeedDataWorkflow] ✅ Seeded default sites\");\n        } catch (error) {\n            const errorMsg = `Failed to seed default sites: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Seed default tasks\r\n   */ static async seedDefaultTasks(results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding default tasks...\");\n            const defaultTasks = [\n                {\n                    id: \"welcome-task\",\n                    name: \"Welcome to TheGame\",\n                    description: \"Your first task in TheGame system\",\n                    type: \"strategy\",\n                    status: \"created\",\n                    priority: \"medium\",\n                    station: \"Strategy\",\n                    area: \"ADMIN\",\n                    progress: 0,\n                    dueDate: null,\n                    order: 1,\n                    cost: 0,\n                    revenue: 0,\n                    siteId: \"home\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                }\n            ];\n            for (const task of defaultTasks){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"tasks\", task.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(task));\n                    // Add to tasks index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"tasks\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, task.id);\n                    results.push(`Seeded task: ${task.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed task ${task.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[SeedDataWorkflow] ✅ Seeded default tasks\");\n        } catch (error) {\n            const errorMsg = `Failed to seed default tasks: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Load sites-db.json data\r\n   */ static async loadSitesDbData() {\n        try {\n            // Try to load from backup file\n            const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs */ \"fs\", 23));\n            const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n            const backupPath = path.join(process.cwd(), \"backups\", \"sites\", \"sites-db.json\");\n            if (fs.existsSync(backupPath)) {\n                const data = fs.readFileSync(backupPath, \"utf8\");\n                return JSON.parse(data);\n            }\n            return null;\n        } catch (error) {\n            console.warn(\"[SeedDataWorkflow] ⚠️ Could not load sites-db.json:\", error);\n            return null;\n        }\n    }\n    /**\r\n   * Seed settlements from sites-db.json\r\n   */ static async seedSettlements(settlements, results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding settlements...\");\n            for (const settlement of settlements){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"settlements\", settlement.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(settlement));\n                    // Add to settlements index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"settlements\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, settlement.id);\n                    results.push(`Seeded settlement: ${settlement.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed settlement ${settlement.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[SeedDataWorkflow] ✅ Seeded settlements\");\n        } catch (error) {\n            const errorMsg = `Failed to seed settlements: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Seed sites from sites-db.json\r\n   */ static async seedSites(sites, results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding sites...\");\n            for (const site of sites){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"sites\", site.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(site));\n                    // Add to sites index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"sites\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, site.id);\n                    results.push(`Seeded site: ${site.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed site ${site.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[SeedDataWorkflow] ✅ Seeded sites\");\n        } catch (error) {\n            const errorMsg = `Failed to seed sites: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n    /**\r\n   * Fallback sites seeding (hardcoded data)\r\n   */ static async seedFallbackSites(results, errors) {\n        try {\n            console.log(\"[SeedDataWorkflow] \\uD83C\\uDF31 Seeding fallback sites...\");\n            const defaultSites = [\n                {\n                    id: \"home\",\n                    name: \"Home\",\n                    description: \"Home base\",\n                    metadata: {\n                        type: \"PHYSICAL\",\n                        businessType: \"STORE\",\n                        settlementId: \"settlement-uvita\",\n                        googleMapsAddress: \"https://maps.app.goo.gl/...\"\n                    },\n                    isActive: true,\n                    status: \"active\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"feria-box\",\n                    name: \"Feria Box\",\n                    description: \"Feria sales location\",\n                    metadata: {\n                        type: \"PHYSICAL\",\n                        businessType: \"STORE\",\n                        settlementId: \"settlement-uvita\",\n                        googleMapsAddress: \"https://maps.app.goo.gl/...\"\n                    },\n                    isActive: true,\n                    status: \"active\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                },\n                {\n                    id: \"digital-space\",\n                    name: \"Digital Space\",\n                    description: \"Digital workspace\",\n                    metadata: {\n                        type: \"CLOUD\",\n                        digitalType: \"WEBSITE\"\n                    },\n                    isActive: true,\n                    status: \"active\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    links: []\n                }\n            ];\n            for (const site of defaultSites){\n                try {\n                    const dataKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildDataKey)(\"sites\", site.id);\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.set(dataKey, JSON.stringify(site));\n                    // Add to sites index\n                    const indexKey = (0,_data_store_keys__WEBPACK_IMPORTED_MODULE_0__.buildIndexKey)(\"sites\");\n                    await _vercel_kv__WEBPACK_IMPORTED_MODULE_1__.kv.sadd(indexKey, site.id);\n                    results.push(`Seeded fallback site: ${site.name}`);\n                } catch (error) {\n                    const errorMsg = `Failed to seed fallback site ${site.name}: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n                    errors.push(errorMsg);\n                    console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n                }\n            }\n            console.log(\"[SeedDataWorkflow] ✅ Seeded fallback sites\");\n        } catch (error) {\n            const errorMsg = `Failed to seed fallback sites: ${error instanceof Error ? error.message : \"Unknown error\"}`;\n            errors.push(errorMsg);\n            console.error(`[SeedDataWorkflow] ❌ ${errorMsg}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi93b3JrZmxvd3Mvc2V0dGluZ3Mvc2VlZC1kYXRhLXdvcmtmbG93LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDJDQUEyQztBQUMzQyw4Q0FBOEM7QUFFZDtBQUNnQztBQWV6RCxNQUFNRztJQUVYOztHQUVDLEdBQ0QsYUFBYUMsUUFBUUMsU0FBaUMsV0FBVyxFQUEyQjtRQUMxRixJQUFJO1lBQ0ZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDREQUE0RCxFQUFFRixPQUFPLElBQUksQ0FBQztZQUV2RixNQUFNRyxPQUFPQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGVBQWU7WUFDaEQsTUFBTUMsV0FBVyxnQkFBa0I7WUFDbkMsTUFBTUMsVUFBb0IsRUFBRTtZQUM1QixNQUFNQyxTQUFtQixFQUFFO1lBRTNCVCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRUMsT0FBTyxvQkFBb0Isc0JBQXNCLENBQUM7WUFDcEdGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGdDQUFnQyxFQUFFTSxXQUFXLFdBQVcsU0FBUyxDQUFDO1lBRS9FLHVEQUF1RDtZQUN2RCxJQUFJLENBQUNMLFFBQVFLLFVBQVU7Z0JBQ3JCUCxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0R0FBNEcsQ0FBQztnQkFDMUgsT0FBTztvQkFDTFMsU0FBUztvQkFDVEMsU0FBUztvQkFDVEMsTUFBTTt3QkFDSkosU0FBUzs0QkFBQzt5QkFBdUQ7d0JBQ2pFQyxRQUFRLEVBQUU7d0JBQ1ZJLFdBQVc7d0JBQ1hDLGFBQWE7d0JBQ2JmO3dCQUNBZ0IseUJBQXlCO29CQUMzQjtnQkFDRjtZQUNGO1lBRUEsNEJBQTRCO1lBQzVCLElBQUloQixXQUFXLGFBQWE7Z0JBQzFCLE1BQU0sSUFBSSxDQUFDaUIsaUJBQWlCLENBQUNSLFNBQVNDO1lBQ3hDLE9BQU8sSUFBSVYsV0FBVyxVQUFVO2dCQUM5QixNQUFNLElBQUksQ0FBQ2tCLGNBQWMsQ0FBQ1QsU0FBU0M7WUFDckM7WUFFQSxNQUFNQyxVQUFVRCxPQUFP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QixFQUFFK0MsS0FBS2xDLElBQUksQ0FBQyxFQUFFLEVBQUVqQixpQkFBaUJDLFFBQVFELE1BQU1SLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztvQkFDekhGLE9BQU9lLElBQUksQ0FBQ0Q7b0JBQ1p2QixRQUFRbUIsS0FBSyxDQUFDLENBQUMscUJBQXFCLEVBQUVJLFNBQVMsQ0FBQztnQkFDbEQ7WUFDRjtZQUVBdkIsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPa0IsT0FBTztZQUNkLE1BQU1JLFdBQVcsQ0FBQywrQkFBK0IsRUFBRUosaUJBQWlCQyxRQUFRRCxNQUFNUixPQUFPLEdBQUcsZ0JBQWdCLENBQUM7WUFDN0dGLE9BQU9lLElBQUksQ0FBQ0Q7WUFDWnZCLFFBQVFtQixLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRUksU0FBUyxDQUFDO1FBQ2xEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RoZWdhbWUtYWRtaW4vLi93b3JrZmxvd3Mvc2V0dGluZ3Mvc2VlZC1kYXRhLXdvcmtmbG93LnRzPzliMTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gd29ya2Zsb3dzL3NldHRpbmdzL3NlZWQtZGF0YS13b3JrZmxvdy50c1xyXG4vLyBTZWVkIERhdGEgV29ya2Zsb3cgZm9yIEtWLW9ubHkgYXJjaGl0ZWN0dXJlXHJcblxyXG5pbXBvcnQgeyBrdiB9IGZyb20gJ0B2ZXJjZWwva3YnO1xyXG5pbXBvcnQgeyBidWlsZERhdGFLZXksIGJ1aWxkSW5kZXhLZXkgfSBmcm9tICdAL2RhdGEtc3RvcmUva2V5cyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzUmVzdWx0IHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBkYXRhPzoge1xyXG4gICAgcmVzdWx0czogc3RyaW5nW107XHJcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xyXG4gICAgb3BlcmF0aW9uOiBzdHJpbmc7XHJcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nO1xyXG4gICAgc291cmNlOiBzdHJpbmc7XHJcbiAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbj86IGJvb2xlYW47XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNlZWREYXRhV29ya2Zsb3cge1xyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEV4ZWN1dGUgc2VlZCBkYXRhIG9wZXJhdGlvblxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBleGVjdXRlKHNvdXJjZTogJ2NvbnN0YW50cycgfCAnYmFja3VwJyA9ICdjb25zdGFudHMnKTogUHJvbWlzZTxTZXR0aW5nc1Jlc3VsdD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYFtTZWVkRGF0YVdvcmtmbG93XSDwn4yxIFN0YXJ0aW5nIHNlZWQgZGF0YSBvcGVyYXRpb24gKHNvdXJjZTogJHtzb3VyY2V9KS4uLmApO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgaXNLViA9IEJvb2xlYW4ocHJvY2Vzcy5lbnYuS1ZfUkVTVF9BUElfVVJMKTtcclxuICAgICAgY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJztcclxuICAgICAgY29uc3QgcmVzdWx0czogc3RyaW5nW10gPSBbXTtcclxuICAgICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYFtTZWVkRGF0YVdvcmtmbG93XSDwn4yNIEVudmlyb25tZW50OiAke2lzS1YgPyAnS1YgKFByb2R1Y3Rpb24pJyA6ICdMb2NhbCAoRGV2ZWxvcG1lbnQpJ31gKTtcclxuICAgICAgY29uc29sZS5sb2coYFtTZWVkRGF0YVdvcmtmbG93XSDwn5al77iPIENvbnRleHQ6ICR7aXNTZXJ2ZXIgPyAnU2VydmVyJyA6ICdDbGllbnQnfWApO1xyXG4gICAgICBcclxuICAgICAgLy8gRm9yIGxvY2FsIGVudmlyb25tZW50LCB3ZSBuZWVkIHRvIHJ1biBvbiBjbGllbnQgc2lkZVxyXG4gICAgICBpZiAoIWlzS1YgJiYgaXNTZXJ2ZXIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1NlZWREYXRhV29ya2Zsb3ddIOKaoO+4jyBMb2NhbCBlbnZpcm9ubWVudCBkZXRlY3RlZCBvbiBzZXJ2ZXIgLSByZXR1cm5pbmcgaW5zdHJ1Y3Rpb24gZm9yIGNsaWVudC1zaWRlIGV4ZWN1dGlvbmApO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgbWVzc2FnZTogJ1NlZWQgZGF0YSByZXF1aXJlcyBjbGllbnQtc2lkZSBleGVjdXRpb24gZm9yIGxvY2FsIGVudmlyb25tZW50JyxcclxuICAgICAgICAgIGRhdGE6IHsgXHJcbiAgICAgICAgICAgIHJlc3VsdHM6IFsnQ2xpZW50LXNpZGUgc2VlZCBkYXRhIHJlcXVpcmVkIGZvciBsb2NhbCBlbnZpcm9ubWVudCddLFxyXG4gICAgICAgICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICAgICAgICBvcGVyYXRpb246ICdzZWVkLWRhdGEnLFxyXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogJ2xvY2FsJyxcclxuICAgICAgICAgICAgc291cmNlLFxyXG4gICAgICAgICAgICByZXF1aXJlc0NsaWVudEV4ZWN1dGlvbjogdHJ1ZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFNlZWQgZGF0YSBiYXNlZCBvbiBzb3VyY2VcclxuICAgICAgaWYgKHNvdXJjZSA9PT0gJ2NvbnN0YW50cycpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlZWRGcm9tQ29uc3RhbnRzKHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoc291cmNlID09PSAnYmFja3VwJykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VlZEZyb21CYWNrdXAocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGVycm9ycy5sZW5ndGggPT09IDA7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzdWNjZXNzIFxyXG4gICAgICAgID8gYFN1Y2Nlc3NmdWxseSBzZWVkZWQgZGF0YSBmcm9tICR7c291cmNlfSAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYFxyXG4gICAgICAgIDogYFNlZWQgZGF0YSBjb21wbGV0ZWQgd2l0aCAke2Vycm9ycy5sZW5ndGh9IGVycm9ycyAtICR7cmVzdWx0cy5sZW5ndGh9IG9wZXJhdGlvbnMgY29tcGxldGVkYDtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbU2VlZERhdGFXb3JrZmxvd10g4pyFIFNlZWQgZGF0YSBvcGVyYXRpb24gY29tcGxldGVkOiAke21lc3NhZ2V9YCk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3MsXHJcbiAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXN1bHRzLFxyXG4gICAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgICAgb3BlcmF0aW9uOiAnc2VlZC1kYXRhJyxcclxuICAgICAgICAgIGVudmlyb25tZW50OiBpc0tWID8gJ2t2JyA6ICdsb2NhbCcsXHJcbiAgICAgICAgICBzb3VyY2VcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignW1NlZWREYXRhV29ya2Zsb3ddIOKdjCBTZWVkIGRhdGEgb3BlcmF0aW9uIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgbWVzc2FnZTogYFNlZWQgZGF0YSBvcGVyYXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzdWx0czogW10sXHJcbiAgICAgICAgICBlcnJvcnM6IFtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ10sXHJcbiAgICAgICAgICBvcGVyYXRpb246ICdzZWVkLWRhdGEnLFxyXG4gICAgICAgICAgZW52aXJvbm1lbnQ6ICd1bmtub3duJyxcclxuICAgICAgICAgIHNvdXJjZVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogU2VlZCBkYXRhIGZyb20gY29uc3RhbnRzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2VlZEZyb21Db25zdGFudHMocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU2VlZERhdGFXb3JrZmxvd10g8J+MsSBTZWVkaW5nIGRhdGEgZnJvbSBjb25zdGFudHMuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNlZWQgZGVmYXVsdCBzaXRlc1xyXG4gICAgICBhd2FpdCB0aGlzLnNlZWREZWZhdWx0U2l0ZXMocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNlZWQgZGVmYXVsdCB0YXNrc1xyXG4gICAgICBhd2FpdCB0aGlzLnNlZWREZWZhdWx0VGFza3MocmVzdWx0cywgZXJyb3JzKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCBmcm9tIGNvbnN0YW50czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtTZWVkRGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogU2VlZCBkYXRhIGZyb20gYmFja3VwXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2VlZEZyb21CYWNrdXAocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU2VlZERhdGFXb3JrZmxvd10g8J+MsSBTZWVkaW5nIGRhdGEgZnJvbSBiYWNrdXAuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZvciBub3csIGp1c3Qgc2VlZCBmcm9tIGNvbnN0YW50cyBhcyBiYWNrdXAgZnVuY3Rpb25hbGl0eSB3b3VsZCByZXF1aXJlXHJcbiAgICAgIC8vIHJlYWRpbmcgYmFja3VwIGZpbGVzIHdoaWNoIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXRcclxuICAgICAgcmVzdWx0cy5wdXNoKCdCYWNrdXAgc2VlZGluZyBub3QgeWV0IGltcGxlbWVudGVkLCB1c2luZyBjb25zdGFudHMgaW5zdGVhZCcpO1xyXG4gICAgICBhd2FpdCB0aGlzLnNlZWRGcm9tQ29uc3RhbnRzKHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc3QgZXJyb3JNc2cgPSBgRmFpbGVkIHRvIHNlZWQgZnJvbSBiYWNrdXA6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbU2VlZERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIFNlZWQgZGVmYXVsdCBzaXRlcyBhbmQgc2V0dGxlbWVudHNcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBzZWVkRGVmYXVsdFNpdGVzKHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1NlZWREYXRhV29ya2Zsb3ddIPCfjLEgU2VlZGluZyBkZWZhdWx0IHNpdGVzIGFuZCBzZXR0bGVtZW50cy4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8gTG9hZCBzaXRlcy1kYi5qc29uIGRhdGFcclxuICAgICAgY29uc3Qgc2l0ZXNEYkRhdGEgPSBhd2FpdCB0aGlzLmxvYWRTaXRlc0RiRGF0YSgpO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNpdGVzRGJEYXRhKSB7XHJcbiAgICAgICAgLy8gU2VlZCBzZXR0bGVtZW50cyBmaXJzdFxyXG4gICAgICAgIGlmIChzaXRlc0RiRGF0YS5zZXR0bGVtZW50cyAmJiBBcnJheS5pc0FycmF5KHNpdGVzRGJEYXRhLnNldHRsZW1lbnRzKSkge1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy5zZWVkU2V0dGxlbWVudHMoc2l0ZXNEYkRhdGEuc2V0dGxlbWVudHMsIHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNlZWQgc2l0ZXNcclxuICAgICAgICBpZiAoc2l0ZXNEYkRhdGEuc2l0ZXMgJiYgQXJyYXkuaXNBcnJheShzaXRlc0RiRGF0YS5zaXRlcykpIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMuc2VlZFNpdGVzKHNpdGVzRGJEYXRhLnNpdGVzLCByZXN1bHRzLCBlcnJvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWxsYmFjayB0byBoYXJkY29kZWQgZGF0YSBpZiBzaXRlcy1kYi5qc29uIG5vdCBhdmFpbGFibGVcclxuICAgICAgICBhd2FpdCB0aGlzLnNlZWRGYWxsYmFja1NpdGVzKHJlc3VsdHMsIGVycm9ycyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU2VlZERhdGFXb3JrZmxvd10g4pyFIFNlZWRlZCBkZWZhdWx0IHNpdGVzJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCBkZWZhdWx0IHNpdGVzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW1NlZWREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBTZWVkIGRlZmF1bHQgdGFza3NcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBzZWVkRGVmYXVsdFRhc2tzKHJlc3VsdHM6IHN0cmluZ1tdLCBlcnJvcnM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnW1NlZWREYXRhV29ya2Zsb3ddIPCfjLEgU2VlZGluZyBkZWZhdWx0IHRhc2tzLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkZWZhdWx0VGFza3MgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICd3ZWxjb21lLXRhc2snLFxyXG4gICAgICAgICAgbmFtZTogJ1dlbGNvbWUgdG8gVGhlR2FtZScsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1lvdXIgZmlyc3QgdGFzayBpbiBUaGVHYW1lIHN5c3RlbScsXHJcbiAgICAgICAgICB0eXBlOiAnc3RyYXRlZ3knLFxyXG4gICAgICAgICAgc3RhdHVzOiAnY3JlYXRlZCcsXHJcbiAgICAgICAgICBwcmlvcml0eTogJ21lZGl1bScsXHJcbiAgICAgICAgICBzdGF0aW9uOiAnU3RyYXRlZ3knLFxyXG4gICAgICAgICAgYXJlYTogJ0FETUlOJyxcclxuICAgICAgICAgIHByb2dyZXNzOiAwLFxyXG4gICAgICAgICAgZHVlRGF0ZTogbnVsbCxcclxuICAgICAgICAgIG9yZGVyOiAxLFxyXG4gICAgICAgICAgY29zdDogMCxcclxuICAgICAgICAgIHJldmVudWU6IDAsXHJcbiAgICAgICAgICBzaXRlSWQ6ICdob21lJyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3QgdGFzayBvZiBkZWZhdWx0VGFza3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YUtleSA9IGJ1aWxkRGF0YUtleSgndGFza3MnLCB0YXNrLmlkKTtcclxuICAgICAgICAgIGF3YWl0IGt2LnNldChkYXRhS2V5LCBKU09OLnN0cmluZ2lmeSh0YXNrKSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCB0byB0YXNrcyBpbmRleFxyXG4gICAgICAgICAgY29uc3QgaW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCd0YXNrcycpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2FkZChpbmRleEtleSwgdGFzay5pZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc3VsdHMucHVzaChgU2VlZGVkIHRhc2s6ICR7dGFzay5uYW1lfWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCB0YXNrICR7dGFzay5uYW1lfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW1NlZWREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1tTZWVkRGF0YVdvcmtmbG93XSDinIUgU2VlZGVkIGRlZmF1bHQgdGFza3MnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIGRlZmF1bHQgdGFza3M6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YDtcclxuICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBbU2VlZERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBMb2FkIHNpdGVzLWRiLmpzb24gZGF0YVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGxvYWRTaXRlc0RiRGF0YSgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVHJ5IHRvIGxvYWQgZnJvbSBiYWNrdXAgZmlsZVxyXG4gICAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydCgnZnMnKTtcclxuICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IGltcG9ydCgncGF0aCcpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgYmFja3VwUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnYmFja3VwcycsICdzaXRlcycsICdzaXRlcy1kYi5qc29uJyk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhiYWNrdXBQYXRoKSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoYmFja3VwUGF0aCwgJ3V0ZjgnKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1tTZWVkRGF0YVdvcmtmbG93XSDimqDvuI8gQ291bGQgbm90IGxvYWQgc2l0ZXMtZGIuanNvbjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VlZCBzZXR0bGVtZW50cyBmcm9tIHNpdGVzLWRiLmpzb25cclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBzZWVkU2V0dGxlbWVudHMoc2V0dGxlbWVudHM6IGFueVtdLCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tTZWVkRGF0YVdvcmtmbG93XSDwn4yxIFNlZWRpbmcgc2V0dGxlbWVudHMuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3Qgc2V0dGxlbWVudCBvZiBzZXR0bGVtZW50cykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhS2V5ID0gYnVpbGREYXRhS2V5KCdzZXR0bGVtZW50cycsIHNldHRsZW1lbnQuaWQpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2V0KGRhdGFLZXksIEpTT04uc3RyaW5naWZ5KHNldHRsZW1lbnQpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWRkIHRvIHNldHRsZW1lbnRzIGluZGV4XHJcbiAgICAgICAgICBjb25zdCBpbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoJ3NldHRsZW1lbnRzJyk7XHJcbiAgICAgICAgICBhd2FpdCBrdi5zYWRkKGluZGV4S2V5LCBzZXR0bGVtZW50LmlkKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGBTZWVkZWQgc2V0dGxlbWVudDogJHtzZXR0bGVtZW50Lm5hbWV9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIHNldHRsZW1lbnQgJHtzZXR0bGVtZW50Lm5hbWV9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbU2VlZERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnW1NlZWREYXRhV29ya2Zsb3ddIOKchSBTZWVkZWQgc2V0dGxlbWVudHMnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIHNldHRsZW1lbnRzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW1NlZWREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2VlZCBzaXRlcyBmcm9tIHNpdGVzLWRiLmpzb25cclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBhc3luYyBzZWVkU2l0ZXMoc2l0ZXM6IGFueVtdLCByZXN1bHRzOiBzdHJpbmdbXSwgZXJyb3JzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1tTZWVkRGF0YVdvcmtmbG93XSDwn4yxIFNlZWRpbmcgc2l0ZXMuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3Qgc2l0ZSBvZiBzaXRlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBkYXRhS2V5ID0gYnVpbGREYXRhS2V5KCdzaXRlcycsIHNpdGUuaWQpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2V0KGRhdGFLZXksIEpTT04uc3RyaW5naWZ5KHNpdGUpKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWRkIHRvIHNpdGVzIGluZGV4XHJcbiAgICAgICAgICBjb25zdCBpbmRleEtleSA9IGJ1aWxkSW5kZXhLZXkoJ3NpdGVzJyk7XHJcbiAgICAgICAgICBhd2FpdCBrdi5zYWRkKGluZGV4S2V5LCBzaXRlLmlkKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKGBTZWVkZWQgc2l0ZTogJHtzaXRlLm5hbWV9YCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIHNpdGUgJHtzaXRlLm5hbWV9OiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbU2VlZERhdGFXb3JrZmxvd10g4p2MICR7ZXJyb3JNc2d9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnW1NlZWREYXRhV29ya2Zsb3ddIOKchSBTZWVkZWQgc2l0ZXMnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gYEZhaWxlZCB0byBzZWVkIHNpdGVzOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWA7XHJcbiAgICAgIGVycm9ycy5wdXNoKGVycm9yTXNnKTtcclxuICAgICAgY29uc29sZS5lcnJvcihgW1NlZWREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmFsbGJhY2sgc2l0ZXMgc2VlZGluZyAoaGFyZGNvZGVkIGRhdGEpXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgc2VlZEZhbGxiYWNrU2l0ZXMocmVzdWx0czogc3RyaW5nW10sIGVycm9yczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU2VlZERhdGFXb3JrZmxvd10g8J+MsSBTZWVkaW5nIGZhbGxiYWNrIHNpdGVzLi4uJyk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkZWZhdWx0U2l0ZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdob21lJyxcclxuICAgICAgICAgIG5hbWU6ICdIb21lJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSG9tZSBiYXNlJyxcclxuICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQSFlTSUNBTCcsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ1NUT1JFJyxcclxuICAgICAgICAgICAgc2V0dGxlbWVudElkOiAnc2V0dGxlbWVudC11dml0YScsXHJcbiAgICAgICAgICAgIGdvb2dsZU1hcHNBZGRyZXNzOiAnaHR0cHM6Ly9tYXBzLmFwcC5nb28uZ2wvLi4uJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdmZXJpYS1ib3gnLFxyXG4gICAgICAgICAgbmFtZTogJ0ZlcmlhIEJveCcsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0ZlcmlhIHNhbGVzIGxvY2F0aW9uJyxcclxuICAgICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQSFlTSUNBTCcsXHJcbiAgICAgICAgICAgIGJ1c2luZXNzVHlwZTogJ1NUT1JFJyxcclxuICAgICAgICAgICAgc2V0dGxlbWVudElkOiAnc2V0dGxlbWVudC11dml0YScsXHJcbiAgICAgICAgICAgIGdvb2dsZU1hcHNBZGRyZXNzOiAnaHR0cHM6Ly9tYXBzLmFwcC5nb28uZ2wvLi4uJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdkaWdpdGFsLXNwYWNlJyxcclxuICAgICAgICAgIG5hbWU6ICdEaWdpdGFsIFNwYWNlJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGlnaXRhbCB3b3Jrc3BhY2UnLFxyXG4gICAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICAgdHlwZTogJ0NMT1VEJyxcclxuICAgICAgICAgICAgZGlnaXRhbFR5cGU6ICdXRUJTSVRFJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcclxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgIGxpbmtzOiBbXVxyXG4gICAgICAgIH1cclxuICAgICAgXTtcclxuICAgICAgXHJcbiAgICAgIGZvciAoY29uc3Qgc2l0ZSBvZiBkZWZhdWx0U2l0ZXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YUtleSA9IGJ1aWxkRGF0YUtleSgnc2l0ZXMnLCBzaXRlLmlkKTtcclxuICAgICAgICAgIGF3YWl0IGt2LnNldChkYXRhS2V5LCBKU09OLnN0cmluZ2lmeShzaXRlKSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCB0byBzaXRlcyBpbmRleFxyXG4gICAgICAgICAgY29uc3QgaW5kZXhLZXkgPSBidWlsZEluZGV4S2V5KCdzaXRlcycpO1xyXG4gICAgICAgICAgYXdhaXQga3Yuc2FkZChpbmRleEtleSwgc2l0ZS5pZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJlc3VsdHMucHVzaChgU2VlZGVkIGZhbGxiYWNrIHNpdGU6ICR7c2l0ZS5uYW1lfWApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCBmYWxsYmFjayBzaXRlICR7c2l0ZS5uYW1lfTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICAgICAgZXJyb3JzLnB1c2goZXJyb3JNc2cpO1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW1NlZWREYXRhV29ya2Zsb3ddIOKdjCAke2Vycm9yTXNnfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1tTZWVkRGF0YVdvcmtmbG93XSDinIUgU2VlZGVkIGZhbGxiYWNrIHNpdGVzJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCBlcnJvck1zZyA9IGBGYWlsZWQgdG8gc2VlZCBmYWxsYmFjayBzaXRlczogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xyXG4gICAgICBlcnJvcnMucHVzaChlcnJvck1zZyk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtTZWVkRGF0YVdvcmtmbG93XSDinYwgJHtlcnJvck1zZ31gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImt2IiwiYnVpbGREYXRhS2V5IiwiYnVpbGRJbmRleEtleSIsIlNlZWREYXRhV29ya2Zsb3ciLCJleGVjdXRlIiwic291cmNlIiwiY29uc29sZSIsImxvZyIsImlzS1YiLCJCb29sZWFuIiwicHJvY2VzcyIsImVudiIsIktWX1JFU1RfQVBJX1VSTCIsImlzU2VydmVyIiwicmVzdWx0cyIsImVycm9ycyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZGF0YSIsIm9wZXJhdGlvbiIsImVudmlyb25tZW50IiwicmVxdWlyZXNDbGllbnRFeGVjdXRpb24iLCJzZWVkRnJvbUNvbnN0YW50cyIsInNlZWRGcm9tQmFja3VwIiwibGVuZ3RoIiwiZXJyb3IiLCJFcnJvciIsInNlZWREZWZhdWx0U2l0ZXMiLCJzZWVkRGVmYXVsdFRhc2tzIiwiZXJyb3JNc2ciLCJwdXNoIiwic2l0ZXNEYkRhdGEiLCJsb2FkU2l0ZXNEYkRhdGEiLCJzZXR0bGVtZW50cyIsIkFycmF5IiwiaXNBcnJheSIsInNlZWRTZXR0bGVtZW50cyIsInNpdGVzIiwic2VlZFNpdGVzIiwic2VlZEZhbGxiYWNrU2l0ZXMiLCJkZWZhdWx0VGFza3MiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInR5cGUiLCJzdGF0dXMiLCJwcmlvcml0eSIsInN0YXRpb24iLCJhcmVhIiwicHJvZ3Jlc3MiLCJkdWVEYXRlIiwib3JkZXIiLCJjb3N0IiwicmV2ZW51ZSIsInNpdGVJZCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJsaW5rcyIsInRhc2siLCJkYXRhS2V5Iiwic2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsImluZGV4S2V5Iiwic2FkZCIsImZzIiwicGF0aCIsImJhY2t1cFBhdGgiLCJqb2luIiwiY3dkIiwiZXhpc3RzU3luYyIsInJlYWRGaWxlU3luYyIsInBhcnNlIiwid2FybiIsInNldHRsZW1lbnQiLCJzaXRlIiwiZGVmYXVsdFNpdGVzIiwibWV0YWRhdGEiLCJidXNpbmVzc1R5cGUiLCJzZXR0bGVtZW50SWQiLCJnb29nbGVNYXBzQWRkcmVzcyIsImlzQWN0aXZlIiwiZGlnaXRhbFR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./workflows/settings/seed-data-workflow.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/@vercel","vendor-chunks/uncrypto","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsettings%2Froute&page=%2Fapi%2Fsettings%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsettings%2Froute.ts&appDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUsuario%5CAKILES%5CGAME%20WEB%20APP%5CSPLIT%5Cthegame&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();