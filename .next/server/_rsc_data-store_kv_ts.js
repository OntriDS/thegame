"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_data-store_kv_ts";
exports.ids = ["_rsc_data-store_kv_ts"];
exports.modules = {

/***/ "(rsc)/./data-store/kv.ts":
/*!**************************!*\
  !*** ./data-store/kv.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kvDel: () => (/* binding */ kvDel),\n/* harmony export */   kvGet: () => (/* binding */ kvGet),\n/* harmony export */   kvMGet: () => (/* binding */ kvMGet),\n/* harmony export */   kvSAdd: () => (/* binding */ kvSAdd),\n/* harmony export */   kvSMembers: () => (/* binding */ kvSMembers),\n/* harmony export */   kvSRem: () => (/* binding */ kvSRem),\n/* harmony export */   kvScan: () => (/* binding */ kvScan),\n/* harmony export */   kvSet: () => (/* binding */ kvSet)\n/* harmony export */ });\n/* harmony import */ var _vercel_kv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/kv */ \"(rsc)/./node_modules/@vercel/kv/dist/index.js\");\n// data-store/kv.ts\n// Thin server-only wrappers around @vercel/kv. No HTTP calls to own routes.\n\nasync function kvGet(key) {\n    return await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.get(key) ?? null;\n}\nasync function kvSet(key, value) {\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.set(key, value);\n}\nasync function kvDel(key) {\n    await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.del(key);\n}\nasync function kvMGet(keys) {\n    const res = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.mget(keys);\n    return res.map((v)=>v ?? null);\n}\nasync function kvScan(prefix, limit = 100) {\n    const keys = [];\n    const iter = _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.scanIterator({\n        match: `${prefix}*`,\n        count: limit\n    });\n    for await (const key of iter){\n        keys.push(key);\n    }\n    return keys;\n}\nasync function kvSAdd(key, ...members) {\n    if (members.length) await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.sadd(key, ...members);\n}\nasync function kvSRem(key, ...members) {\n    if (members.length) await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.srem(key, ...members);\n}\nasync function kvSMembers(key) {\n    const members = await _vercel_kv__WEBPACK_IMPORTED_MODULE_0__.kv.smembers(key);\n    return members ?? [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9kYXRhLXN0b3JlL2t2LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLG1CQUFtQjtBQUNuQiw0RUFBNEU7QUFFNUM7QUFFekIsZUFBZUMsTUFBU0MsR0FBVztJQUN4QyxPQUFPLE1BQU9GLDBDQUFFQSxDQUFDRyxHQUFHLENBQUlELFFBQVM7QUFDbkM7QUFFTyxlQUFlRSxNQUFTRixHQUFXLEVBQUVHLEtBQVE7SUFDbEQsTUFBTUwsMENBQUVBLENBQUNNLEdBQUcsQ0FBQ0osS0FBS0c7QUFDcEI7QUFFTyxlQUFlRSxNQUFNTCxHQUFXO0lBQ3JDLE1BQU1GLDBDQUFFQSxDQUFDUSxHQUFHLENBQUNOO0FBQ2Y7QUFFTyxlQUFlTyxPQUFVQyxJQUFjO0lBQzVDLE1BQU1DLE1BQU0sTUFBTVgsMENBQUVBLENBQUNZLElBQUksQ0FBQ0Y7SUFDMUIsT0FBTyxJQUFlRyxHQUFHLENBQUNDLENBQUFBLElBQU1BLEtBQUs7QUFDdkM7QUFFTyxlQUFlQyxPQUFPQyxNQUFjLEVBQUVDLFFBQVEsR0FBRztJQUN0RCxNQUFNUCxPQUFpQixFQUFFO0lBQ3pCLE1BQU1RLE9BQU9sQiwwQ0FBRUEsQ0FBQ21CLFlBQVksQ0FBQztRQUFFQyxPQUFPLENBQUMsRUFBRUosT0FBTyxDQUFDLENBQUM7UUFBRUssT0FBT0o7SUFBTTtJQUNqRSxXQUFXLE1BQU1mLE9BQU9nQixLQUFNO1FBQzVCUixLQUFLWSxJQUFJLENBQUNwQjtJQUNaO0lBQ0EsT0FBT1E7QUFDVDtBQUVPLGVBQWVhLE9BQU9yQixHQUFXLEVBQUUsR0FBR3NCLE9BQWlCO0lBQzVELElBQUlBLFFBQVFDLE1BQU0sRUFBRSxNQUFNekIsMENBQUVBLENBQUMwQixJQUFJLENBQUN4QixRQUFTc0I7QUFDN0M7QUFFTyxlQUFlRyxPQUFPekIsR0FBVyxFQUFFLEdBQUdzQixPQUFpQjtJQUM1RCxJQUFJQSxRQUFRQyxNQUFNLEVBQUUsTUFBTXpCLDBDQUFFQSxDQUFDNEIsSUFBSSxDQUFDMUIsUUFBU3NCO0FBQzdDO0FBRU8sZUFBZUssV0FBVzNCLEdBQVc7SUFDMUMsTUFBTXNCLFVBQVUsTUFBTXhCLDBDQUFFQSxDQUFDOEIsUUFBUSxDQUFDNUI7SUFDbEMsT0FBT3NCLFdBQVcsRUFBRTtBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3RoZWdhbWUtYWRtaW4vLi9kYXRhLXN0b3JlL2t2LnRzPzc1NDUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZGF0YS1zdG9yZS9rdi50c1xyXG4vLyBUaGluIHNlcnZlci1vbmx5IHdyYXBwZXJzIGFyb3VuZCBAdmVyY2VsL2t2LiBObyBIVFRQIGNhbGxzIHRvIG93biByb3V0ZXMuXHJcblxyXG5pbXBvcnQgeyBrdiB9IGZyb20gJ0B2ZXJjZWwva3YnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGt2R2V0PFQ+KGtleTogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xyXG4gIHJldHVybiAoYXdhaXQga3YuZ2V0PFQ+KGtleSkpID8/IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBrdlNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBhd2FpdCBrdi5zZXQoa2V5LCB2YWx1ZSBhcyBhbnkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga3ZEZWwoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBhd2FpdCBrdi5kZWwoa2V5KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGt2TUdldDxUPihrZXlzOiBzdHJpbmdbXSk6IFByb21pc2U8KFQgfCBudWxsKVtdPiB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQga3YubWdldChrZXlzKTtcclxuICByZXR1cm4gKHJlcyBhcyBhbnlbXSkubWFwKHYgPT4gKHYgPz8gbnVsbCkpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24ga3ZTY2FuKHByZWZpeDogc3RyaW5nLCBsaW1pdCA9IDEwMCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICBjb25zdCBrZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGNvbnN0IGl0ZXIgPSBrdi5zY2FuSXRlcmF0b3IoeyBtYXRjaDogYCR7cHJlZml4fSpgLCBjb3VudDogbGltaXQgfSk7XHJcbiAgZm9yIGF3YWl0IChjb25zdCBrZXkgb2YgaXRlcikge1xyXG4gICAga2V5cy5wdXNoKGtleSBhcyBzdHJpbmcpO1xyXG4gIH1cclxuICByZXR1cm4ga2V5cztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGt2U0FkZChrZXk6IHN0cmluZywgLi4ubWVtYmVyczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAobWVtYmVycy5sZW5ndGgpIGF3YWl0IGt2LnNhZGQoa2V5LCAuLi4obWVtYmVycyBhcyBbc3RyaW5nLCAuLi5zdHJpbmdbXV0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGt2U1JlbShrZXk6IHN0cmluZywgLi4ubWVtYmVyczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBpZiAobWVtYmVycy5sZW5ndGgpIGF3YWl0IGt2LnNyZW0oa2V5LCAuLi4obWVtYmVycyBhcyBbc3RyaW5nLCAuLi5zdHJpbmdbXV0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGt2U01lbWJlcnMoa2V5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgY29uc3QgbWVtYmVycyA9IGF3YWl0IGt2LnNtZW1iZXJzKGtleSk7XHJcbiAgcmV0dXJuIG1lbWJlcnMgPz8gW107XHJcbn1cclxuXHJcblxyXG4iXSwibmFtZXMiOlsia3YiLCJrdkdldCIsImtleSIsImdldCIsImt2U2V0IiwidmFsdWUiLCJzZXQiLCJrdkRlbCIsImRlbCIsImt2TUdldCIsImtleXMiLCJyZXMiLCJtZ2V0IiwibWFwIiwidiIsImt2U2NhbiIsInByZWZpeCIsImxpbWl0IiwiaXRlciIsInNjYW5JdGVyYXRvciIsIm1hdGNoIiwiY291bnQiLCJwdXNoIiwia3ZTQWRkIiwibWVtYmVycyIsImxlbmd0aCIsInNhZGQiLCJrdlNSZW0iLCJzcmVtIiwia3ZTTWVtYmVycyIsInNtZW1iZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./data-store/kv.ts\n");

/***/ })

};
;